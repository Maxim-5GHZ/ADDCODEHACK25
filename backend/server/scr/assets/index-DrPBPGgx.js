(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var ud={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function ES(){if(np)return Il;np=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:o}}return Il.Fragment=t,Il.jsx=e,Il.jsxs=e,Il}var ip;function SS(){return ip||(ip=1,ud.exports=ES()),ud.exports}var E=SS(),cd={exports:{}},xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function CS(){if(sp)return xt;sp=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function p(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function T(M,U,z){this.props=M,this.context=U,this.refs=w,this.updater=z||v}T.prototype.isReactComponent={},T.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function b(){}b.prototype=T.prototype;function R(M,U,z){this.props=M,this.context=U,this.refs=w,this.updater=z||v}var O=R.prototype=new b;O.constructor=R,S(O,T.prototype),O.isPureReactComponent=!0;var A=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function B(M,U,z,tt,rt,ht){return z=ht.ref,{$$typeof:r,type:M,key:U,ref:z!==void 0?z:null,props:ht}}function H(M,U){return B(M.type,U,void 0,void 0,void 0,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function et(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(z){return U[z]})}var lt=/\/+/g;function it(M,U){return typeof M=="object"&&M!==null&&M.key!=null?et(""+M.key):U.toString(36)}function st(){}function J(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(st,st):(M.status="pending",M.then(function(U){M.status==="pending"&&(M.status="fulfilled",M.value=U)},function(U){M.status==="pending"&&(M.status="rejected",M.reason=U)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function nt(M,U,z,tt,rt){var ht=typeof M;(ht==="undefined"||ht==="boolean")&&(M=null);var ut=!1;if(M===null)ut=!0;else switch(ht){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(M.$$typeof){case r:case t:ut=!0;break;case m:return ut=M._init,nt(ut(M._payload),U,z,tt,rt)}}if(ut)return rt=rt(M),ut=tt===""?"."+it(M,0):tt,A(rt)?(z="",ut!=null&&(z=ut.replace(lt,"$&/")+"/"),nt(rt,U,z,"",function(le){return le})):rt!=null&&(V(rt)&&(rt=H(rt,z+(rt.key==null||M&&M.key===rt.key?"":(""+rt.key).replace(lt,"$&/")+"/")+ut)),U.push(rt)),1;ut=0;var Ft=tt===""?".":tt+":";if(A(M))for(var At=0;At<M.length;At++)tt=M[At],ht=Ft+it(tt,At),ut+=nt(tt,U,z,ht,rt);else if(At=p(M),typeof At=="function")for(M=At.call(M),At=0;!(tt=M.next()).done;)tt=tt.value,ht=Ft+it(tt,At++),ut+=nt(tt,U,z,ht,rt);else if(ht==="object"){if(typeof M.then=="function")return nt(J(M),U,z,tt,rt);throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ut}function I(M,U,z){if(M==null)return M;var tt=[],rt=0;return nt(M,tt,"","",function(ht){return U.call(z,ht,rt++)}),tt}function Z(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(z){(M._status===0||M._status===-1)&&(M._status=1,M._result=z)},function(z){(M._status===0||M._status===-1)&&(M._status=2,M._result=z)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var $=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function at(){}return xt.Children={map:I,forEach:function(M,U,z){I(M,function(){U.apply(this,arguments)},z)},count:function(M){var U=0;return I(M,function(){U++}),U},toArray:function(M){return I(M,function(U){return U})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},xt.Component=T,xt.Fragment=e,xt.Profiler=a,xt.PureComponent=R,xt.StrictMode=i,xt.Suspense=f,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,xt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return L.H.useMemoCache(M)}},xt.cache=function(M){return function(){return M.apply(null,arguments)}},xt.cloneElement=function(M,U,z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var tt=S({},M.props),rt=M.key,ht=void 0;if(U!=null)for(ut in U.ref!==void 0&&(ht=void 0),U.key!==void 0&&(rt=""+U.key),U)!X.call(U,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&U.ref===void 0||(tt[ut]=U[ut]);var ut=arguments.length-2;if(ut===1)tt.children=z;else if(1<ut){for(var Ft=Array(ut),At=0;At<ut;At++)Ft[At]=arguments[At+2];tt.children=Ft}return B(M.type,rt,void 0,void 0,ht,tt)},xt.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},xt.createElement=function(M,U,z){var tt,rt={},ht=null;if(U!=null)for(tt in U.key!==void 0&&(ht=""+U.key),U)X.call(U,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(rt[tt]=U[tt]);var ut=arguments.length-2;if(ut===1)rt.children=z;else if(1<ut){for(var Ft=Array(ut),At=0;At<ut;At++)Ft[At]=arguments[At+2];rt.children=Ft}if(M&&M.defaultProps)for(tt in ut=M.defaultProps,ut)rt[tt]===void 0&&(rt[tt]=ut[tt]);return B(M,ht,void 0,void 0,null,rt)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(M){return{$$typeof:h,render:M}},xt.isValidElement=V,xt.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:Z}},xt.memo=function(M,U){return{$$typeof:g,type:M,compare:U===void 0?null:U}},xt.startTransition=function(M){var U=L.T,z={};L.T=z;try{var tt=M(),rt=L.S;rt!==null&&rt(z,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(at,$)}catch(ht){$(ht)}finally{L.T=U}},xt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},xt.use=function(M){return L.H.use(M)},xt.useActionState=function(M,U,z){return L.H.useActionState(M,U,z)},xt.useCallback=function(M,U){return L.H.useCallback(M,U)},xt.useContext=function(M){return L.H.useContext(M)},xt.useDebugValue=function(){},xt.useDeferredValue=function(M,U){return L.H.useDeferredValue(M,U)},xt.useEffect=function(M,U,z){var tt=L.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(M,U)},xt.useId=function(){return L.H.useId()},xt.useImperativeHandle=function(M,U,z){return L.H.useImperativeHandle(M,U,z)},xt.useInsertionEffect=function(M,U){return L.H.useInsertionEffect(M,U)},xt.useLayoutEffect=function(M,U){return L.H.useLayoutEffect(M,U)},xt.useMemo=function(M,U){return L.H.useMemo(M,U)},xt.useOptimistic=function(M,U){return L.H.useOptimistic(M,U)},xt.useReducer=function(M,U,z){return L.H.useReducer(M,U,z)},xt.useRef=function(M){return L.H.useRef(M)},xt.useState=function(M){return L.H.useState(M)},xt.useSyncExternalStore=function(M,U,z){return L.H.useSyncExternalStore(M,U,z)},xt.useTransition=function(){return L.H.useTransition()},xt.version="19.1.1",xt}var rp;function yg(){return rp||(rp=1,cd.exports=CS()),cd.exports}var j=yg(),hd={exports:{}},jl={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function bS(){return ap||(ap=1,(function(r){function t(I,Z){var $=I.length;I.push(Z);t:for(;0<$;){var at=$-1>>>1,M=I[at];if(0<a(M,Z))I[at]=Z,I[$]=M,$=at;else break t}}function e(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var Z=I[0],$=I.pop();if($!==Z){I[0]=$;t:for(var at=0,M=I.length,U=M>>>1;at<U;){var z=2*(at+1)-1,tt=I[z],rt=z+1,ht=I[rt];if(0>a(tt,$))rt<M&&0>a(ht,tt)?(I[at]=ht,I[rt]=$,at=rt):(I[at]=tt,I[z]=$,at=z);else if(rt<M&&0>a(ht,$))I[at]=ht,I[rt]=$,at=rt;else break t}}return Z}function a(I,Z){var $=I.sortIndex-Z.sortIndex;return $!==0?$:I.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var f=[],g=[],m=1,y=null,p=3,v=!1,S=!1,w=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function A(I){for(var Z=e(g);Z!==null;){if(Z.callback===null)i(g);else if(Z.startTime<=I)i(g),Z.sortIndex=Z.expirationTime,t(f,Z);else break;Z=e(g)}}function L(I){if(w=!1,A(I),!S)if(e(f)!==null)S=!0,X||(X=!0,it());else{var Z=e(g);Z!==null&&nt(L,Z.startTime-I)}}var X=!1,B=-1,H=5,V=-1;function et(){return T?!0:!(r.unstable_now()-V<H)}function lt(){if(T=!1,X){var I=r.unstable_now();V=I;var Z=!0;try{t:{S=!1,w&&(w=!1,R(B),B=-1),v=!0;var $=p;try{e:{for(A(I),y=e(f);y!==null&&!(y.expirationTime>I&&et());){var at=y.callback;if(typeof at=="function"){y.callback=null,p=y.priorityLevel;var M=at(y.expirationTime<=I);if(I=r.unstable_now(),typeof M=="function"){y.callback=M,A(I),Z=!0;break e}y===e(f)&&i(f),A(I)}else i(f);y=e(f)}if(y!==null)Z=!0;else{var U=e(g);U!==null&&nt(L,U.startTime-I),Z=!1}}break t}finally{y=null,p=$,v=!1}Z=void 0}}finally{Z?it():X=!1}}}var it;if(typeof O=="function")it=function(){O(lt)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,J=st.port2;st.port1.onmessage=lt,it=function(){J.postMessage(null)}}else it=function(){b(lt,0)};function nt(I,Z){B=b(function(){I(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(I){I.callback=null},r.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_next=function(I){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var $=p;p=Z;try{return I()}finally{p=$}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var $=p;p=I;try{return Z()}finally{p=$}},r.unstable_scheduleCallback=function(I,Z,$){var at=r.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?at+$:at):$=at,I){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=$+M,I={id:m++,callback:Z,priorityLevel:I,startTime:$,expirationTime:M,sortIndex:-1},$>at?(I.sortIndex=$,t(g,I),e(f)===null&&I===e(g)&&(w?(R(B),B=-1):w=!0,nt(L,$-at))):(I.sortIndex=M,t(f,I),S||v||(S=!0,X||(X=!0,it()))),I},r.unstable_shouldYield=et,r.unstable_wrapCallback=function(I){var Z=p;return function(){var $=p;p=Z;try{return I.apply(this,arguments)}finally{p=$}}}})(dd)),dd}var lp;function TS(){return lp||(lp=1,fd.exports=bS()),fd.exports}var gd={exports:{}},Le={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op;function wS(){if(op)return Le;op=1;var r=yg();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:g,implementation:m}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Le.createPortal=function(f,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,m)},Le.flushSync=function(f){var g=u.T,m=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=g,i.p=m,i.d.f()}},Le.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},Le.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Le.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin),p=typeof g.integrity=="string"?g.integrity:void 0,v=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:p,fetchPriority:v}):m==="script"&&i.d.X(f,{crossOrigin:y,integrity:p,fetchPriority:v,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Le.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},Le.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin);i.d.L(f,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Le.preloadModule=function(f,g){if(typeof f=="string")if(g){var m=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},Le.requestFormReset=function(f){i.d.r(f)},Le.unstable_batchedUpdates=function(f,g){return f(g)},Le.useFormState=function(f,g,m){return u.H.useFormState(f,g,m)},Le.useFormStatus=function(){return u.H.useHostTransitionStatus()},Le.version="19.1.1",Le}var up;function RS(){if(up)return gd.exports;up=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),gd.exports=wS(),gd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function AS(){if(cp)return jl;cp=1;var r=TS(),t=yg(),e=RS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,c=s;;){var d=l.return;if(d===null)break;var _=d.alternate;if(_===null){if(c=d.return,c!==null){l=c;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===l)return h(d),n;if(_===c)return h(d),s;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=d,c=_;else{for(var x=!1,C=d.child;C;){if(C===l){x=!0,l=d,c=_;break}if(C===c){x=!0,c=d,l=_;break}C=C.sibling}if(!x){for(C=_.child;C;){if(C===l){x=!0,l=_,c=d;break}if(C===c){x=!0,c=_,l=d;break}C=C.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),lt=Symbol.iterator;function it(n){return n===null||typeof n!="object"?null:(n=lt&&n[lt]||n["@@iterator"],typeof n=="function"?n:null)}var st=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===st?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case T:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case X:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case v:return"Portal";case O:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case A:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return s=n.displayName||null,s!==null?s:J(n.type)||"Memo";case H:s=n._payload,n=n._init;try{return J(n(s))}catch{}}return null}var nt=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},at=[],M=-1;function U(n){return{current:n}}function z(n){0>M||(n.current=at[M],at[M]=null,M--)}function tt(n,s){M++,at[M]=n.current,n.current=s}var rt=U(null),ht=U(null),ut=U(null),Ft=U(null);function At(n,s){switch(tt(ut,s),tt(ht,n),tt(rt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?D0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=D0(s),n=L0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(rt),tt(rt,n)}function le(){z(rt),z(ht),z(ut)}function Se(n){n.memoizedState!==null&&tt(Ft,n);var s=rt.current,l=L0(s,n.type);s!==l&&(tt(ht,n),tt(rt,l))}function ci(n){ht.current===n&&(z(rt),z(ht)),Ft.current===n&&(z(Ft),Ml._currentValue=$)}var Ns=Object.prototype.hasOwnProperty,hi=r.unstable_scheduleCallback,Ln=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,gn=r.unstable_requestPaint,Ce=r.unstable_now,Zi=r.unstable_getCurrentPriorityLevel,qi=r.unstable_ImmediatePriority,Vn=r.unstable_UserBlockingPriority,On=r.unstable_NormalPriority,Ki=r.unstable_LowPriority,se=r.unstable_IdlePriority,ka=r.log,Fa=r.unstable_setDisableYieldValue,Zn=null,ge=null;function qn(n){if(typeof ka=="function"&&Fa(n),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Zn,n)}catch{}}var Ae=Math.clz32?Math.clz32:$c,wo=Math.log,za=Math.LN2;function $c(n){return n>>>=0,n===0?32:31-(wo(n)/za|0)|0}var _r=256,Is=4194304;function Kn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Wi(n,s,l){var c=n.pendingLanes;if(c===0)return 0;var d=0,_=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var C=c&134217727;return C!==0?(c=C&~_,c!==0?d=Kn(c):(x&=C,x!==0?d=Kn(x):l||(l=C&~n,l!==0&&(d=Kn(l))))):(C=c&~_,C!==0?d=Kn(C):x!==0?d=Kn(x):l||(l=c&~n,l!==0&&(d=Kn(l)))),d===0?0:s!==0&&s!==d&&(s&_)===0&&(_=d&-d,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:d}function Qi(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Jc(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var n=_r;return _r<<=1,(_r&4194048)===0&&(_r=256),n}function $i(){var n=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),n}function fi(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Nn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ro(n,s,l,c,d,_){var x=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var C=n.entanglements,D=n.expirationTimes,G=n.hiddenUpdates;for(l=x&~l;0<l;){var q=31-Ae(l),Q=1<<q;C[q]=0,D[q]=-1;var P=G[q];if(P!==null)for(G[q]=null,q=0;q<P.length;q++){var Y=P[q];Y!==null&&(Y.lane&=-536870913)}l&=~Q}c!==0&&Ga(n,c,0),_!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=_&~(x&~s))}function Ga(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Ae(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|l&4194090}function ke(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var c=31-Ae(l),d=1<<c;d&s|n[c]&s&&(n[c]|=s),l&=~d}}function In(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Me(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nn(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:W0(n.type))}function Be(n,s){var l=Z.p;try{return Z.p=n,s()}finally{Z.p=l}}var me=Math.random().toString(36).slice(2),Zt="__reactFiber$"+me,Tt="__reactProps$"+me,ee="__reactContainer$"+me,sn="__reactEvents$"+me,th="__reactListeners$"+me,f1="__reactHandles$"+me,pm="__reactResources$"+me,Pa="__reactMarker$"+me;function eh(n){delete n[Zt],delete n[Tt],delete n[sn],delete n[th],delete n[f1]}function pr(n){var s=n[Zt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ee]||l[Zt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=j0(n);n!==null;){if(l=n[Zt])return l;n=j0(n)}return s}n=l,l=n.parentNode}return null}function xr(n){if(n=n[Zt]||n[ee]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ua(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function vr(n){var s=n[pm];return s||(s=n[pm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _e(n){n[Pa]=!0}var xm=new Set,vm={};function js(n,s){Er(n,s),Er(n+"Capture",s)}function Er(n,s){for(vm[n]=s,n=0;n<s.length;n++)xm.add(s[n])}var d1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Em={},Sm={};function g1(n){return Ns.call(Sm,n)?!0:Ns.call(Em,n)?!1:d1.test(n)?Sm[n]=!0:(Em[n]=!0,!1)}function Ao(n,s,l){if(g1(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function Mo(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function di(n,s,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+c)}}var nh,Cm;function Sr(n){if(nh===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);nh=s&&s[1]||"",Cm=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nh+n+Cm}var ih=!1;function sh(n,s){if(!n||ih)return"";ih=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(Y){var P=Y}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(Y){P=Y}n.call(Q.prototype)}}else{try{throw Error()}catch(Y){P=Y}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(Y){if(Y&&P&&typeof Y.stack=="string")return[Y.stack,P.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),x=_[0],C=_[1];if(x&&C){var D=x.split(`
`),G=C.split(`
`);for(d=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(c===D.length||d===G.length)for(c=D.length-1,d=G.length-1;1<=c&&0<=d&&D[c]!==G[d];)d--;for(;1<=c&&0<=d;c--,d--)if(D[c]!==G[d]){if(c!==1||d!==1)do if(c--,d--,0>d||D[c]!==G[d]){var q=`
`+D[c].replace(" at new "," at ");return n.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",n.displayName)),q}while(1<=c&&0<=d);break}}}finally{ih=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Sr(l):""}function m1(n){switch(n.tag){case 26:case 27:case 5:return Sr(n.type);case 16:return Sr("Lazy");case 13:return Sr("Suspense");case 19:return Sr("SuspenseList");case 0:case 15:return sh(n.type,!1);case 11:return sh(n.type.render,!1);case 1:return sh(n.type,!0);case 31:return Sr("Activity");default:return""}}function bm(n){try{var s="";do s+=m1(n),n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Tm(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _1(n){var s=Tm(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,_=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,_.call(this,x)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Do(n){n._valueTracker||(n._valueTracker=_1(n))}function wm(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return n&&(c=Tm(n)?n.checked?"true":"false":n.value),n=c,n!==l?(s.setValue(n),!0):!1}function Lo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var y1=/[\n"\\]/g;function _n(n){return n.replace(y1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function rh(n,s,l,c,d,_,x,C){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),s!=null?x==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+mn(s)):n.value!==""+mn(s)&&(n.value=""+mn(s)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),s!=null?ah(n,x,mn(s)):l!=null?ah(n,x,mn(l)):c!=null&&n.removeAttribute("value"),d==null&&_!=null&&(n.defaultChecked=!!_),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+mn(C):n.removeAttribute("name")}function Rm(n,s,l,c,d,_,x,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;l=l!=null?""+mn(l):"",s=s!=null?""+mn(s):l,C||s===n.value||(n.value=s),n.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=C?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x)}function ah(n,s,l){s==="number"&&Lo(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Cr(n,s,l,c){if(n=n.options,s){s={};for(var d=0;d<l.length;d++)s["$"+l[d]]=!0;for(l=0;l<n.length;l++)d=s.hasOwnProperty("$"+n[l].value),n[l].selected!==d&&(n[l].selected=d),d&&c&&(n[l].defaultSelected=!0)}else{for(l=""+mn(l),s=null,d=0;d<n.length;d++){if(n[d].value===l){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Am(n,s,l){if(s!=null&&(s=""+mn(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+mn(l):""}function Mm(n,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(nt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=mn(s),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c)}function br(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var p1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dm(n,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,l):typeof l!="number"||l===0||p1.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function Lm(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&l[d]!==c&&Dm(n,d,c)}else for(var _ in s)s.hasOwnProperty(_)&&Dm(n,_,s[_])}function lh(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),v1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(n){return v1.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var oh=null;function uh(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tr=null,wr=null;function Om(n){var s=xr(n);if(s&&(n=s.stateNode)){var l=n[Tt]||null;t:switch(n=s.stateNode,s.type){case"input":if(rh(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==n&&c.form===n.form){var d=c[Tt]||null;if(!d)throw Error(i(90));rh(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===n.form&&wm(c)}break t;case"textarea":Am(n,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&Cr(n,!!l.multiple,s,!1)}}}var ch=!1;function Nm(n,s,l){if(ch)return n(s,l);ch=!0;try{var c=n(s);return c}finally{if(ch=!1,(Tr!==null||wr!==null)&&(yu(),Tr&&(s=Tr,n=wr,wr=Tr=null,Om(s),n)))for(s=0;s<n.length;s++)Om(n[s])}}function Ya(n,s){var l=n.stateNode;if(l===null)return null;var c=l[Tt]||null;if(c===null)return null;l=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hh=!1;if(gi)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){hh=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{hh=!1}var Ji=null,fh=null,No=null;function Im(){if(No)return No;var n,s=fh,l=s.length,c,d="value"in Ji?Ji.value:Ji.textContent,_=d.length;for(n=0;n<l&&s[n]===d[n];n++);var x=l-n;for(c=1;c<=x&&s[l-c]===d[_-c];c++);return No=d.slice(n,1<c?1-c:void 0)}function Io(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function jo(){return!0}function jm(){return!1}function He(n){function s(l,c,d,_,x){this._reactName=l,this._targetInst=d,this.type=c,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?jo:jm,this.isPropagationStopped=jm,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),s}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=He(ks),Ba=m({},ks,{view:0,detail:0}),E1=He(Ba),dh,gh,Ha,Fo=m({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ha&&(Ha&&n.type==="mousemove"?(dh=n.screenX-Ha.screenX,gh=n.screenY-Ha.screenY):gh=dh=0,Ha=n),dh)},movementY:function(n){return"movementY"in n?n.movementY:gh}}),km=He(Fo),S1=m({},Fo,{dataTransfer:0}),C1=He(S1),b1=m({},Ba,{relatedTarget:0}),mh=He(b1),T1=m({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),w1=He(T1),R1=m({},ks,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),A1=He(R1),M1=m({},ks,{data:0}),Fm=He(M1),D1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N1(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=O1[n])?!!s[n]:!1}function _h(){return N1}var I1=m({},Ba,{key:function(n){if(n.key){var s=D1[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(n){return n.type==="keypress"?Io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),j1=He(I1),k1=m({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=He(k1),F1=m({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),z1=He(F1),G1=m({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),P1=He(G1),U1=m({},Fo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y1=He(U1),X1=m({},ks,{newState:0,oldState:0}),B1=He(X1),H1=[9,13,27,32],yh=gi&&"CompositionEvent"in window,Va=null;gi&&"documentMode"in document&&(Va=document.documentMode);var V1=gi&&"TextEvent"in window&&!Va,Gm=gi&&(!yh||Va&&8<Va&&11>=Va),Pm=" ",Um=!1;function Ym(n,s){switch(n){case"keyup":return H1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rr=!1;function Z1(n,s){switch(n){case"compositionend":return Xm(s);case"keypress":return s.which!==32?null:(Um=!0,Pm);case"textInput":return n=s.data,n===Pm&&Um?null:n;default:return null}}function q1(n,s){if(Rr)return n==="compositionend"||!yh&&Ym(n,s)?(n=Im(),No=fh=Ji=null,Rr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gm&&s.locale!=="ko"?null:s.data;default:return null}}var K1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!K1[n.type]:s==="textarea"}function Hm(n,s,l,c){Tr?wr?wr.push(c):wr=[c]:Tr=c,s=Cu(s,"onChange"),0<s.length&&(l=new ko("onChange","change",null,l,c),n.push({event:l,listeners:s}))}var Za=null,qa=null;function W1(n){T0(n,0)}function zo(n){var s=Ua(n);if(wm(s))return n}function Vm(n,s){if(n==="change")return s}var Zm=!1;if(gi){var ph;if(gi){var xh="oninput"in document;if(!xh){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),xh=typeof qm.oninput=="function"}ph=xh}else ph=!1;Zm=ph&&(!document.documentMode||9<document.documentMode)}function Km(){Za&&(Za.detachEvent("onpropertychange",Wm),qa=Za=null)}function Wm(n){if(n.propertyName==="value"&&zo(qa)){var s=[];Hm(s,qa,n,uh(n)),Nm(W1,s)}}function Q1(n,s,l){n==="focusin"?(Km(),Za=s,qa=l,Za.attachEvent("onpropertychange",Wm)):n==="focusout"&&Km()}function $1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zo(qa)}function J1(n,s){if(n==="click")return zo(s)}function tE(n,s){if(n==="input"||n==="change")return zo(s)}function eE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var rn=typeof Object.is=="function"?Object.is:eE;function Ka(n,s){if(rn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var d=l[c];if(!Ns.call(s,d)||!rn(n[d],s[d]))return!1}return!0}function Qm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $m(n,s){var l=Qm(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=s&&c>=s)return{node:l,offset:s-n};n=c}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Qm(l)}}function Jm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Jm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function t_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Lo(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Lo(n.document)}return s}function vh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var nE=gi&&"documentMode"in document&&11>=document.documentMode,Ar=null,Eh=null,Wa=null,Sh=!1;function e_(n,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sh||Ar==null||Ar!==Lo(c)||(c=Ar,"selectionStart"in c&&vh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Ka(Wa,c)||(Wa=c,c=Cu(Eh,"onSelect"),0<c.length&&(s=new ko("onSelect","select",null,s,l),n.push({event:s,listeners:c}),s.target=Ar)))}function Fs(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Mr={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Ch={},n_={};gi&&(n_=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function zs(n){if(Ch[n])return Ch[n];if(!Mr[n])return n;var s=Mr[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in n_)return Ch[n]=s[l];return n}var i_=zs("animationend"),s_=zs("animationiteration"),r_=zs("animationstart"),iE=zs("transitionrun"),sE=zs("transitionstart"),rE=zs("transitioncancel"),a_=zs("transitionend"),l_=new Map,bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bh.push("scrollEnd");function jn(n,s){l_.set(n,s),js(s,[n])}var o_=new WeakMap;function yn(n,s){if(typeof n=="object"&&n!==null){var l=o_.get(n);return l!==void 0?l:(s={value:n,source:s,stack:bm(s)},o_.set(n,s),s)}return{value:n,source:s,stack:bm(s)}}var pn=[],Dr=0,Th=0;function Go(){for(var n=Dr,s=Th=Dr=0;s<n;){var l=pn[s];pn[s++]=null;var c=pn[s];pn[s++]=null;var d=pn[s];pn[s++]=null;var _=pn[s];if(pn[s++]=null,c!==null&&d!==null){var x=c.pending;x===null?d.next=d:(d.next=x.next,x.next=d),c.pending=d}_!==0&&u_(l,d,_)}}function Po(n,s,l,c){pn[Dr++]=n,pn[Dr++]=s,pn[Dr++]=l,pn[Dr++]=c,Th|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function wh(n,s,l,c){return Po(n,s,l,c),Uo(n)}function Lr(n,s){return Po(n,null,null,s),Uo(n)}function u_(n,s,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var d=!1,_=n.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(d=!0)),n=_,_=_.return;return n.tag===3?(_=n.stateNode,d&&s!==null&&(d=31-Ae(l),n=_.hiddenUpdates,c=n[d],c===null?n[d]=[s]:c.push(s),s.lane=l|536870912),_):null}function Uo(n){if(50<El)throw El=0,Nf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Or={};function aE(n,s,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(n,s,l,c){return new aE(n,s,l,c)}function Rh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mi(n,s){var l=n.alternate;return l===null?(l=an(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function c_(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Yo(n,s,l,c,d,_){var x=0;if(c=n,typeof n=="function")Rh(n)&&(x=1);else if(typeof n=="string")x=oS(n,l,rt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case V:return n=an(31,l,s,d),n.elementType=V,n.lanes=_,n;case S:return Gs(l.children,d,_,s);case w:x=8,d|=24;break;case T:return n=an(12,l,s,d|2),n.elementType=T,n.lanes=_,n;case L:return n=an(13,l,s,d),n.elementType=L,n.lanes=_,n;case X:return n=an(19,l,s,d),n.elementType=X,n.lanes=_,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:case O:x=10;break t;case R:x=9;break t;case A:x=11;break t;case B:x=14;break t;case H:x=16,c=null;break t}x=29,l=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=an(x,l,s,d),s.elementType=n,s.type=c,s.lanes=_,s}function Gs(n,s,l,c){return n=an(7,n,c,s),n.lanes=l,n}function Ah(n,s,l){return n=an(6,n,null,s),n.lanes=l,n}function Mh(n,s,l){return s=an(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Nr=[],Ir=0,Xo=null,Bo=0,xn=[],vn=0,Ps=null,_i=1,yi="";function Us(n,s){Nr[Ir++]=Bo,Nr[Ir++]=Xo,Xo=n,Bo=s}function h_(n,s,l){xn[vn++]=_i,xn[vn++]=yi,xn[vn++]=Ps,Ps=n;var c=_i;n=yi;var d=32-Ae(c)-1;c&=~(1<<d),l+=1;var _=32-Ae(s)+d;if(30<_){var x=d-d%5;_=(c&(1<<x)-1).toString(32),c>>=x,d-=x,_i=1<<32-Ae(s)+d|l<<d|c,yi=_+n}else _i=1<<_|l<<d|c,yi=n}function Dh(n){n.return!==null&&(Us(n,1),h_(n,1,0))}function Lh(n){for(;n===Xo;)Xo=Nr[--Ir],Nr[Ir]=null,Bo=Nr[--Ir],Nr[Ir]=null;for(;n===Ps;)Ps=xn[--vn],xn[vn]=null,yi=xn[--vn],xn[vn]=null,_i=xn[--vn],xn[vn]=null}var Fe=null,ne=null,jt=!1,Ys=null,Wn=!1,Oh=Error(i(519));function Xs(n){var s=Error(i(418,""));throw Ja(yn(s,n)),Oh}function f_(n){var s=n.stateNode,l=n.type,c=n.memoizedProps;switch(s[Zt]=n,s[Tt]=c,l){case"dialog":Rt("cancel",s),Rt("close",s);break;case"iframe":case"object":case"embed":Rt("load",s);break;case"video":case"audio":for(l=0;l<Cl.length;l++)Rt(Cl[l],s);break;case"source":Rt("error",s);break;case"img":case"image":case"link":Rt("error",s),Rt("load",s);break;case"details":Rt("toggle",s);break;case"input":Rt("invalid",s),Rm(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Do(s);break;case"select":Rt("invalid",s);break;case"textarea":Rt("invalid",s),Mm(s,c.value,c.defaultValue,c.children),Do(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||M0(s.textContent,l)?(c.popover!=null&&(Rt("beforetoggle",s),Rt("toggle",s)),c.onScroll!=null&&Rt("scroll",s),c.onScrollEnd!=null&&Rt("scrollend",s),c.onClick!=null&&(s.onclick=bu),s=!0):s=!1,s||Xs(n)}function d_(n){for(Fe=n.return;Fe;)switch(Fe.tag){case 5:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Fe=Fe.return}}function Qa(n){if(n!==Fe)return!1;if(!jt)return d_(n),jt=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Kf(n.type,n.memoizedProps)),l=!l),l&&ne&&Xs(n),d_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(s===0){ne=Fn(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;n=n.nextSibling}ne=null}}else s===27?(s=ne,ms(n.type)?(n=Jf,Jf=null,ne=n):ne=s):ne=Fe?Fn(n.stateNode.nextSibling):null;return!0}function $a(){ne=Fe=null,jt=!1}function g_(){var n=Ys;return n!==null&&(qe===null?qe=n:qe.push.apply(qe,n),Ys=null),n}function Ja(n){Ys===null?Ys=[n]:Ys.push(n)}var Nh=U(null),Bs=null,pi=null;function ts(n,s,l){tt(Nh,s._currentValue),s._currentValue=l}function xi(n){n._currentValue=Nh.current,z(Nh)}function Ih(n,s,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===l)break;n=n.return}}function jh(n,s,l,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var _=d.dependencies;if(_!==null){var x=d.child;_=_.firstContext;t:for(;_!==null;){var C=_;_=d;for(var D=0;D<s.length;D++)if(C.context===s[D]){_.lanes|=l,C=_.alternate,C!==null&&(C.lanes|=l),Ih(_.return,l,n),c||(x=null);break t}_=C.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(i(341));x.lanes|=l,_=x.alternate,_!==null&&(_.lanes|=l),Ih(x,l,n),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===n){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function tl(n,s,l,c){n=null;for(var d=s,_=!1;d!==null;){if(!_){if((d.flags&524288)!==0)_=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var C=d.type;rn(d.pendingProps.value,x.value)||(n!==null?n.push(C):n=[C])}}else if(d===Ft.current){if(x=d.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Ml):n=[Ml])}d=d.return}n!==null&&jh(s,n,l,c),s.flags|=262144}function Ho(n){for(n=n.firstContext;n!==null;){if(!rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hs(n){Bs=n,pi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function De(n){return m_(Bs,n)}function Vo(n,s){return Bs===null&&Hs(n),m_(n,s)}function m_(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},pi===null){if(n===null)throw Error(i(308));pi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else pi=pi.next=s;return l}var lE=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},oE=r.unstable_scheduleCallback,uE=r.unstable_NormalPriority,ce={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new lE,data:new Map,refCount:0}}function el(n){n.refCount--,n.refCount===0&&oE(uE,function(){n.controller.abort()})}var nl=null,Fh=0,jr=0,kr=null;function cE(n,s){if(nl===null){var l=nl=[];Fh=0,jr=Pf(),kr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Fh++,s.then(__,__),s}function __(){if(--Fh===0&&nl!==null){kr!==null&&(kr.status="fulfilled");var n=nl;nl=null,jr=0,kr=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function hE(n,s){var l=[],c={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<l.length;d++)(0,l[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),c}var y_=I.S;I.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&cE(n,s),y_!==null&&y_(n,s)};var Vs=U(null);function zh(){var n=Vs.current;return n!==null?n:qt.pooledCache}function Zo(n,s){s===null?tt(Vs,Vs.current):tt(Vs,s.pool)}function p_(){var n=zh();return n===null?null:{parent:ce._currentValue,pool:n}}var il=Error(i(460)),x_=Error(i(474)),qo=Error(i(542)),Gh={then:function(){}};function v_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ko(){}function E_(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(Ko,Ko),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,C_(n),n;default:if(typeof s.status=="string")s.then(Ko,Ko);else{if(n=qt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,C_(n),n}throw sl=s,il}}var sl=null;function S_(){if(sl===null)throw Error(i(459));var n=sl;return sl=null,n}function C_(n){if(n===il||n===qo)throw Error(i(483))}var es=!1;function Ph(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ns(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function is(n,s,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Gt&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Uo(n),u_(n,null,l),s}return Po(n,c,s,l),Uo(n)}function rl(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,ke(n,l)}}function Yh(n,s){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var d=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?d=_=x:_=_.next=x,l=l.next}while(l!==null);_===null?d=_=s:_=_.next=s}else d=_=s;l={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Xh=!1;function al(){if(Xh){var n=kr;if(n!==null)throw n}}function ll(n,s,l,c){Xh=!1;var d=n.updateQueue;es=!1;var _=d.firstBaseUpdate,x=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var D=C,G=D.next;D.next=null,x===null?_=G:x.next=G,x=D;var q=n.alternate;q!==null&&(q=q.updateQueue,C=q.lastBaseUpdate,C!==x&&(C===null?q.firstBaseUpdate=G:C.next=G,q.lastBaseUpdate=D))}if(_!==null){var Q=d.baseState;x=0,q=G=D=null,C=_;do{var P=C.lane&-536870913,Y=P!==C.lane;if(Y?(Lt&P)===P:(c&P)===P){P!==0&&P===jr&&(Xh=!0),q!==null&&(q=q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var _t=n,gt=C;P=s;var Ht=l;switch(gt.tag){case 1:if(_t=gt.payload,typeof _t=="function"){Q=_t.call(Ht,Q,P);break t}Q=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=gt.payload,P=typeof _t=="function"?_t.call(Ht,Q,P):_t,P==null)break t;Q=m({},Q,P);break t;case 2:es=!0}}P=C.callback,P!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[P]:Y.push(P))}else Y={lane:P,tag:C.tag,payload:C.payload,callback:C.callback,next:null},q===null?(G=q=Y,D=Q):q=q.next=Y,x|=P;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);q===null&&(D=Q),d.baseState=D,d.firstBaseUpdate=G,d.lastBaseUpdate=q,_===null&&(d.shared.lanes=0),hs|=x,n.lanes=x,n.memoizedState=Q}}function b_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function T_(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)b_(l[n],s)}var Fr=U(null),Wo=U(0);function w_(n,s){n=wi,tt(Wo,n),tt(Fr,s),wi=n|s.baseLanes}function Bh(){tt(Wo,wi),tt(Fr,Fr.current)}function Hh(){wi=Wo.current,z(Fr),z(Wo)}var ss=0,St=null,Xt=null,oe=null,Qo=!1,zr=!1,Zs=!1,$o=0,ol=0,Gr=null,fE=0;function re(){throw Error(i(321))}function Vh(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!rn(n[l],s[l]))return!1;return!0}function Zh(n,s,l,c,d,_){return ss=_,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=n===null||n.memoizedState===null?uy:cy,Zs=!1,_=l(c,d),Zs=!1,zr&&(_=A_(s,l,c,d)),R_(n),_}function R_(n){I.H=su;var s=Xt!==null&&Xt.next!==null;if(ss=0,oe=Xt=St=null,Qo=!1,ol=0,Gr=null,s)throw Error(i(300));n===null||ye||(n=n.dependencies,n!==null&&Ho(n)&&(ye=!0))}function A_(n,s,l,c){St=n;var d=0;do{if(zr&&(Gr=null),ol=0,zr=!1,25<=d)throw Error(i(301));if(d+=1,oe=Xt=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}I.H=xE,_=s(l,c)}while(zr);return _}function dE(){var n=I.H,s=n.useState()[0];return s=typeof s.then=="function"?ul(s):s,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(St.flags|=1024),s}function qh(){var n=$o!==0;return $o=0,n}function Kh(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Wh(n){if(Qo){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Qo=!1}ss=0,oe=Xt=St=null,zr=!1,ol=$o=0,Gr=null}function Ve(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?St.memoizedState=oe=n:oe=oe.next=n,oe}function ue(){if(Xt===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var s=oe===null?St.memoizedState:oe.next;if(s!==null)oe=s,Xt=n;else{if(n===null)throw St.alternate===null?Error(i(467)):Error(i(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},oe===null?St.memoizedState=oe=n:oe=oe.next=n}return oe}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(n){var s=ol;return ol+=1,Gr===null&&(Gr=[]),n=E_(Gr,n,s),s=St,(oe===null?s.memoizedState:oe.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?uy:cy),n}function Jo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ul(n);if(n.$$typeof===O)return De(n)}throw Error(i(438,String(n)))}function $h(n){var s=null,l=St.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Qh(),St.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),c=0;c<n;c++)l[c]=et;return s.index++,l}function vi(n,s){return typeof s=="function"?s(n):s}function tu(n){var s=ue();return Jh(s,Xt,n)}function Jh(n,s,l){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var d=n.baseQueue,_=c.pending;if(_!==null){if(d!==null){var x=d.next;d.next=_.next,_.next=x}s.baseQueue=d=_,c.pending=null}if(_=n.baseState,d===null)n.memoizedState=_;else{s=d.next;var C=x=null,D=null,G=s,q=!1;do{var Q=G.lane&-536870913;if(Q!==G.lane?(Lt&Q)===Q:(ss&Q)===Q){var P=G.revertLane;if(P===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Q===jr&&(q=!0);else if((ss&P)===P){G=G.next,P===jr&&(q=!0);continue}else Q={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(C=D=Q,x=_):D=D.next=Q,St.lanes|=P,hs|=P;Q=G.action,Zs&&l(_,Q),_=G.hasEagerState?G.eagerState:l(_,Q)}else P={lane:Q,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(C=D=P,x=_):D=D.next=P,St.lanes|=Q,hs|=Q;G=G.next}while(G!==null&&G!==s);if(D===null?x=_:D.next=C,!rn(_,n.memoizedState)&&(ye=!0,q&&(l=kr,l!==null)))throw l;n.memoizedState=_,n.baseState=x,n.baseQueue=D,c.lastRenderedState=_}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function tf(n){var s=ue(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var c=l.dispatch,d=l.pending,_=s.memoizedState;if(d!==null){l.pending=null;var x=d=d.next;do _=n(_,x.action),x=x.next;while(x!==d);rn(_,s.memoizedState)||(ye=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,c]}function M_(n,s,l){var c=St,d=ue(),_=jt;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=s();var x=!rn((Xt||d).memoizedState,l);x&&(d.memoizedState=l,ye=!0),d=d.queue;var C=O_.bind(null,c,d,n);if(cl(2048,8,C,[n]),d.getSnapshot!==s||x||oe!==null&&oe.memoizedState.tag&1){if(c.flags|=2048,Pr(9,eu(),L_.bind(null,c,d,l,s),null),qt===null)throw Error(i(349));_||(ss&124)!==0||D_(c,s,l)}return l}function D_(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=St.updateQueue,s===null?(s=Qh(),St.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function L_(n,s,l,c){s.value=l,s.getSnapshot=c,N_(s)&&I_(n)}function O_(n,s,l){return l(function(){N_(s)&&I_(n)})}function N_(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!rn(n,l)}catch{return!0}}function I_(n){var s=Lr(n,2);s!==null&&hn(s,n,2)}function ef(n){var s=Ve();if(typeof n=="function"){var l=n;if(n=l(),Zs){qn(!0);try{l()}finally{qn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},s}function j_(n,s,l,c){return n.baseState=l,Jh(n,Xt,typeof c=="function"?c:vi)}function gE(n,s,l,c,d){if(iu(n))throw Error(i(485));if(n=s.action,n!==null){var _={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};I.T!==null?l(!0):_.isTransition=!1,c(_),l=s.pending,l===null?(_.next=s.pending=_,k_(s,_)):(_.next=l.next,s.pending=l.next=_)}}function k_(n,s){var l=s.action,c=s.payload,d=n.state;if(s.isTransition){var _=I.T,x={};I.T=x;try{var C=l(d,c),D=I.S;D!==null&&D(x,C),F_(n,s,C)}catch(G){nf(n,s,G)}finally{I.T=_}}else try{_=l(d,c),F_(n,s,_)}catch(G){nf(n,s,G)}}function F_(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){z_(n,s,c)},function(c){return nf(n,s,c)}):z_(n,s,l)}function z_(n,s,l){s.status="fulfilled",s.value=l,G_(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,k_(n,l)))}function nf(n,s,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,G_(s),s=s.next;while(s!==c)}n.action=null}function G_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function P_(n,s){return s}function U_(n,s){if(jt){var l=qt.formState;if(l!==null){t:{var c=St;if(jt){if(ne){e:{for(var d=ne,_=Wn;d.nodeType!==8;){if(!_){d=null;break e}if(d=Fn(d.nextSibling),d===null){d=null;break e}}_=d.data,d=_==="F!"||_==="F"?d:null}if(d){ne=Fn(d.nextSibling),c=d.data==="F!";break t}}Xs(c)}c=!1}c&&(s=l[0])}}return l=Ve(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P_,lastRenderedState:s},l.queue=c,l=ay.bind(null,St,c),c.dispatch=l,c=ef(!1),_=of.bind(null,St,!1,c.queue),c=Ve(),d={state:s,dispatch:null,action:n,pending:null},c.queue=d,l=gE.bind(null,St,d,_,l),d.dispatch=l,c.memoizedState=n,[s,l,!1]}function Y_(n){var s=ue();return X_(s,Xt,n)}function X_(n,s,l){if(s=Jh(n,s,P_)[0],n=tu(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ul(s)}catch(x){throw x===il?qo:x}else c=s;s=ue();var d=s.queue,_=d.dispatch;return l!==s.memoizedState&&(St.flags|=2048,Pr(9,eu(),mE.bind(null,d,l),null)),[c,_,n]}function mE(n,s){n.action=s}function B_(n){var s=ue(),l=Xt;if(l!==null)return X_(s,l,n);ue(),s=s.memoizedState,l=ue();var c=l.queue.dispatch;return l.memoizedState=n,[s,c,!1]}function Pr(n,s,l,c){return n={tag:n,create:l,deps:c,inst:s,next:null},s=St.updateQueue,s===null&&(s=Qh(),St.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,s.lastEffect=n),n}function eu(){return{destroy:void 0,resource:void 0}}function H_(){return ue().memoizedState}function nu(n,s,l,c){var d=Ve();c=c===void 0?null:c,St.flags|=n,d.memoizedState=Pr(1|s,eu(),l,c)}function cl(n,s,l,c){var d=ue();c=c===void 0?null:c;var _=d.memoizedState.inst;Xt!==null&&c!==null&&Vh(c,Xt.memoizedState.deps)?d.memoizedState=Pr(s,_,l,c):(St.flags|=n,d.memoizedState=Pr(1|s,_,l,c))}function V_(n,s){nu(8390656,8,n,s)}function Z_(n,s){cl(2048,8,n,s)}function q_(n,s){return cl(4,2,n,s)}function K_(n,s){return cl(4,4,n,s)}function W_(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Q_(n,s,l){l=l!=null?l.concat([n]):null,cl(4,4,W_.bind(null,s,n),l)}function sf(){}function $_(n,s){var l=ue();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Vh(s,c[1])?c[0]:(l.memoizedState=[n,s],n)}function J_(n,s){var l=ue();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Vh(s,c[1]))return c[0];if(c=n(),Zs){qn(!0);try{n()}finally{qn(!1)}}return l.memoizedState=[c,s],c}function rf(n,s,l){return l===void 0||(ss&1073741824)!==0?n.memoizedState=s:(n.memoizedState=l,n=n0(),St.lanes|=n,hs|=n,l)}function ty(n,s,l,c){return rn(l,s)?l:Fr.current!==null?(n=rf(n,l,c),rn(n,s)||(ye=!0),n):(ss&42)===0?(ye=!0,n.memoizedState=l):(n=n0(),St.lanes|=n,hs|=n,s)}function ey(n,s,l,c,d){var _=Z.p;Z.p=_!==0&&8>_?_:8;var x=I.T,C={};I.T=C,of(n,!1,s,l);try{var D=d(),G=I.S;if(G!==null&&G(C,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=hE(D,c);hl(n,s,q,cn(n))}else hl(n,s,c,cn(n))}catch(Q){hl(n,s,{then:function(){},status:"rejected",reason:Q},cn())}finally{Z.p=_,I.T=x}}function _E(){}function af(n,s,l,c){if(n.tag!==5)throw Error(i(476));var d=ny(n).queue;ey(n,d,s,$,l===null?_E:function(){return iy(n),l(c)})}function ny(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:$},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function iy(n){var s=ny(n).next.queue;hl(n,s,{},cn())}function lf(){return De(Ml)}function sy(){return ue().memoizedState}function ry(){return ue().memoizedState}function yE(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=cn();n=ns(l);var c=is(s,n,l);c!==null&&(hn(c,s,l),rl(c,s,l)),s={cache:kh()},n.payload=s;return}s=s.return}}function pE(n,s,l){var c=cn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},iu(n)?ly(s,l):(l=wh(n,s,l,c),l!==null&&(hn(l,n,c),oy(l,s,c)))}function ay(n,s,l){var c=cn();hl(n,s,l,c)}function hl(n,s,l,c){var d={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(iu(n))ly(s,d);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var x=s.lastRenderedState,C=_(x,l);if(d.hasEagerState=!0,d.eagerState=C,rn(C,x))return Po(n,s,d,0),qt===null&&Go(),!1}catch{}finally{}if(l=wh(n,s,d,c),l!==null)return hn(l,n,c),oy(l,s,c),!0}return!1}function of(n,s,l,c){if(c={lane:2,revertLane:Pf(),action:c,hasEagerState:!1,eagerState:null,next:null},iu(n)){if(s)throw Error(i(479))}else s=wh(n,l,c,2),s!==null&&hn(s,n,2)}function iu(n){var s=n.alternate;return n===St||s!==null&&s===St}function ly(n,s){zr=Qo=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function oy(n,s,l){if((l&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,ke(n,l)}}var su={readContext:De,use:Jo,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useLayoutEffect:re,useInsertionEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useSyncExternalStore:re,useId:re,useHostTransitionStatus:re,useFormState:re,useActionState:re,useOptimistic:re,useMemoCache:re,useCacheRefresh:re},uy={readContext:De,use:Jo,useCallback:function(n,s){return Ve().memoizedState=[n,s===void 0?null:s],n},useContext:De,useEffect:V_,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,nu(4194308,4,W_.bind(null,s,n),l)},useLayoutEffect:function(n,s){return nu(4194308,4,n,s)},useInsertionEffect:function(n,s){nu(4,2,n,s)},useMemo:function(n,s){var l=Ve();s=s===void 0?null:s;var c=n();if(Zs){qn(!0);try{n()}finally{qn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(n,s,l){var c=Ve();if(l!==void 0){var d=l(s);if(Zs){qn(!0);try{l(s)}finally{qn(!1)}}}else d=s;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=pE.bind(null,St,n),[c.memoizedState,n]},useRef:function(n){var s=Ve();return n={current:n},s.memoizedState=n},useState:function(n){n=ef(n);var s=n.queue,l=ay.bind(null,St,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:sf,useDeferredValue:function(n,s){var l=Ve();return rf(l,n,s)},useTransition:function(){var n=ef(!1);return n=ey.bind(null,St,n.queue,!0,!1),Ve().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var c=St,d=Ve();if(jt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),qt===null)throw Error(i(349));(Lt&124)!==0||D_(c,s,l)}d.memoizedState=l;var _={value:l,getSnapshot:s};return d.queue=_,V_(O_.bind(null,c,_,n),[n]),c.flags|=2048,Pr(9,eu(),L_.bind(null,c,_,l,s),null),l},useId:function(){var n=Ve(),s=qt.identifierPrefix;if(jt){var l=yi,c=_i;l=(c&~(1<<32-Ae(c)-1)).toString(32)+l,s="«"+s+"R"+l,l=$o++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=fE++,s="«"+s+"r"+l.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:lf,useFormState:U_,useActionState:U_,useOptimistic:function(n){var s=Ve();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=of.bind(null,St,!0,l),l.dispatch=s,[n,s]},useMemoCache:$h,useCacheRefresh:function(){return Ve().memoizedState=yE.bind(null,St)}},cy={readContext:De,use:Jo,useCallback:$_,useContext:De,useEffect:Z_,useImperativeHandle:Q_,useInsertionEffect:q_,useLayoutEffect:K_,useMemo:J_,useReducer:tu,useRef:H_,useState:function(){return tu(vi)},useDebugValue:sf,useDeferredValue:function(n,s){var l=ue();return ty(l,Xt.memoizedState,n,s)},useTransition:function(){var n=tu(vi)[0],s=ue().memoizedState;return[typeof n=="boolean"?n:ul(n),s]},useSyncExternalStore:M_,useId:sy,useHostTransitionStatus:lf,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,s){var l=ue();return j_(l,Xt,n,s)},useMemoCache:$h,useCacheRefresh:ry},xE={readContext:De,use:Jo,useCallback:$_,useContext:De,useEffect:Z_,useImperativeHandle:Q_,useInsertionEffect:q_,useLayoutEffect:K_,useMemo:J_,useReducer:tf,useRef:H_,useState:function(){return tf(vi)},useDebugValue:sf,useDeferredValue:function(n,s){var l=ue();return Xt===null?rf(l,n,s):ty(l,Xt.memoizedState,n,s)},useTransition:function(){var n=tf(vi)[0],s=ue().memoizedState;return[typeof n=="boolean"?n:ul(n),s]},useSyncExternalStore:M_,useId:sy,useHostTransitionStatus:lf,useFormState:B_,useActionState:B_,useOptimistic:function(n,s){var l=ue();return Xt!==null?j_(l,Xt,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:$h,useCacheRefresh:ry},Ur=null,fl=0;function ru(n){var s=fl;return fl+=1,Ur===null&&(Ur=[]),E_(Ur,n,s)}function dl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function au(n,s){throw s.$$typeof===y?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function hy(n){var s=n._init;return s(n._payload)}function fy(n){function s(k,N){if(n){var F=k.deletions;F===null?(k.deletions=[N],k.flags|=16):F.push(N)}}function l(k,N){if(!n)return null;for(;N!==null;)s(k,N),N=N.sibling;return null}function c(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function d(k,N){return k=mi(k,N),k.index=0,k.sibling=null,k}function _(k,N,F){return k.index=F,n?(F=k.alternate,F!==null?(F=F.index,F<N?(k.flags|=67108866,N):F):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function x(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function C(k,N,F,W){return N===null||N.tag!==6?(N=Ah(F,k.mode,W),N.return=k,N):(N=d(N,F),N.return=k,N)}function D(k,N,F,W){var ot=F.type;return ot===S?q(k,N,F.props.children,W,F.key):N!==null&&(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===H&&hy(ot)===N.type)?(N=d(N,F.props),dl(N,F),N.return=k,N):(N=Yo(F.type,F.key,F.props,null,k.mode,W),dl(N,F),N.return=k,N)}function G(k,N,F,W){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Mh(F,k.mode,W),N.return=k,N):(N=d(N,F.children||[]),N.return=k,N)}function q(k,N,F,W,ot){return N===null||N.tag!==7?(N=Gs(F,k.mode,W,ot),N.return=k,N):(N=d(N,F),N.return=k,N)}function Q(k,N,F){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ah(""+N,k.mode,F),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case p:return F=Yo(N.type,N.key,N.props,null,k.mode,F),dl(F,N),F.return=k,F;case v:return N=Mh(N,k.mode,F),N.return=k,N;case H:var W=N._init;return N=W(N._payload),Q(k,N,F)}if(nt(N)||it(N))return N=Gs(N,k.mode,F,null),N.return=k,N;if(typeof N.then=="function")return Q(k,ru(N),F);if(N.$$typeof===O)return Q(k,Vo(k,N),F);au(k,N)}return null}function P(k,N,F,W){var ot=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ot!==null?null:C(k,N,""+F,W);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case p:return F.key===ot?D(k,N,F,W):null;case v:return F.key===ot?G(k,N,F,W):null;case H:return ot=F._init,F=ot(F._payload),P(k,N,F,W)}if(nt(F)||it(F))return ot!==null?null:q(k,N,F,W,null);if(typeof F.then=="function")return P(k,N,ru(F),W);if(F.$$typeof===O)return P(k,N,Vo(k,F),W);au(k,F)}return null}function Y(k,N,F,W,ot){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return k=k.get(F)||null,C(N,k,""+W,ot);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case p:return k=k.get(W.key===null?F:W.key)||null,D(N,k,W,ot);case v:return k=k.get(W.key===null?F:W.key)||null,G(N,k,W,ot);case H:var bt=W._init;return W=bt(W._payload),Y(k,N,F,W,ot)}if(nt(W)||it(W))return k=k.get(F)||null,q(N,k,W,ot,null);if(typeof W.then=="function")return Y(k,N,F,ru(W),ot);if(W.$$typeof===O)return Y(k,N,F,Vo(N,W),ot);au(N,W)}return null}function _t(k,N,F,W){for(var ot=null,bt=null,ct=N,mt=N=0,xe=null;ct!==null&&mt<F.length;mt++){ct.index>mt?(xe=ct,ct=null):xe=ct.sibling;var Nt=P(k,ct,F[mt],W);if(Nt===null){ct===null&&(ct=xe);break}n&&ct&&Nt.alternate===null&&s(k,ct),N=_(Nt,N,mt),bt===null?ot=Nt:bt.sibling=Nt,bt=Nt,ct=xe}if(mt===F.length)return l(k,ct),jt&&Us(k,mt),ot;if(ct===null){for(;mt<F.length;mt++)ct=Q(k,F[mt],W),ct!==null&&(N=_(ct,N,mt),bt===null?ot=ct:bt.sibling=ct,bt=ct);return jt&&Us(k,mt),ot}for(ct=c(ct);mt<F.length;mt++)xe=Y(ct,k,mt,F[mt],W),xe!==null&&(n&&xe.alternate!==null&&ct.delete(xe.key===null?mt:xe.key),N=_(xe,N,mt),bt===null?ot=xe:bt.sibling=xe,bt=xe);return n&&ct.forEach(function(vs){return s(k,vs)}),jt&&Us(k,mt),ot}function gt(k,N,F,W){if(F==null)throw Error(i(151));for(var ot=null,bt=null,ct=N,mt=N=0,xe=null,Nt=F.next();ct!==null&&!Nt.done;mt++,Nt=F.next()){ct.index>mt?(xe=ct,ct=null):xe=ct.sibling;var vs=P(k,ct,Nt.value,W);if(vs===null){ct===null&&(ct=xe);break}n&&ct&&vs.alternate===null&&s(k,ct),N=_(vs,N,mt),bt===null?ot=vs:bt.sibling=vs,bt=vs,ct=xe}if(Nt.done)return l(k,ct),jt&&Us(k,mt),ot;if(ct===null){for(;!Nt.done;mt++,Nt=F.next())Nt=Q(k,Nt.value,W),Nt!==null&&(N=_(Nt,N,mt),bt===null?ot=Nt:bt.sibling=Nt,bt=Nt);return jt&&Us(k,mt),ot}for(ct=c(ct);!Nt.done;mt++,Nt=F.next())Nt=Y(ct,k,mt,Nt.value,W),Nt!==null&&(n&&Nt.alternate!==null&&ct.delete(Nt.key===null?mt:Nt.key),N=_(Nt,N,mt),bt===null?ot=Nt:bt.sibling=Nt,bt=Nt);return n&&ct.forEach(function(vS){return s(k,vS)}),jt&&Us(k,mt),ot}function Ht(k,N,F,W){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case p:t:{for(var ot=F.key;N!==null;){if(N.key===ot){if(ot=F.type,ot===S){if(N.tag===7){l(k,N.sibling),W=d(N,F.props.children),W.return=k,k=W;break t}}else if(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===H&&hy(ot)===N.type){l(k,N.sibling),W=d(N,F.props),dl(W,F),W.return=k,k=W;break t}l(k,N);break}else s(k,N);N=N.sibling}F.type===S?(W=Gs(F.props.children,k.mode,W,F.key),W.return=k,k=W):(W=Yo(F.type,F.key,F.props,null,k.mode,W),dl(W,F),W.return=k,k=W)}return x(k);case v:t:{for(ot=F.key;N!==null;){if(N.key===ot)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){l(k,N.sibling),W=d(N,F.children||[]),W.return=k,k=W;break t}else{l(k,N);break}else s(k,N);N=N.sibling}W=Mh(F,k.mode,W),W.return=k,k=W}return x(k);case H:return ot=F._init,F=ot(F._payload),Ht(k,N,F,W)}if(nt(F))return _t(k,N,F,W);if(it(F)){if(ot=it(F),typeof ot!="function")throw Error(i(150));return F=ot.call(F),gt(k,N,F,W)}if(typeof F.then=="function")return Ht(k,N,ru(F),W);if(F.$$typeof===O)return Ht(k,N,Vo(k,F),W);au(k,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,N!==null&&N.tag===6?(l(k,N.sibling),W=d(N,F),W.return=k,k=W):(l(k,N),W=Ah(F,k.mode,W),W.return=k,k=W),x(k)):l(k,N)}return function(k,N,F,W){try{fl=0;var ot=Ht(k,N,F,W);return Ur=null,ot}catch(ct){if(ct===il||ct===qo)throw ct;var bt=an(29,ct,null,k.mode);return bt.lanes=W,bt.return=k,bt}finally{}}}var Yr=fy(!0),dy=fy(!1),En=U(null),Qn=null;function rs(n){var s=n.alternate;tt(he,he.current&1),tt(En,n),Qn===null&&(s===null||Fr.current!==null||s.memoizedState!==null)&&(Qn=n)}function gy(n){if(n.tag===22){if(tt(he,he.current),tt(En,n),Qn===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Qn=n)}}else as()}function as(){tt(he,he.current),tt(En,En.current)}function Ei(n){z(En),Qn===n&&(Qn=null),z(he)}var he=U(0);function lu(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||$f(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function uf(n,s,l,c){s=n.memoizedState,l=l(c,s),l=l==null?s:m({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var cf={enqueueSetState:function(n,s,l){n=n._reactInternals;var c=cn(),d=ns(c);d.payload=s,l!=null&&(d.callback=l),s=is(n,d,c),s!==null&&(hn(s,n,c),rl(s,n,c))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var c=cn(),d=ns(c);d.tag=1,d.payload=s,l!=null&&(d.callback=l),s=is(n,d,c),s!==null&&(hn(s,n,c),rl(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=cn(),c=ns(l);c.tag=2,s!=null&&(c.callback=s),s=is(n,c,l),s!==null&&(hn(s,n,l),rl(s,n,l))}};function my(n,s,l,c,d,_,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,_,x):s.prototype&&s.prototype.isPureReactComponent?!Ka(l,c)||!Ka(d,_):!0}function _y(n,s,l,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==n&&cf.enqueueReplaceState(s,s.state,null)}function qs(n,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(n=n.defaultProps){l===s&&(l=m({},l));for(var d in n)l[d]===void 0&&(l[d]=n[d])}return l}var ou=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function yy(n){ou(n)}function py(n){console.error(n)}function xy(n){ou(n)}function uu(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function vy(n,s,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function hf(n,s,l){return l=ns(l),l.tag=3,l.payload={element:null},l.callback=function(){uu(n,s)},l}function Ey(n){return n=ns(n),n.tag=3,n}function Sy(n,s,l,c){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var _=c.value;n.payload=function(){return d(_)},n.callback=function(){vy(s,l,c)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){vy(s,l,c),typeof d!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function vE(n,s,l,c,d){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&tl(s,l,d,!0),l=En.current,l!==null){switch(l.tag){case 13:return Qn===null?jf():l.alternate===null&&ie===0&&(ie=3),l.flags&=-257,l.flags|=65536,l.lanes=d,c===Gh?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Ff(n,c,d)),!1;case 22:return l.flags|=65536,c===Gh?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Ff(n,c,d)),!1}throw Error(i(435,l.tag))}return Ff(n,c,d),jf(),!1}if(jt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==Oh&&(n=Error(i(422),{cause:c}),Ja(yn(n,l)))):(c!==Oh&&(s=Error(i(423),{cause:c}),Ja(yn(s,l))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=yn(c,l),d=hf(n.stateNode,c,d),Yh(n,d),ie!==4&&(ie=2)),!1;var _=Error(i(520),{cause:c});if(_=yn(_,l),vl===null?vl=[_]:vl.push(_),ie!==4&&(ie=2),s===null)return!0;c=yn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=d&-d,l.lanes|=n,n=hf(l.stateNode,c,n),Yh(l,n),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fs===null||!fs.has(_))))return l.flags|=65536,d&=-d,l.lanes|=d,d=Ey(d),Sy(d,n,l,c),Yh(l,d),!1}l=l.return}while(l!==null);return!1}var Cy=Error(i(461)),ye=!1;function be(n,s,l,c){s.child=n===null?dy(s,null,l,c):Yr(s,n.child,l,c)}function by(n,s,l,c,d){l=l.render;var _=s.ref;if("ref"in c){var x={};for(var C in c)C!=="ref"&&(x[C]=c[C])}else x=c;return Hs(s),c=Zh(n,s,l,x,_,d),C=qh(),n!==null&&!ye?(Kh(n,s,d),Si(n,s,d)):(jt&&C&&Dh(s),s.flags|=1,be(n,s,c,d),s.child)}function Ty(n,s,l,c,d){if(n===null){var _=l.type;return typeof _=="function"&&!Rh(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,wy(n,s,_,c,d)):(n=Yo(l.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,!xf(n,d)){var x=_.memoizedProps;if(l=l.compare,l=l!==null?l:Ka,l(x,c)&&n.ref===s.ref)return Si(n,s,d)}return s.flags|=1,n=mi(_,c),n.ref=s.ref,n.return=s,s.child=n}function wy(n,s,l,c,d){if(n!==null){var _=n.memoizedProps;if(Ka(_,c)&&n.ref===s.ref)if(ye=!1,s.pendingProps=c=_,xf(n,d))(n.flags&131072)!==0&&(ye=!0);else return s.lanes=n.lanes,Si(n,s,d)}return ff(n,s,l,c,d)}function Ry(n,s,l){var c=s.pendingProps,d=c.children,_=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=_!==null?_.baseLanes|l:l,n!==null){for(d=s.child=n.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;s.childLanes=_&~c}else s.childLanes=0,s.child=null;return Ay(n,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Zo(s,_!==null?_.cachePool:null),_!==null?w_(s,_):Bh(),gy(s);else return s.lanes=s.childLanes=536870912,Ay(n,s,_!==null?_.baseLanes|l:l,l)}else _!==null?(Zo(s,_.cachePool),w_(s,_),as(),s.memoizedState=null):(n!==null&&Zo(s,null),Bh(),as());return be(n,s,d,l),s.child}function Ay(n,s,l,c){var d=zh();return d=d===null?null:{parent:ce._currentValue,pool:d},s.memoizedState={baseLanes:l,cachePool:d},n!==null&&Zo(s,null),Bh(),gy(s),n!==null&&tl(n,s,c,!0),null}function cu(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function ff(n,s,l,c,d){return Hs(s),l=Zh(n,s,l,c,void 0,d),c=qh(),n!==null&&!ye?(Kh(n,s,d),Si(n,s,d)):(jt&&c&&Dh(s),s.flags|=1,be(n,s,l,d),s.child)}function My(n,s,l,c,d,_){return Hs(s),s.updateQueue=null,l=A_(s,c,l,d),R_(n),c=qh(),n!==null&&!ye?(Kh(n,s,_),Si(n,s,_)):(jt&&c&&Dh(s),s.flags|=1,be(n,s,l,_),s.child)}function Dy(n,s,l,c,d){if(Hs(s),s.stateNode===null){var _=Or,x=l.contextType;typeof x=="object"&&x!==null&&(_=De(x)),_=new l(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=cf,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},Ph(s),x=l.contextType,_.context=typeof x=="object"&&x!==null?De(x):Or,_.state=s.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(uf(s,l,x,c),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&cf.enqueueReplaceState(_,_.state,null),ll(s,c,_,d),al(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){_=s.stateNode;var C=s.memoizedProps,D=qs(l,C);_.props=D;var G=_.context,q=l.contextType;x=Or,typeof q=="object"&&q!==null&&(x=De(q));var Q=l.getDerivedStateFromProps;q=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||G!==x)&&_y(s,_,c,x),es=!1;var P=s.memoizedState;_.state=P,ll(s,c,_,d),al(),G=s.memoizedState,C||P!==G||es?(typeof Q=="function"&&(uf(s,l,Q,c),G=s.memoizedState),(D=es||my(s,l,D,c,P,G,x))?(q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),_.props=c,_.state=G,_.context=x,c=D):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,Uh(n,s),x=s.memoizedProps,q=qs(l,x),_.props=q,Q=s.pendingProps,P=_.context,G=l.contextType,D=Or,typeof G=="object"&&G!==null&&(D=De(G)),C=l.getDerivedStateFromProps,(G=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==Q||P!==D)&&_y(s,_,c,D),es=!1,P=s.memoizedState,_.state=P,ll(s,c,_,d),al();var Y=s.memoizedState;x!==Q||P!==Y||es||n!==null&&n.dependencies!==null&&Ho(n.dependencies)?(typeof C=="function"&&(uf(s,l,C,c),Y=s.memoizedState),(q=es||my(s,l,q,c,P,Y,D)||n!==null&&n.dependencies!==null&&Ho(n.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Y,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Y,D)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===n.memoizedProps&&P===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&P===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Y),_.props=c,_.state=Y,_.context=D,c=q):(typeof _.componentDidUpdate!="function"||x===n.memoizedProps&&P===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&P===n.memoizedState||(s.flags|=1024),c=!1)}return _=c,cu(n,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,n!==null&&c?(s.child=Yr(s,n.child,null,d),s.child=Yr(s,null,l,d)):be(n,s,l,d),s.memoizedState=_.state,n=s.child):n=Si(n,s,d),n}function Ly(n,s,l,c){return $a(),s.flags|=256,be(n,s,l,c),s.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(n){return{baseLanes:n,cachePool:p_()}}function mf(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=Sn),n}function Oy(n,s,l){var c=s.pendingProps,d=!1,_=(s.flags&128)!==0,x;if((x=_)||(x=n!==null&&n.memoizedState===null?!1:(he.current&2)!==0),x&&(d=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,n===null){if(jt){if(d?rs(s):as(),jt){var C=ne,D;if(D=C){t:{for(D=C,C=Wn;D.nodeType!==8;){if(!C){C=null;break t}if(D=Fn(D.nextSibling),D===null){C=null;break t}}C=D}C!==null?(s.memoizedState={dehydrated:C,treeContext:Ps!==null?{id:_i,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},D=an(18,null,null,0),D.stateNode=C,D.return=s,s.child=D,Fe=s,ne=null,D=!0):D=!1}D||Xs(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return $f(C)?s.lanes=32:s.lanes=536870912,null;Ei(s)}return C=c.children,c=c.fallback,d?(as(),d=s.mode,C=hu({mode:"hidden",children:C},d),c=Gs(c,d,l,null),C.return=s,c.return=s,C.sibling=c,s.child=C,d=s.child,d.memoizedState=gf(l),d.childLanes=mf(n,x,l),s.memoizedState=df,c):(rs(s),_f(s,C))}if(D=n.memoizedState,D!==null&&(C=D.dehydrated,C!==null)){if(_)s.flags&256?(rs(s),s.flags&=-257,s=yf(n,s,l)):s.memoizedState!==null?(as(),s.child=n.child,s.flags|=128,s=null):(as(),d=c.fallback,C=s.mode,c=hu({mode:"visible",children:c.children},C),d=Gs(d,C,l,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Yr(s,n.child,null,l),c=s.child,c.memoizedState=gf(l),c.childLanes=mf(n,x,l),s.memoizedState=df,s=d);else if(rs(s),$f(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var G=x.dgst;x=G,c=Error(i(419)),c.stack="",c.digest=x,Ja({value:c,source:null,stack:null}),s=yf(n,s,l)}else if(ye||tl(n,s,l,!1),x=(l&n.childLanes)!==0,ye||x){if(x=qt,x!==null&&(c=l&-l,c=(c&42)!==0?1:In(c),c=(c&(x.suspendedLanes|l))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Lr(n,c),hn(x,n,c),Cy;C.data==="$?"||jf(),s=yf(n,s,l)}else C.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,ne=Fn(C.nextSibling),Fe=s,jt=!0,Ys=null,Wn=!1,n!==null&&(xn[vn++]=_i,xn[vn++]=yi,xn[vn++]=Ps,_i=n.id,yi=n.overflow,Ps=s),s=_f(s,c.children),s.flags|=4096);return s}return d?(as(),d=c.fallback,C=s.mode,D=n.child,G=D.sibling,c=mi(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,G!==null?d=mi(G,d):(d=Gs(d,C,l,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,C=n.child.memoizedState,C===null?C=gf(l):(D=C.cachePool,D!==null?(G=ce._currentValue,D=D.parent!==G?{parent:G,pool:G}:D):D=p_(),C={baseLanes:C.baseLanes|l,cachePool:D}),d.memoizedState=C,d.childLanes=mf(n,x,l),s.memoizedState=df,c):(rs(s),l=n.child,n=l.sibling,l=mi(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,n!==null&&(x=s.deletions,x===null?(s.deletions=[n],s.flags|=16):x.push(n)),s.child=l,s.memoizedState=null,l)}function _f(n,s){return s=hu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function hu(n,s){return n=an(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function yf(n,s,l){return Yr(s,n.child,null,l),n=_f(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ny(n,s,l){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ih(n.return,s,l)}function pf(n,s,l,c,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=d)}function Iy(n,s,l){var c=s.pendingProps,d=c.revealOrder,_=c.tail;if(be(n,s,c.children,l),c=he.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ny(n,l,s);else if(n.tag===19)Ny(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(tt(he,c),d){case"forwards":for(l=s.child,d=null;l!==null;)n=l.alternate,n!==null&&lu(n)===null&&(d=l),l=l.sibling;l=d,l===null?(d=s.child,s.child=null):(d=l.sibling,l.sibling=null),pf(s,!1,d,l,_);break;case"backwards":for(l=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&lu(n)===null){s.child=d;break}n=d.sibling,d.sibling=l,l=d,d=n}pf(s,!0,l,null,_);break;case"together":pf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Si(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),hs|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(tl(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=mi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=mi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function xf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ho(n)))}function EE(n,s,l){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),ts(s,ce,n.memoizedState.cache),$a();break;case 27:case 5:Se(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:ts(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(rs(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Oy(n,s,l):(rs(s),n=Si(n,s,l),n!==null?n.sibling:null);rs(s);break;case 19:var d=(n.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(tl(n,s,l,!1),c=(l&s.childLanes)!==0),d){if(c)return Iy(n,s,l);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(he,he.current),c)break;return null;case 22:case 23:return s.lanes=0,Ry(n,s,l);case 24:ts(s,ce,n.memoizedState.cache)}return Si(n,s,l)}function jy(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)ye=!0;else{if(!xf(n,l)&&(s.flags&128)===0)return ye=!1,EE(n,s,l);ye=(n.flags&131072)!==0}else ye=!1,jt&&(s.flags&1048576)!==0&&h_(s,Bo,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Rh(c)?(n=qs(c,n),s.tag=1,s=Dy(null,s,c,n,l)):(s.tag=0,s=ff(null,s,c,n,l));else{if(c!=null){if(d=c.$$typeof,d===A){s.tag=11,s=by(null,s,c,n,l);break t}else if(d===B){s.tag=14,s=Ty(null,s,c,n,l);break t}}throw s=J(c)||c,Error(i(306,s,""))}}return s;case 0:return ff(n,s,s.type,s.pendingProps,l);case 1:return c=s.type,d=qs(c,s.pendingProps),Dy(n,s,c,d,l);case 3:t:{if(At(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var _=s.memoizedState;d=_.element,Uh(n,s),ll(s,c,null,l);var x=s.memoizedState;if(c=x.cache,ts(s,ce,c),c!==_.cache&&jh(s,[ce],l,!0),al(),c=x.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Ly(n,s,c,l);break t}else if(c!==d){d=yn(Error(i(424)),s),Ja(d),s=Ly(n,s,c,l);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ne=Fn(n.firstChild),Fe=s,jt=!0,Ys=null,Wn=!0,l=dy(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($a(),c===d){s=Si(n,s,l);break t}be(n,s,c,l)}s=s.child}return s;case 26:return cu(n,s),n===null?(l=G0(s.type,null,s.pendingProps,null))?s.memoizedState=l:jt||(l=s.type,n=s.pendingProps,c=Tu(ut.current).createElement(l),c[Zt]=s,c[Tt]=n,we(c,l,n),_e(c),s.stateNode=c):s.memoizedState=G0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Se(s),n===null&&jt&&(c=s.stateNode=k0(s.type,s.pendingProps,ut.current),Fe=s,Wn=!0,d=ne,ms(s.type)?(Jf=d,ne=Fn(c.firstChild)):ne=d),be(n,s,s.pendingProps.children,l),cu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&jt&&((d=c=ne)&&(c=KE(c,s.type,s.pendingProps,Wn),c!==null?(s.stateNode=c,Fe=s,ne=Fn(c.firstChild),Wn=!1,d=!0):d=!1),d||Xs(s)),Se(s),d=s.type,_=s.pendingProps,x=n!==null?n.memoizedProps:null,c=_.children,Kf(d,_)?c=null:x!==null&&Kf(d,x)&&(s.flags|=32),s.memoizedState!==null&&(d=Zh(n,s,dE,null,null,l),Ml._currentValue=d),cu(n,s),be(n,s,c,l),s.child;case 6:return n===null&&jt&&((n=l=ne)&&(l=WE(l,s.pendingProps,Wn),l!==null?(s.stateNode=l,Fe=s,ne=null,n=!0):n=!1),n||Xs(s)),null;case 13:return Oy(n,s,l);case 4:return At(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Yr(s,null,c,l):be(n,s,c,l),s.child;case 11:return by(n,s,s.type,s.pendingProps,l);case 7:return be(n,s,s.pendingProps,l),s.child;case 8:return be(n,s,s.pendingProps.children,l),s.child;case 12:return be(n,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,ts(s,s.type,c.value),be(n,s,c.children,l),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,Hs(s),d=De(d),c=c(d),s.flags|=1,be(n,s,c,l),s.child;case 14:return Ty(n,s,s.type,s.pendingProps,l);case 15:return wy(n,s,s.type,s.pendingProps,l);case 19:return Iy(n,s,l);case 31:return c=s.pendingProps,l=s.mode,c={mode:c.mode,children:c.children},n===null?(l=hu(c,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=mi(n.child,c),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return Ry(n,s,l);case 24:return Hs(s),c=De(ce),n===null?(d=zh(),d===null&&(d=qt,_=kh(),d.pooledCache=_,_.refCount++,_!==null&&(d.pooledCacheLanes|=l),d=_),s.memoizedState={parent:c,cache:d},Ph(s),ts(s,ce,d)):((n.lanes&l)!==0&&(Uh(n,s),ll(s,null,null,l),al()),d=n.memoizedState,_=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ts(s,ce,c)):(c=_.cache,ts(s,ce,c),c!==d.cache&&jh(s,[ce],l,!0))),be(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ci(n){n.flags|=4}function ky(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!B0(s)){if(s=En.current,s!==null&&((Lt&4194048)===Lt?Qn!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||s!==Qn))throw sl=Gh,x_;n.flags|=8192}}function fu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?$i():536870912,n.lanes|=s,Vr|=s)}function gl(n,s){if(!jt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(s)for(var d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=l,s}function SE(n,s,l){var c=s.pendingProps;switch(Lh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return $t(s),null;case 3:return l=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),xi(ce),le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Qa(s)?Ci(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,g_())),$t(s),null;case 26:return l=s.memoizedState,n===null?(Ci(s),l!==null?($t(s),ky(s,l)):($t(s),s.flags&=-16777217)):l?l!==n.memoizedState?(Ci(s),$t(s),ky(s,l)):($t(s),s.flags&=-16777217):(n.memoizedProps!==c&&Ci(s),$t(s),s.flags&=-16777217),null;case 27:ci(s),l=ut.current;var d=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}n=rt.current,Qa(s)?f_(s):(n=k0(d,c,l),s.stateNode=n,Ci(s))}return $t(s),null;case 5:if(ci(s),l=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}if(n=rt.current,Qa(s))f_(s);else{switch(d=Tu(ut.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(l,{is:c.is}):d.createElement(l)}}n[Zt]=s,n[Tt]=c;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=n;t:switch(we(n,l,c),l){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Ci(s)}}return $t(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&Ci(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=ut.current,Qa(s)){if(n=s.stateNode,l=s.memoizedProps,c=null,d=Fe,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[Zt]=s,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||M0(n.nodeValue,l)),n||Xs(s)}else n=Tu(n).createTextNode(c),n[Zt]=s,s.stateNode=n}return $t(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Qa(s),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Zt]=s}else $a(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),d=!1}else d=g_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ei(s),s):(Ei(s),null)}if(Ei(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,n=n!==null&&n.memoizedState!==null,l){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==d&&(c.flags|=2048)}return l!==n&&l&&(s.child.flags|=8192),fu(s,s.updateQueue),$t(s),null;case 4:return le(),n===null&&Bf(s.stateNode.containerInfo),$t(s),null;case 10:return xi(s.type),$t(s),null;case 19:if(z(he),d=s.memoizedState,d===null)return $t(s),null;if(c=(s.flags&128)!==0,_=d.rendering,_===null)if(c)gl(d,!1);else{if(ie!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=lu(n),_!==null){for(s.flags|=128,gl(d,!1),n=_.updateQueue,s.updateQueue=n,fu(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)c_(l,n),l=l.sibling;return tt(he,he.current&1|2),s.child}n=n.sibling}d.tail!==null&&Ce()>mu&&(s.flags|=128,c=!0,gl(d,!1),s.lanes=4194304)}else{if(!c)if(n=lu(_),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,fu(s,n),gl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!jt)return $t(s),null}else 2*Ce()-d.renderingStartTime>mu&&l!==536870912&&(s.flags|=128,c=!0,gl(d,!1),s.lanes=4194304);d.isBackwards?(_.sibling=s.child,s.child=_):(n=d.last,n!==null?n.sibling=_:s.child=_,d.last=_)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ce(),s.sibling=null,n=he.current,tt(he,c?n&1|2:n&1),s):($t(s),null);case 22:case 23:return Ei(s),Hh(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),l=s.updateQueue,l!==null&&fu(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),n!==null&&z(Vs),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),xi(ce),$t(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function CE(n,s){switch(Lh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return xi(ce),le(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ci(s),null;case 13:if(Ei(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));$a()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return z(he),null;case 4:return le(),null;case 10:return xi(s.type),null;case 22:case 23:return Ei(s),Hh(),n!==null&&z(Vs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return xi(ce),null;case 25:return null;default:return null}}function Fy(n,s){switch(Lh(s),s.tag){case 3:xi(ce),le();break;case 26:case 27:case 5:ci(s);break;case 4:le();break;case 13:Ei(s);break;case 19:z(he);break;case 10:xi(s.type);break;case 22:case 23:Ei(s),Hh(),n!==null&&z(Vs);break;case 24:xi(ce)}}function ml(n,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&n)===n){c=void 0;var _=l.create,x=l.inst;c=_(),x.destroy=c}l=l.next}while(l!==d)}}catch(C){Vt(s,s.return,C)}}function ls(n,s,l){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&n)===n){var x=c.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,d=s;var D=l,G=C;try{G()}catch(q){Vt(d,D,q)}}}c=c.next}while(c!==_)}}catch(q){Vt(s,s.return,q)}}function zy(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{T_(s,l)}catch(c){Vt(n,n.return,c)}}}function Gy(n,s,l){l.props=qs(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){Vt(n,s,c)}}function _l(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(d){Vt(n,s,d)}}function $n(n,s){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(d){Vt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Vt(n,s,d)}else l.current=null}function Py(n){var s=n.type,l=n.memoizedProps,c=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break t;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(d){Vt(n,n.return,d)}}function vf(n,s,l){try{var c=n.stateNode;BE(c,n.type,l,s),c[Tt]=s}catch(d){Vt(n,n.return,d)}}function Uy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ms(n.type)||n.tag===4}function Ef(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Uy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ms(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sf(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=bu));else if(c!==4&&(c===27&&ms(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(Sf(n,s,l),n=n.sibling;n!==null;)Sf(n,s,l),n=n.sibling}function du(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(c!==4&&(c===27&&ms(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(du(n,s,l),n=n.sibling;n!==null;)du(n,s,l),n=n.sibling}function Yy(n){var s=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);we(s,c,l),s[Zt]=n,s[Tt]=l}catch(_){Vt(n,n.return,_)}}var bi=!1,ae=!1,Cf=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,pe=null;function bE(n,s){if(n=n.containerInfo,Zf=Lu,n=t_(n),vh(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var d=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break t}var x=0,C=-1,D=-1,G=0,q=0,Q=n,P=null;e:for(;;){for(var Y;Q!==l||d!==0&&Q.nodeType!==3||(C=x+d),Q!==_||c!==0&&Q.nodeType!==3||(D=x+c),Q.nodeType===3&&(x+=Q.nodeValue.length),(Y=Q.firstChild)!==null;)P=Q,Q=Y;for(;;){if(Q===n)break e;if(P===l&&++G===d&&(C=x),P===_&&++q===c&&(D=x),(Y=Q.nextSibling)!==null)break;Q=P,P=Q.parentNode}Q=Y}l=C===-1||D===-1?null:{start:C,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(qf={focusedElem:n,selectionRange:l},Lu=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){switch(s=pe,_=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,l=s,d=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var _t=qs(l.type,d,l.elementType===l.type);n=c.getSnapshotBeforeUpdate(_t,_),c.__reactInternalSnapshotBeforeUpdate=n}catch(gt){Vt(l,l.return,gt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Qf(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Qf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}}function By(n,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:os(n,l),c&4&&ml(5,l);break;case 1:if(os(n,l),c&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(x){Vt(l,l.return,x)}else{var d=qs(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(x){Vt(l,l.return,x)}}c&64&&zy(l),c&512&&_l(l,l.return);break;case 3:if(os(n,l),c&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{T_(n,s)}catch(x){Vt(l,l.return,x)}}break;case 27:s===null&&c&4&&Yy(l);case 26:case 5:os(n,l),s===null&&c&4&&Py(l),c&512&&_l(l,l.return);break;case 12:os(n,l);break;case 13:os(n,l),c&4&&Zy(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=NE.bind(null,l),QE(n,l))));break;case 22:if(c=l.memoizedState!==null||bi,!c){s=s!==null&&s.memoizedState!==null||ae,d=bi;var _=ae;bi=c,(ae=s)&&!_?us(n,l,(l.subtreeFlags&8772)!==0):os(n,l),bi=d,ae=_}break;case 30:break;default:os(n,l)}}function Hy(n){var s=n.alternate;s!==null&&(n.alternate=null,Hy(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&eh(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Wt=null,Ze=!1;function Ti(n,s,l){for(l=l.child;l!==null;)Vy(n,s,l),l=l.sibling}function Vy(n,s,l){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Zn,l)}catch{}switch(l.tag){case 26:ae||$n(l,s),Ti(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ae||$n(l,s);var c=Wt,d=Ze;ms(l.type)&&(Wt=l.stateNode,Ze=!1),Ti(n,s,l),Tl(l.stateNode),Wt=c,Ze=d;break;case 5:ae||$n(l,s);case 6:if(c=Wt,d=Ze,Wt=null,Ti(n,s,l),Wt=c,Ze=d,Wt!==null)if(Ze)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(l.stateNode)}catch(_){Vt(l,s,_)}else try{Wt.removeChild(l.stateNode)}catch(_){Vt(l,s,_)}break;case 18:Wt!==null&&(Ze?(n=Wt,I0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Nl(n)):I0(Wt,l.stateNode));break;case 4:c=Wt,d=Ze,Wt=l.stateNode.containerInfo,Ze=!0,Ti(n,s,l),Wt=c,Ze=d;break;case 0:case 11:case 14:case 15:ae||ls(2,l,s),ae||ls(4,l,s),Ti(n,s,l);break;case 1:ae||($n(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Gy(l,s,c)),Ti(n,s,l);break;case 21:Ti(n,s,l);break;case 22:ae=(c=ae)||l.memoizedState!==null,Ti(n,s,l),ae=c;break;default:Ti(n,s,l)}}function Zy(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Nl(n)}catch(l){Vt(s,s.return,l)}}function TE(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Xy),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Xy),s;default:throw Error(i(435,n.tag))}}function bf(n,s){var l=TE(n);s.forEach(function(c){var d=IE.bind(null,n,c);l.has(c)||(l.add(c),c.then(d,d))})}function ln(n,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var d=l[c],_=n,x=s,C=x;t:for(;C!==null;){switch(C.tag){case 27:if(ms(C.type)){Wt=C.stateNode,Ze=!1;break t}break;case 5:Wt=C.stateNode,Ze=!1;break t;case 3:case 4:Wt=C.stateNode.containerInfo,Ze=!0;break t}C=C.return}if(Wt===null)throw Error(i(160));Vy(_,x,d),Wt=null,Ze=!1,_=d.alternate,_!==null&&(_.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)qy(s,n),s=s.sibling}var kn=null;function qy(n,s){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ln(s,n),on(n),c&4&&(ls(3,n,n.return),ml(3,n),ls(5,n,n.return));break;case 1:ln(s,n),on(n),c&512&&(ae||l===null||$n(l,l.return)),c&64&&bi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var d=kn;if(ln(s,n),on(n),c&512&&(ae||l===null||$n(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){t:{c=n.type,l=n.memoizedProps,d=d.ownerDocument||d;e:switch(c){case"title":_=d.getElementsByTagName("title")[0],(!_||_[Pa]||_[Zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=d.createElement(c),d.head.insertBefore(_,d.querySelector("head > title"))),we(_,c,l),_[Zt]=n,_e(_),c=_;break t;case"link":var x=Y0("link","href",d).get(c+(l.href||""));if(x){for(var C=0;C<x.length;C++)if(_=x[C],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(C,1);break e}}_=d.createElement(c),we(_,c,l),d.head.appendChild(_);break;case"meta":if(x=Y0("meta","content",d).get(c+(l.content||""))){for(C=0;C<x.length;C++)if(_=x[C],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(C,1);break e}}_=d.createElement(c),we(_,c,l),d.head.appendChild(_);break;default:throw Error(i(468,c))}_[Zt]=n,_e(_),c=_}n.stateNode=c}else X0(d,n.type,n.stateNode);else n.stateNode=U0(d,c,n.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?X0(d,n.type,n.stateNode):U0(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&vf(n,n.memoizedProps,l.memoizedProps)}break;case 27:ln(s,n),on(n),c&512&&(ae||l===null||$n(l,l.return)),l!==null&&c&4&&vf(n,n.memoizedProps,l.memoizedProps);break;case 5:if(ln(s,n),on(n),c&512&&(ae||l===null||$n(l,l.return)),n.flags&32){d=n.stateNode;try{br(d,"")}catch(Y){Vt(n,n.return,Y)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,vf(n,d,l!==null?l.memoizedProps:d)),c&1024&&(Cf=!0);break;case 6:if(ln(s,n),on(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Y){Vt(n,n.return,Y)}}break;case 3:if(Au=null,d=kn,kn=wu(s.containerInfo),ln(s,n),kn=d,on(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Nl(s.containerInfo)}catch(Y){Vt(n,n.return,Y)}Cf&&(Cf=!1,Ky(n));break;case 4:c=kn,kn=wu(n.stateNode.containerInfo),ln(s,n),on(n),kn=c;break;case 12:ln(s,n),on(n);break;case 13:ln(s,n),on(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Df=Ce()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,bf(n,c)));break;case 22:d=n.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,G=bi,q=ae;if(bi=G||d,ae=q||D,ln(s,n),ae=q,bi=G,on(n),c&8192)t:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(l===null||D||bi||ae||Ks(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){D=l=s;try{if(_=D.stateNode,d)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=D.stateNode;var Q=D.memoizedProps.style,P=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;C.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(Y){Vt(D,D.return,Y)}}}else if(s.tag===6){if(l===null){D=s;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(Y){Vt(D,D.return,Y)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,bf(n,l))));break;case 19:ln(s,n),on(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,bf(n,c)));break;case 30:break;case 21:break;default:ln(s,n),on(n)}}function on(n){var s=n.flags;if(s&2){try{for(var l,c=n.return;c!==null;){if(Uy(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var d=l.stateNode,_=Ef(n);du(n,_,d);break;case 5:var x=l.stateNode;l.flags&32&&(br(x,""),l.flags&=-33);var C=Ef(n);du(n,C,x);break;case 3:case 4:var D=l.stateNode.containerInfo,G=Ef(n);Sf(n,G,D);break;default:throw Error(i(161))}}catch(q){Vt(n,n.return,q)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ky(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ky(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function os(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)By(n,s.alternate,s),s=s.sibling}function Ks(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),Ks(s);break;case 1:$n(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Gy(s,s.return,l),Ks(s);break;case 27:Tl(s.stateNode);case 26:case 5:$n(s,s.return),Ks(s);break;case 22:s.memoizedState===null&&Ks(s);break;case 30:Ks(s);break;default:Ks(s)}n=n.sibling}}function us(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=n,_=s,x=_.flags;switch(_.tag){case 0:case 11:case 15:us(d,_,l),ml(4,_);break;case 1:if(us(d,_,l),c=_,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){Vt(c,c.return,G)}if(c=_,d=c.updateQueue,d!==null){var C=c.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)b_(D[d],C)}catch(G){Vt(c,c.return,G)}}l&&x&64&&zy(_),_l(_,_.return);break;case 27:Yy(_);case 26:case 5:us(d,_,l),l&&c===null&&x&4&&Py(_),_l(_,_.return);break;case 12:us(d,_,l);break;case 13:us(d,_,l),l&&x&4&&Zy(d,_);break;case 22:_.memoizedState===null&&us(d,_,l),_l(_,_.return);break;case 30:break;default:us(d,_,l)}s=s.sibling}}function Tf(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&el(l))}function wf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&el(n))}function Jn(n,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Wy(n,s,l,c),s=s.sibling}function Wy(n,s,l,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Jn(n,s,l,c),d&2048&&ml(9,s);break;case 1:Jn(n,s,l,c);break;case 3:Jn(n,s,l,c),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&el(n)));break;case 12:if(d&2048){Jn(n,s,l,c),n=s.stateNode;try{var _=s.memoizedProps,x=_.id,C=_.onPostCommit;typeof C=="function"&&C(x,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Vt(s,s.return,D)}}else Jn(n,s,l,c);break;case 13:Jn(n,s,l,c);break;case 23:break;case 22:_=s.stateNode,x=s.alternate,s.memoizedState!==null?_._visibility&2?Jn(n,s,l,c):yl(n,s):_._visibility&2?Jn(n,s,l,c):(_._visibility|=2,Xr(n,s,l,c,(s.subtreeFlags&10256)!==0)),d&2048&&Tf(x,s);break;case 24:Jn(n,s,l,c),d&2048&&wf(s.alternate,s);break;default:Jn(n,s,l,c)}}function Xr(n,s,l,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=n,x=s,C=l,D=c,G=x.flags;switch(x.tag){case 0:case 11:case 15:Xr(_,x,C,D,d),ml(8,x);break;case 23:break;case 22:var q=x.stateNode;x.memoizedState!==null?q._visibility&2?Xr(_,x,C,D,d):yl(_,x):(q._visibility|=2,Xr(_,x,C,D,d)),d&&G&2048&&Tf(x.alternate,x);break;case 24:Xr(_,x,C,D,d),d&&G&2048&&wf(x.alternate,x);break;default:Xr(_,x,C,D,d)}s=s.sibling}}function yl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,c=s,d=c.flags;switch(c.tag){case 22:yl(l,c),d&2048&&Tf(c.alternate,c);break;case 24:yl(l,c),d&2048&&wf(c.alternate,c);break;default:yl(l,c)}s=s.sibling}}var pl=8192;function Br(n){if(n.subtreeFlags&pl)for(n=n.child;n!==null;)Qy(n),n=n.sibling}function Qy(n){switch(n.tag){case 26:Br(n),n.flags&pl&&n.memoizedState!==null&&cS(kn,n.memoizedState,n.memoizedProps);break;case 5:Br(n);break;case 3:case 4:var s=kn;kn=wu(n.stateNode.containerInfo),Br(n),kn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=pl,pl=16777216,Br(n),pl=s):Br(n));break;default:Br(n)}}function $y(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function xl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];pe=c,t0(c,n)}$y(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jy(n),n=n.sibling}function Jy(n){switch(n.tag){case 0:case 11:case 15:xl(n),n.flags&2048&&ls(9,n,n.return);break;case 3:xl(n);break;case 12:xl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,gu(n)):xl(n);break;default:xl(n)}}function gu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];pe=c,t0(c,n)}$y(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ls(8,s,s.return),gu(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,gu(s));break;default:gu(s)}n=n.sibling}}function t0(n,s){for(;pe!==null;){var l=pe;switch(l.tag){case 0:case 11:case 15:ls(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:el(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,pe=c;else t:for(l=n;pe!==null;){c=pe;var d=c.sibling,_=c.return;if(Hy(c),c===l){pe=null;break t}if(d!==null){d.return=_,pe=d;break t}pe=_}}}var wE={getCacheForType:function(n){var s=De(ce),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l}},RE=typeof WeakMap=="function"?WeakMap:Map,Gt=0,qt=null,wt=null,Lt=0,Pt=0,un=null,cs=!1,Hr=!1,Rf=!1,wi=0,ie=0,hs=0,Ws=0,Af=0,Sn=0,Vr=0,vl=null,qe=null,Mf=!1,Df=0,mu=1/0,_u=null,fs=null,Te=0,ds=null,Zr=null,qr=0,Lf=0,Of=null,e0=null,El=0,Nf=null;function cn(){if((Gt&2)!==0&&Lt!==0)return Lt&-Lt;if(I.T!==null){var n=jr;return n!==0?n:Pf()}return nn()}function n0(){Sn===0&&(Sn=(Lt&536870912)===0||jt?yr():536870912);var n=En.current;return n!==null&&(n.flags|=32),Sn}function hn(n,s,l){(n===qt&&(Pt===2||Pt===9)||n.cancelPendingCommit!==null)&&(Kr(n,0),gs(n,Lt,Sn,!1)),Nn(n,l),((Gt&2)===0||n!==qt)&&(n===qt&&((Gt&2)===0&&(Ws|=l),ie===4&&gs(n,Lt,Sn,!1)),ti(n))}function i0(n,s,l){if((Gt&6)!==0)throw Error(i(327));var c=!l&&(s&124)===0&&(s&n.expiredLanes)===0||Qi(n,s),d=c?DE(n,s):kf(n,s,!0),_=c;do{if(d===0){Hr&&!c&&gs(n,s,0,!1);break}else{if(l=n.current.alternate,_&&!AE(l)){d=kf(n,s,!1),_=!1;continue}if(d===2){if(_=s,n.errorRecoveryDisabledLanes&_)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;t:{var C=n;d=vl;var D=C.current.memoizedState.isDehydrated;if(D&&(Kr(C,x).flags|=256),x=kf(C,x,!1),x!==2){if(Rf&&!D){C.errorRecoveryDisabledLanes|=_,Ws|=_,d=4;break t}_=qe,qe=d,_!==null&&(qe===null?qe=_:qe.push.apply(qe,_))}d=x}if(_=!1,d!==2)continue}}if(d===1){Kr(n,0),gs(n,s,0,!0);break}t:{switch(c=n,_=d,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:gs(c,s,Sn,!cs);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Df+300-Ce(),10<d)){if(gs(c,s,Sn,!cs),Wi(c,0,!0)!==0)break t;c.timeoutHandle=O0(s0.bind(null,c,l,qe,_u,Mf,s,Sn,Ws,Vr,cs,_,2,-0,0),d);break t}s0(c,l,qe,_u,Mf,s,Sn,Ws,Vr,cs,_,0,-0,0)}}break}while(!0);ti(n)}function s0(n,s,l,c,d,_,x,C,D,G,q,Q,P,Y){if(n.timeoutHandle=-1,Q=s.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:uS},Qy(s),Q=hS(),Q!==null)){n.cancelPendingCommit=Q(h0.bind(null,n,s,_,l,c,d,x,C,D,q,1,P,Y)),gs(n,_,x,!G);return}h0(n,s,_,l,c,d,x,C,D)}function AE(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var d=l[c],_=d.getSnapshot;d=d.value;try{if(!rn(_(),d))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gs(n,s,l,c){s&=~Af,s&=~Ws,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var d=s;0<d;){var _=31-Ae(d),x=1<<_;c[_]=-1,d&=~x}l!==0&&Ga(n,l,s)}function yu(){return(Gt&6)===0?(Sl(0),!1):!0}function If(){if(wt!==null){if(Pt===0)var n=wt.return;else n=wt,pi=Bs=null,Wh(n),Ur=null,fl=0,n=wt;for(;n!==null;)Fy(n.alternate,n),n=n.return;wt=null}}function Kr(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,VE(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),If(),qt=n,wt=l=mi(n.current,null),Lt=s,Pt=0,un=null,cs=!1,Hr=Qi(n,s),Rf=!1,Vr=Sn=Af=Ws=hs=ie=0,qe=vl=null,Mf=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var d=31-Ae(c),_=1<<d;s|=n[d],c&=~_}return wi=s,Go(),l}function r0(n,s){St=null,I.H=su,s===il||s===qo?(s=S_(),Pt=3):s===x_?(s=S_(),Pt=4):Pt=s===Cy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,un=s,wt===null&&(ie=1,uu(n,yn(s,n.current)))}function a0(){var n=I.H;return I.H=su,n===null?su:n}function l0(){var n=I.A;return I.A=wE,n}function jf(){ie=4,cs||(Lt&4194048)!==Lt&&En.current!==null||(Hr=!0),(hs&134217727)===0&&(Ws&134217727)===0||qt===null||gs(qt,Lt,Sn,!1)}function kf(n,s,l){var c=Gt;Gt|=2;var d=a0(),_=l0();(qt!==n||Lt!==s)&&(_u=null,Kr(n,s)),s=!1;var x=ie;t:do try{if(Pt!==0&&wt!==null){var C=wt,D=un;switch(Pt){case 8:If(),x=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var G=Pt;if(Pt=0,un=null,Wr(n,C,D,G),l&&Hr){x=0;break t}break;default:G=Pt,Pt=0,un=null,Wr(n,C,D,G)}}ME(),x=ie;break}catch(q){r0(n,q)}while(!0);return s&&n.shellSuspendCounter++,pi=Bs=null,Gt=c,I.H=d,I.A=_,wt===null&&(qt=null,Lt=0,Go()),x}function ME(){for(;wt!==null;)o0(wt)}function DE(n,s){var l=Gt;Gt|=2;var c=a0(),d=l0();qt!==n||Lt!==s?(_u=null,mu=Ce()+500,Kr(n,s)):Hr=Qi(n,s);t:do try{if(Pt!==0&&wt!==null){s=wt;var _=un;e:switch(Pt){case 1:Pt=0,un=null,Wr(n,s,_,1);break;case 2:case 9:if(v_(_)){Pt=0,un=null,u0(s);break}s=function(){Pt!==2&&Pt!==9||qt!==n||(Pt=7),ti(n)},_.then(s,s);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:v_(_)?(Pt=0,un=null,u0(s)):(Pt=0,un=null,Wr(n,s,_,7));break;case 5:var x=null;switch(wt.tag){case 26:x=wt.memoizedState;case 5:case 27:var C=wt;if(!x||B0(x)){Pt=0,un=null;var D=C.sibling;if(D!==null)wt=D;else{var G=C.return;G!==null?(wt=G,pu(G)):wt=null}break e}}Pt=0,un=null,Wr(n,s,_,5);break;case 6:Pt=0,un=null,Wr(n,s,_,6);break;case 8:If(),ie=6;break t;default:throw Error(i(462))}}LE();break}catch(q){r0(n,q)}while(!0);return pi=Bs=null,I.H=c,I.A=d,Gt=l,wt!==null?0:(qt=null,Lt=0,Go(),ie)}function LE(){for(;wt!==null&&!Xe();)o0(wt)}function o0(n){var s=jy(n.alternate,n,wi);n.memoizedProps=n.pendingProps,s===null?pu(n):wt=s}function u0(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=My(l,s,s.pendingProps,s.type,void 0,Lt);break;case 11:s=My(l,s,s.pendingProps,s.type.render,s.ref,Lt);break;case 5:Wh(s);default:Fy(l,s),s=wt=c_(s,wi),s=jy(l,s,wi)}n.memoizedProps=n.pendingProps,s===null?pu(n):wt=s}function Wr(n,s,l,c){pi=Bs=null,Wh(s),Ur=null,fl=0;var d=s.return;try{if(vE(n,d,s,l,Lt)){ie=1,uu(n,yn(l,n.current)),wt=null;return}}catch(_){if(d!==null)throw wt=d,_;ie=1,uu(n,yn(l,n.current)),wt=null;return}s.flags&32768?(jt||c===1?n=!0:Hr||(Lt&536870912)!==0?n=!1:(cs=n=!0,(c===2||c===9||c===3||c===6)&&(c=En.current,c!==null&&c.tag===13&&(c.flags|=16384))),c0(s,n)):pu(s)}function pu(n){var s=n;do{if((s.flags&32768)!==0){c0(s,cs);return}n=s.return;var l=SE(s.alternate,s,wi);if(l!==null){wt=l;return}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);ie===0&&(ie=5)}function c0(n,s){do{var l=CE(n.alternate,n);if(l!==null){l.flags&=32767,wt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){wt=n;return}wt=n=l}while(n!==null);ie=6,wt=null}function h0(n,s,l,c,d,_,x,C,D){n.cancelPendingCommit=null;do xu();while(Te!==0);if((Gt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=Th,Ro(n,l,_,x,C,D),n===qt&&(wt=qt=null,Lt=0),Zr=s,ds=n,qr=l,Lf=_,Of=d,e0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jE(On,function(){return _0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=I.T,I.T=null,d=Z.p,Z.p=2,x=Gt,Gt|=4;try{bE(n,s,l)}finally{Gt=x,Z.p=d,I.T=c}}Te=1,f0(),d0(),g0()}}function f0(){if(Te===1){Te=0;var n=ds,s=Zr,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var c=Z.p;Z.p=2;var d=Gt;Gt|=4;try{qy(s,n);var _=qf,x=t_(n.containerInfo),C=_.focusedElem,D=_.selectionRange;if(x!==C&&C&&C.ownerDocument&&Jm(C.ownerDocument.documentElement,C)){if(D!==null&&vh(C)){var G=D.start,q=D.end;if(q===void 0&&(q=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(q,C.value.length);else{var Q=C.ownerDocument||document,P=Q&&Q.defaultView||window;if(P.getSelection){var Y=P.getSelection(),_t=C.textContent.length,gt=Math.min(D.start,_t),Ht=D.end===void 0?gt:Math.min(D.end,_t);!Y.extend&&gt>Ht&&(x=Ht,Ht=gt,gt=x);var k=$m(C,gt),N=$m(C,Ht);if(k&&N&&(Y.rangeCount!==1||Y.anchorNode!==k.node||Y.anchorOffset!==k.offset||Y.focusNode!==N.node||Y.focusOffset!==N.offset)){var F=Q.createRange();F.setStart(k.node,k.offset),Y.removeAllRanges(),gt>Ht?(Y.addRange(F),Y.extend(N.node,N.offset)):(F.setEnd(N.node,N.offset),Y.addRange(F))}}}}for(Q=[],Y=C;Y=Y.parentNode;)Y.nodeType===1&&Q.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Q.length;C++){var W=Q[C];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Lu=!!Zf,qf=Zf=null}finally{Gt=d,Z.p=c,I.T=l}}n.current=s,Te=2}}function d0(){if(Te===2){Te=0;var n=ds,s=Zr,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var c=Z.p;Z.p=2;var d=Gt;Gt|=4;try{By(n,s.alternate,s)}finally{Gt=d,Z.p=c,I.T=l}}Te=3}}function g0(){if(Te===4||Te===3){Te=0,gn();var n=ds,s=Zr,l=qr,c=e0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Te=5:(Te=0,Zr=ds=null,m0(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(fs=null),Me(l),s=s.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Zn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=I.T,d=Z.p,Z.p=2,I.T=null;try{for(var _=n.onRecoverableError,x=0;x<c.length;x++){var C=c[x];_(C.value,{componentStack:C.stack})}}finally{I.T=s,Z.p=d}}(qr&3)!==0&&xu(),ti(n),d=n.pendingLanes,(l&4194090)!==0&&(d&42)!==0?n===Nf?El++:(El=0,Nf=n):El=0,Sl(0)}}function m0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,el(s)))}function xu(n){return f0(),d0(),g0(),_0()}function _0(){if(Te!==5)return!1;var n=ds,s=Lf;Lf=0;var l=Me(qr),c=I.T,d=Z.p;try{Z.p=32>l?32:l,I.T=null,l=Of,Of=null;var _=ds,x=qr;if(Te=0,Zr=ds=null,qr=0,(Gt&6)!==0)throw Error(i(331));var C=Gt;if(Gt|=4,Jy(_.current),Wy(_,_.current,x,l),Gt=C,Sl(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Zn,_)}catch{}return!0}finally{Z.p=d,I.T=c,m0(n,s)}}function y0(n,s,l){s=yn(l,s),s=hf(n.stateNode,s,2),n=is(n,s,2),n!==null&&(Nn(n,2),ti(n))}function Vt(n,s,l){if(n.tag===3)y0(n,n,l);else for(;s!==null;){if(s.tag===3){y0(s,n,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fs===null||!fs.has(c))){n=yn(l,n),l=Ey(2),c=is(s,l,2),c!==null&&(Sy(l,c,s,n),Nn(c,2),ti(c));break}}s=s.return}}function Ff(n,s,l){var c=n.pingCache;if(c===null){c=n.pingCache=new RE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(l)||(Rf=!0,d.add(l),n=OE.bind(null,n,s,l),s.then(n,n))}function OE(n,s,l){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,qt===n&&(Lt&l)===l&&(ie===4||ie===3&&(Lt&62914560)===Lt&&300>Ce()-Df?(Gt&2)===0&&Kr(n,0):Af|=l,Vr===Lt&&(Vr=0)),ti(n)}function p0(n,s){s===0&&(s=$i()),n=Lr(n,s),n!==null&&(Nn(n,s),ti(n))}function NE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),p0(n,l)}function IE(n,s){var l=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(l=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),p0(n,l)}function jE(n,s){return hi(n,s)}var vu=null,Qr=null,zf=!1,Eu=!1,Gf=!1,Qs=0;function ti(n){n!==Qr&&n.next===null&&(Qr===null?vu=Qr=n:Qr=Qr.next=n),Eu=!0,zf||(zf=!0,FE())}function Sl(n,s){if(!Gf&&Eu){Gf=!0;do for(var l=!1,c=vu;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var _=0;else{var x=c.suspendedLanes,C=c.pingedLanes;_=(1<<31-Ae(42|n)+1)-1,_&=d&~(x&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,S0(c,_))}else _=Lt,_=Wi(c,c===qt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Qi(c,_)||(l=!0,S0(c,_));c=c.next}while(l);Gf=!1}}function kE(){x0()}function x0(){Eu=zf=!1;var n=0;Qs!==0&&(HE()&&(n=Qs),Qs=0);for(var s=Ce(),l=null,c=vu;c!==null;){var d=c.next,_=v0(c,s);_===0?(c.next=null,l===null?vu=d:l.next=d,d===null&&(Qr=l)):(l=c,(n!==0||(_&3)!==0)&&(Eu=!0)),c=d}Sl(n)}function v0(n,s){for(var l=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var x=31-Ae(_),C=1<<x,D=d[x];D===-1?((C&l)===0||(C&c)!==0)&&(d[x]=Jc(C,s)):D<=s&&(n.expiredLanes|=C),_&=~C}if(s=qt,l=Lt,l=Wi(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===s&&(Pt===2||Pt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ln(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Qi(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(c!==null&&Ln(c),Me(l)){case 2:case 8:l=Vn;break;case 32:l=On;break;case 268435456:l=se;break;default:l=On}return c=E0.bind(null,n),l=hi(l,c),n.callbackPriority=s,n.callbackNode=l,s}return c!==null&&c!==null&&Ln(c),n.callbackPriority=2,n.callbackNode=null,2}function E0(n,s){if(Te!==0&&Te!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(xu()&&n.callbackNode!==l)return null;var c=Lt;return c=Wi(n,n===qt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(i0(n,c,s),v0(n,Ce()),n.callbackNode!=null&&n.callbackNode===l?E0.bind(null,n):null)}function S0(n,s){if(xu())return null;i0(n,s,!0)}function FE(){ZE(function(){(Gt&6)!==0?hi(qi,kE):x0()})}function Pf(){return Qs===0&&(Qs=yr()),Qs}function C0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Oo(""+n)}function b0(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function zE(n,s,l,c,d){if(s==="submit"&&l&&l.stateNode===d){var _=C0((d[Tt]||null).action),x=c.submitter;x&&(s=(s=x[Tt]||null)?C0(s.formAction):x.getAttribute("formAction"),s!==null&&(_=s,x=null));var C=new ko("action","action",null,c,d);n.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qs!==0){var D=x?b0(d,x):new FormData(d);af(l,{pending:!0,data:D,method:d.method,action:_},null,D)}}else typeof _=="function"&&(C.preventDefault(),D=x?b0(d,x):new FormData(d),af(l,{pending:!0,data:D,method:d.method,action:_},_,D))},currentTarget:d}]})}}for(var Uf=0;Uf<bh.length;Uf++){var Yf=bh[Uf],GE=Yf.toLowerCase(),PE=Yf[0].toUpperCase()+Yf.slice(1);jn(GE,"on"+PE)}jn(i_,"onAnimationEnd"),jn(s_,"onAnimationIteration"),jn(r_,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(iE,"onTransitionRun"),jn(sE,"onTransitionStart"),jn(rE,"onTransitionCancel"),jn(a_,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function T0(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],d=c.event;c=c.listeners;t:{var _=void 0;if(s)for(var x=c.length-1;0<=x;x--){var C=c[x],D=C.instance,G=C.currentTarget;if(C=C.listener,D!==_&&d.isPropagationStopped())break t;_=C,d.currentTarget=G;try{_(d)}catch(q){ou(q)}d.currentTarget=null,_=D}else for(x=0;x<c.length;x++){if(C=c[x],D=C.instance,G=C.currentTarget,C=C.listener,D!==_&&d.isPropagationStopped())break t;_=C,d.currentTarget=G;try{_(d)}catch(q){ou(q)}d.currentTarget=null,_=D}}}}function Rt(n,s){var l=s[sn];l===void 0&&(l=s[sn]=new Set);var c=n+"__bubble";l.has(c)||(w0(s,n,2,!1),l.add(c))}function Xf(n,s,l){var c=0;s&&(c|=4),w0(l,n,c,s)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Bf(n){if(!n[Su]){n[Su]=!0,xm.forEach(function(l){l!=="selectionchange"&&(UE.has(l)||Xf(l,!1,n),Xf(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Su]||(s[Su]=!0,Xf("selectionchange",!1,s))}}function w0(n,s,l,c){switch(W0(s)){case 2:var d=gS;break;case 8:d=mS;break;default:d=sd}l=d.bind(null,s,l,n),d=void 0,!hh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,l,{capture:!0,passive:d}):n.addEventListener(s,l,!0):d!==void 0?n.addEventListener(s,l,{passive:d}):n.addEventListener(s,l,!1)}function Hf(n,s,l,c,d){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===d)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;C!==null;){if(x=pr(C),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=_=x;continue t}C=C.parentNode}}c=c.return}Nm(function(){var G=_,q=uh(l),Q=[];t:{var P=l_.get(n);if(P!==void 0){var Y=ko,_t=n;switch(n){case"keypress":if(Io(l)===0)break t;case"keydown":case"keyup":Y=j1;break;case"focusin":_t="focus",Y=mh;break;case"focusout":_t="blur",Y=mh;break;case"beforeblur":case"afterblur":Y=mh;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=C1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=z1;break;case i_:case s_:case r_:Y=w1;break;case a_:Y=P1;break;case"scroll":case"scrollend":Y=E1;break;case"wheel":Y=Y1;break;case"copy":case"cut":case"paste":Y=A1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=zm;break;case"toggle":case"beforetoggle":Y=B1}var gt=(s&4)!==0,Ht=!gt&&(n==="scroll"||n==="scrollend"),k=gt?P!==null?P+"Capture":null:P;gt=[];for(var N=G,F;N!==null;){var W=N;if(F=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||F===null||k===null||(W=Ya(N,k),W!=null&&gt.push(bl(N,W,F))),Ht)break;N=N.return}0<gt.length&&(P=new Y(P,_t,null,l,q),Q.push({event:P,listeners:gt}))}}if((s&7)===0){t:{if(P=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",P&&l!==oh&&(_t=l.relatedTarget||l.fromElement)&&(pr(_t)||_t[ee]))break t;if((Y||P)&&(P=q.window===q?q:(P=q.ownerDocument)?P.defaultView||P.parentWindow:window,Y?(_t=l.relatedTarget||l.toElement,Y=G,_t=_t?pr(_t):null,_t!==null&&(Ht=o(_t),gt=_t.tag,_t!==Ht||gt!==5&&gt!==27&&gt!==6)&&(_t=null)):(Y=null,_t=G),Y!==_t)){if(gt=km,W="onMouseLeave",k="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(gt=zm,W="onPointerLeave",k="onPointerEnter",N="pointer"),Ht=Y==null?P:Ua(Y),F=_t==null?P:Ua(_t),P=new gt(W,N+"leave",Y,l,q),P.target=Ht,P.relatedTarget=F,W=null,pr(q)===G&&(gt=new gt(k,N+"enter",_t,l,q),gt.target=F,gt.relatedTarget=Ht,W=gt),Ht=W,Y&&_t)e:{for(gt=Y,k=_t,N=0,F=gt;F;F=$r(F))N++;for(F=0,W=k;W;W=$r(W))F++;for(;0<N-F;)gt=$r(gt),N--;for(;0<F-N;)k=$r(k),F--;for(;N--;){if(gt===k||k!==null&&gt===k.alternate)break e;gt=$r(gt),k=$r(k)}gt=null}else gt=null;Y!==null&&R0(Q,P,Y,gt,!1),_t!==null&&Ht!==null&&R0(Q,Ht,_t,gt,!0)}}t:{if(P=G?Ua(G):window,Y=P.nodeName&&P.nodeName.toLowerCase(),Y==="select"||Y==="input"&&P.type==="file")var ot=Vm;else if(Bm(P))if(Zm)ot=tE;else{ot=$1;var bt=Q1}else Y=P.nodeName,!Y||Y.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?G&&lh(G.elementType)&&(ot=Vm):ot=J1;if(ot&&(ot=ot(n,G))){Hm(Q,ot,l,q);break t}bt&&bt(n,P,G),n==="focusout"&&G&&P.type==="number"&&G.memoizedProps.value!=null&&ah(P,"number",P.value)}switch(bt=G?Ua(G):window,n){case"focusin":(Bm(bt)||bt.contentEditable==="true")&&(Ar=bt,Eh=G,Wa=null);break;case"focusout":Wa=Eh=Ar=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,e_(Q,l,q);break;case"selectionchange":if(nE)break;case"keydown":case"keyup":e_(Q,l,q)}var ct;if(yh)t:{switch(n){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Rr?Ym(n,l)&&(mt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(mt="onCompositionStart");mt&&(Gm&&l.locale!=="ko"&&(Rr||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Rr&&(ct=Im()):(Ji=q,fh="value"in Ji?Ji.value:Ji.textContent,Rr=!0)),bt=Cu(G,mt),0<bt.length&&(mt=new Fm(mt,n,null,l,q),Q.push({event:mt,listeners:bt}),ct?mt.data=ct:(ct=Xm(l),ct!==null&&(mt.data=ct)))),(ct=V1?Z1(n,l):q1(n,l))&&(mt=Cu(G,"onBeforeInput"),0<mt.length&&(bt=new Fm("onBeforeInput","beforeinput",null,l,q),Q.push({event:bt,listeners:mt}),bt.data=ct)),zE(Q,n,G,l,q)}T0(Q,s)})}function bl(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Cu(n,s){for(var l=s+"Capture",c=[];n!==null;){var d=n,_=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||_===null||(d=Ya(n,l),d!=null&&c.unshift(bl(n,d,_)),d=Ya(n,s),d!=null&&c.push(bl(n,d,_))),n.tag===3)return c;n=n.return}return[]}function $r(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function R0(n,s,l,c,d){for(var _=s._reactName,x=[];l!==null&&l!==c;){var C=l,D=C.alternate,G=C.stateNode;if(C=C.tag,D!==null&&D===c)break;C!==5&&C!==26&&C!==27||G===null||(D=G,d?(G=Ya(l,_),G!=null&&x.unshift(bl(l,G,D))):d||(G=Ya(l,_),G!=null&&x.push(bl(l,G,D)))),l=l.return}x.length!==0&&n.push({event:s,listeners:x})}var YE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function A0(n){return(typeof n=="string"?n:""+n).replace(YE,`
`).replace(XE,"")}function M0(n,s){return s=A0(s),A0(n)===s}function bu(){}function Bt(n,s,l,c,d,_){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||br(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&br(n,""+c);break;case"className":Mo(n,"class",c);break;case"tabIndex":Mo(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mo(n,l,c);break;case"style":Lm(n,c,_);break;case"data":if(s!=="object"){Mo(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Oo(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&Bt(n,s,"name",d.name,d,null),Bt(n,s,"formEncType",d.formEncType,d,null),Bt(n,s,"formMethod",d.formMethod,d,null),Bt(n,s,"formTarget",d.formTarget,d,null)):(Bt(n,s,"encType",d.encType,d,null),Bt(n,s,"method",d.method,d,null),Bt(n,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Oo(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=bu);break;case"onScroll":c!=null&&Rt("scroll",n);break;case"onScrollEnd":c!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=Oo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),Ao(n,"popover",c);break;case"xlinkActuate":di(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":di(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":di(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":di(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":di(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":di(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":di(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":di(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":di(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ao(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=x1.get(l)||l,Ao(n,l,c))}}function Vf(n,s,l,c,d,_){switch(l){case"style":Lm(n,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof c=="string"?br(n,c):(typeof c=="number"||typeof c=="bigint")&&br(n,""+c);break;case"onScroll":c!=null&&Rt("scroll",n);break;case"onScrollEnd":c!=null&&Rt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=bu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vm.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),s=l.slice(2,d?l.length-7:void 0),_=n[Tt]||null,_=_!=null?_[l]:null,typeof _=="function"&&n.removeEventListener(s,_,d),typeof c=="function")){typeof _!="function"&&_!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,c,d);break t}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Ao(n,l,c)}}}function we(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var c=!1,d=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var x=l[_];if(x!=null)switch(_){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(n,s,_,x,l,null)}}d&&Bt(n,s,"srcSet",l.srcSet,l,null),c&&Bt(n,s,"src",l.src,l,null);return;case"input":Rt("invalid",n);var C=_=x=d=null,D=null,G=null;for(c in l)if(l.hasOwnProperty(c)){var q=l[c];if(q!=null)switch(c){case"name":d=q;break;case"type":x=q;break;case"checked":D=q;break;case"defaultChecked":G=q;break;case"value":_=q;break;case"defaultValue":C=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:Bt(n,s,c,q,l,null)}}Rm(n,_,C,D,G,x,d,!1),Do(n);return;case"select":Rt("invalid",n),c=x=_=null;for(d in l)if(l.hasOwnProperty(d)&&(C=l[d],C!=null))switch(d){case"value":_=C;break;case"defaultValue":x=C;break;case"multiple":c=C;default:Bt(n,s,d,C,l,null)}s=_,l=x,n.multiple=!!c,s!=null?Cr(n,!!c,s,!1):l!=null&&Cr(n,!!c,l,!0);return;case"textarea":Rt("invalid",n),_=d=c=null;for(x in l)if(l.hasOwnProperty(x)&&(C=l[x],C!=null))switch(x){case"value":c=C;break;case"defaultValue":d=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Bt(n,s,x,C,l,null)}Mm(n,c,d,_),Do(n);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(c=l[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Bt(n,s,D,c,l,null)}return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(c=0;c<Cl.length;c++)Rt(Cl[c],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(c=l[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(n,s,G,c,l,null)}return;default:if(lh(s)){for(q in l)l.hasOwnProperty(q)&&(c=l[q],c!==void 0&&Vf(n,s,q,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&Bt(n,s,C,c,l,null))}function BE(n,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,_=null,x=null,C=null,D=null,G=null,q=null;for(Y in l){var Q=l[Y];if(l.hasOwnProperty(Y)&&Q!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=Q;default:c.hasOwnProperty(Y)||Bt(n,s,Y,null,c,Q)}}for(var P in c){var Y=c[P];if(Q=l[P],c.hasOwnProperty(P)&&(Y!=null||Q!=null))switch(P){case"type":_=Y;break;case"name":d=Y;break;case"checked":G=Y;break;case"defaultChecked":q=Y;break;case"value":x=Y;break;case"defaultValue":C=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==Q&&Bt(n,s,P,Y,c,Q)}}rh(n,x,C,D,G,q,_,d);return;case"select":Y=x=C=P=null;for(_ in l)if(D=l[_],l.hasOwnProperty(_)&&D!=null)switch(_){case"value":break;case"multiple":Y=D;default:c.hasOwnProperty(_)||Bt(n,s,_,null,c,D)}for(d in c)if(_=c[d],D=l[d],c.hasOwnProperty(d)&&(_!=null||D!=null))switch(d){case"value":P=_;break;case"defaultValue":C=_;break;case"multiple":x=_;default:_!==D&&Bt(n,s,d,_,c,D)}s=C,l=x,c=Y,P!=null?Cr(n,!!l,P,!1):!!c!=!!l&&(s!=null?Cr(n,!!l,s,!0):Cr(n,!!l,l?[]:"",!1));return;case"textarea":Y=P=null;for(C in l)if(d=l[C],l.hasOwnProperty(C)&&d!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Bt(n,s,C,null,c,d)}for(x in c)if(d=c[x],_=l[x],c.hasOwnProperty(x)&&(d!=null||_!=null))switch(x){case"value":P=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==_&&Bt(n,s,x,d,c,_)}Am(n,P,Y);return;case"option":for(var _t in l)if(P=l[_t],l.hasOwnProperty(_t)&&P!=null&&!c.hasOwnProperty(_t))switch(_t){case"selected":n.selected=!1;break;default:Bt(n,s,_t,null,c,P)}for(D in c)if(P=c[D],Y=l[D],c.hasOwnProperty(D)&&P!==Y&&(P!=null||Y!=null))switch(D){case"selected":n.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Bt(n,s,D,P,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in l)P=l[gt],l.hasOwnProperty(gt)&&P!=null&&!c.hasOwnProperty(gt)&&Bt(n,s,gt,null,c,P);for(G in c)if(P=c[G],Y=l[G],c.hasOwnProperty(G)&&P!==Y&&(P!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,s));break;default:Bt(n,s,G,P,c,Y)}return;default:if(lh(s)){for(var Ht in l)P=l[Ht],l.hasOwnProperty(Ht)&&P!==void 0&&!c.hasOwnProperty(Ht)&&Vf(n,s,Ht,void 0,c,P);for(q in c)P=c[q],Y=l[q],!c.hasOwnProperty(q)||P===Y||P===void 0&&Y===void 0||Vf(n,s,q,P,c,Y);return}}for(var k in l)P=l[k],l.hasOwnProperty(k)&&P!=null&&!c.hasOwnProperty(k)&&Bt(n,s,k,null,c,P);for(Q in c)P=c[Q],Y=l[Q],!c.hasOwnProperty(Q)||P===Y||P==null&&Y==null||Bt(n,s,Q,P,c,Y)}var Zf=null,qf=null;function Tu(n){return n.nodeType===9?n:n.ownerDocument}function D0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Kf(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wf=null;function HE(){var n=window.event;return n&&n.type==="popstate"?n===Wf?!1:(Wf=n,!0):(Wf=null,!1)}var O0=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(n){return N0.resolve(null).then(n).catch(qE)}:O0;function qE(n){setTimeout(function(){throw n})}function ms(n){return n==="head"}function I0(n,s){var l=s,c=0,d=0;do{var _=l.nextSibling;if(n.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<c&&8>c){l=c;var x=n.ownerDocument;if(l&1&&Tl(x.documentElement),l&2&&Tl(x.body),l&4)for(l=x.head,Tl(l),x=l.firstChild;x;){var C=x.nextSibling,D=x.nodeName;x[Pa]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=C}}if(d===0){n.removeChild(_),Nl(s);return}d--}else l==="$"||l==="$?"||l==="$!"?d++:c=l.charCodeAt(0)-48;else c=0;l=_}while(l);Nl(s)}function Qf(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Qf(l),eh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function KE(n,s,l,c){for(;n.nodeType===1;){var d=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Pa])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var _=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=Fn(n.nextSibling),n===null)break}return null}function WE(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Fn(n.nextSibling),n===null))return null;return n}function $f(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function QE(n,s){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Fn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Jf=null;function j0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}function k0(n,s,l){switch(s=Tu(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Tl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);eh(n)}var Cn=new Map,F0=new Set;function wu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ri=Z.d;Z.d={f:$E,r:JE,D:tS,C:eS,L:nS,m:iS,X:rS,S:sS,M:aS};function $E(){var n=Ri.f(),s=yu();return n||s}function JE(n){var s=xr(n);s!==null&&s.tag===5&&s.type==="form"?iy(s):Ri.r(n)}var Jr=typeof document>"u"?null:document;function z0(n,s,l){var c=Jr;if(c&&typeof s=="string"&&s){var d=_n(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),F0.has(d)||(F0.add(d),n={rel:n,crossOrigin:l,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),we(s,"link",n),_e(s),c.head.appendChild(s)))}}function tS(n){Ri.D(n),z0("dns-prefetch",n,null)}function eS(n,s){Ri.C(n,s),z0("preconnect",n,s)}function nS(n,s,l){Ri.L(n,s,l);var c=Jr;if(c&&n&&s){var d='link[rel="preload"][as="'+_n(s)+'"]';s==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+_n(l.imageSizes)+'"]')):d+='[href="'+_n(n)+'"]';var _=d;switch(s){case"style":_=ta(n);break;case"script":_=ea(n)}Cn.has(_)||(n=m({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),Cn.set(_,n),c.querySelector(d)!==null||s==="style"&&c.querySelector(wl(_))||s==="script"&&c.querySelector(Rl(_))||(s=c.createElement("link"),we(s,"link",n),_e(s),c.head.appendChild(s)))}}function iS(n,s){Ri.m(n,s);var l=Jr;if(l&&n){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(n)+'"]',_=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ea(n)}if(!Cn.has(_)&&(n=m({rel:"modulepreload",href:n},s),Cn.set(_,n),l.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Rl(_)))return}c=l.createElement("link"),we(c,"link",n),_e(c),l.head.appendChild(c)}}}function sS(n,s,l){Ri.S(n,s,l);var c=Jr;if(c&&n){var d=vr(c).hoistableStyles,_=ta(n);s=s||"default";var x=d.get(_);if(!x){var C={loading:0,preload:null};if(x=c.querySelector(wl(_)))C.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":s},l),(l=Cn.get(_))&&td(n,l);var D=x=c.createElement("link");_e(D),we(D,"link",n),D._p=new Promise(function(G,q){D.onload=G,D.onerror=q}),D.addEventListener("load",function(){C.loading|=1}),D.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ru(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:C},d.set(_,x)}}}function rS(n,s){Ri.X(n,s);var l=Jr;if(l&&n){var c=vr(l).hoistableScripts,d=ea(n),_=c.get(d);_||(_=l.querySelector(Rl(d)),_||(n=m({src:n,async:!0},s),(s=Cn.get(d))&&ed(n,s),_=l.createElement("script"),_e(_),we(_,"link",n),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function aS(n,s){Ri.M(n,s);var l=Jr;if(l&&n){var c=vr(l).hoistableScripts,d=ea(n),_=c.get(d);_||(_=l.querySelector(Rl(d)),_||(n=m({src:n,async:!0,type:"module"},s),(s=Cn.get(d))&&ed(n,s),_=l.createElement("script"),_e(_),we(_,"link",n),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(d,_))}}function G0(n,s,l,c){var d=(d=ut.current)?wu(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ta(l.href),l=vr(d).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=ta(l.href);var _=vr(d).hoistableStyles,x=_.get(n);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,x),(_=d.querySelector(wl(n)))&&!_._p&&(x.instance=_,x.state.loading=5),Cn.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Cn.set(n,l),_||lS(d,n,l,x.state))),s&&c===null)throw Error(i(528,""));return x}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ea(l),l=vr(d).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ta(n){return'href="'+_n(n)+'"'}function wl(n){return'link[rel="stylesheet"]['+n+"]"}function P0(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function lS(n,s,l,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),we(s,"link",l),_e(s),n.head.appendChild(s))}function ea(n){return'[src="'+_n(n)+'"]'}function Rl(n){return"script[async]"+n}function U0(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return s.instance=c,_e(c),c;var d=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_e(c),we(c,"style",d),Ru(c,l.precedence,n),s.instance=c;case"stylesheet":d=ta(l.href);var _=n.querySelector(wl(d));if(_)return s.state.loading|=4,s.instance=_,_e(_),_;c=P0(l),(d=Cn.get(d))&&td(c,d),_=(n.ownerDocument||n).createElement("link"),_e(_);var x=_;return x._p=new Promise(function(C,D){x.onload=C,x.onerror=D}),we(_,"link",c),s.state.loading|=4,Ru(_,l.precedence,n),s.instance=_;case"script":return _=ea(l.src),(d=n.querySelector(Rl(_)))?(s.instance=d,_e(d),d):(c=l,(d=Cn.get(_))&&(c=m({},l),ed(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),_e(d),we(d,"link",c),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ru(c,l.precedence,n));return s.instance}function Ru(n,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,_=d,x=0;x<c.length;x++){var C=c[x];if(C.dataset.precedence===s)_=C;else if(_!==d)break}_?_.parentNode.insertBefore(n,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function td(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ed(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Au=null;function Y0(n,s,l){if(Au===null){var c=new Map,d=Au=new Map;d.set(l,c)}else d=Au,c=d.get(l),c||(c=new Map,d.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),d=0;d<l.length;d++){var _=l[d];if(!(_[Pa]||_[Zt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(s)||"";x=n+x;var C=c.get(x);C?C.push(_):c.set(x,[_])}}return c}function X0(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function oS(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function B0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Al=null;function uS(){}function cS(n,s,l){if(Al===null)throw Error(i(475));var c=Al;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=ta(l.href),_=n.querySelector(wl(d));if(_){n=_._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Mu.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=_,_e(_);return}_=n.ownerDocument||n,l=P0(l),(d=Cn.get(d))&&td(l,d),_=_.createElement("link"),_e(_);var x=_;x._p=new Promise(function(C,D){x.onload=C,x.onerror=D}),we(_,"link",l),s.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Mu.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function hS(){if(Al===null)throw Error(i(475));var n=Al;return n.stylesheets&&n.count===0&&nd(n,n.stylesheets),0<n.count?function(s){var l=setTimeout(function(){if(n.stylesheets&&nd(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(l)}}:null}function Mu(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Du=null;function nd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Du=new Map,s.forEach(fS,n),Du=null,Mu.call(n))}function fS(n,s){if(!(s.state.loading&4)){var l=Du.get(n);if(l)var c=l.get(null);else{l=new Map,Du.set(n,l);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<d.length;_++){var x=d[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),c=x)}c&&l.set(null,c)}d=s.instance,x=d.getAttribute("data-precedence"),_=l.get(x)||c,_===c&&l.set(null,d),l.set(x,d),this.count++,c=Mu.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),_?_.parentNode.insertBefore(d,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Ml={$$typeof:O,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function dS(n,s,l,c,d,_,x,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function H0(n,s,l,c,d,_,x,C,D,G,q,Q){return n=new dS(n,s,l,x,C,D,G,Q),s=1,_===!0&&(s|=24),_=an(3,null,null,s),n.current=_,_.stateNode=n,s=kh(),s.refCount++,n.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:s},Ph(_),n}function V0(n){return n?(n=Or,n):Or}function Z0(n,s,l,c,d,_){d=V0(d),c.context===null?c.context=d:c.pendingContext=d,c=ns(s),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=is(n,c,s),l!==null&&(hn(l,n,s),rl(l,n,s))}function q0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function id(n,s){q0(n,s),(n=n.alternate)&&q0(n,s)}function K0(n){if(n.tag===13){var s=Lr(n,67108864);s!==null&&hn(s,n,67108864),id(n,67108864)}}var Lu=!0;function gS(n,s,l,c){var d=I.T;I.T=null;var _=Z.p;try{Z.p=2,sd(n,s,l,c)}finally{Z.p=_,I.T=d}}function mS(n,s,l,c){var d=I.T;I.T=null;var _=Z.p;try{Z.p=8,sd(n,s,l,c)}finally{Z.p=_,I.T=d}}function sd(n,s,l,c){if(Lu){var d=rd(c);if(d===null)Hf(n,s,c,Ou,l),Q0(n,c);else if(yS(d,n,s,l,c))c.stopPropagation();else if(Q0(n,c),s&4&&-1<_S.indexOf(n)){for(;d!==null;){var _=xr(d);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=Kn(_.pendingLanes);if(x!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var D=1<<31-Ae(x);C.entanglements[1]|=D,x&=~D}ti(_),(Gt&6)===0&&(mu=Ce()+500,Sl(0))}}break;case 13:C=Lr(_,2),C!==null&&hn(C,_,2),yu(),id(_,2)}if(_=rd(c),_===null&&Hf(n,s,c,Ou,l),_===d)break;d=_}d!==null&&c.stopPropagation()}else Hf(n,s,c,null,l)}}function rd(n){return n=uh(n),ad(n)}var Ou=null;function ad(n){if(Ou=null,n=pr(n),n!==null){var s=o(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=u(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ou=n,null}function W0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zi()){case qi:return 2;case Vn:return 8;case On:case Ki:return 32;case se:return 268435456;default:return 32}default:return 32}}var ld=!1,_s=null,ys=null,ps=null,Dl=new Map,Ll=new Map,xs=[],_S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q0(n,s){switch(n){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Dl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(s.pointerId)}}function Ol(n,s,l,c,d,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[d]},s!==null&&(s=xr(s),s!==null&&K0(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function yS(n,s,l,c,d){switch(s){case"focusin":return _s=Ol(_s,n,s,l,c,d),!0;case"dragenter":return ys=Ol(ys,n,s,l,c,d),!0;case"mouseover":return ps=Ol(ps,n,s,l,c,d),!0;case"pointerover":var _=d.pointerId;return Dl.set(_,Ol(Dl.get(_)||null,n,s,l,c,d)),!0;case"gotpointercapture":return _=d.pointerId,Ll.set(_,Ol(Ll.get(_)||null,n,s,l,c,d)),!0}return!1}function $0(n){var s=pr(n.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){n.blockedOn=s,Be(n.priority,function(){if(l.tag===13){var c=cn();c=In(c);var d=Lr(l,c);d!==null&&hn(d,l,c),id(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nu(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=rd(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);oh=c,l.target.dispatchEvent(c),oh=null}else return s=xr(l),s!==null&&K0(s),n.blockedOn=l,!1;s.shift()}return!0}function J0(n,s,l){Nu(n)&&l.delete(s)}function pS(){ld=!1,_s!==null&&Nu(_s)&&(_s=null),ys!==null&&Nu(ys)&&(ys=null),ps!==null&&Nu(ps)&&(ps=null),Dl.forEach(J0),Ll.forEach(J0)}function Iu(n,s){n.blockedOn===s&&(n.blockedOn=null,ld||(ld=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pS)))}var ju=null;function tp(n){ju!==n&&(ju=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ju===n&&(ju=null);for(var s=0;s<n.length;s+=3){var l=n[s],c=n[s+1],d=n[s+2];if(typeof c!="function"){if(ad(c||l)===null)continue;break}var _=xr(l);_!==null&&(n.splice(s,3),s-=3,af(_,{pending:!0,data:d,method:l.method,action:c},c,d))}}))}function Nl(n){function s(D){return Iu(D,n)}_s!==null&&Iu(_s,n),ys!==null&&Iu(ys,n),ps!==null&&Iu(ps,n),Dl.forEach(s),Ll.forEach(s);for(var l=0;l<xs.length;l++){var c=xs[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<xs.length&&(l=xs[0],l.blockedOn===null);)$0(l),l.blockedOn===null&&xs.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var d=l[c],_=l[c+1],x=d[Tt]||null;if(typeof _=="function")x||tp(l);else if(x){var C=null;if(_&&_.hasAttribute("formAction")){if(d=_,x=_[Tt]||null)C=x.formAction;else if(ad(d)!==null)continue}else C=x.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),tp(l)}}}function od(n){this._internalRoot=n}ku.prototype.render=od.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=cn();Z0(l,c,n,s,null,null)},ku.prototype.unmount=od.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Z0(n.current,2,null,n,null,null),yu(),s[ee]=null}};function ku(n){this._internalRoot=n}ku.prototype.unstable_scheduleHydration=function(n){if(n){var s=nn();n={blockedOn:null,target:n,priority:s};for(var l=0;l<xs.length&&s!==0&&s<xs[l].priority;l++);xs.splice(l,0,n),l===0&&$0(n)}};var ep=t.version;if(ep!=="19.1.1")throw Error(i(527,ep,"19.1.1"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var xS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{Zn=Fu.inject(xS),ge=Fu}catch{}}return jl.createRoot=function(n,s){if(!a(n))throw Error(i(299));var l=!1,c="",d=yy,_=py,x=xy,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=H0(n,1,!1,null,null,l,c,d,_,x,C,null),n[ee]=s.current,Bf(n),new od(s)},jl.hydrateRoot=function(n,s,l){if(!a(n))throw Error(i(299));var c=!1,d="",_=yy,x=py,C=xy,D=null,G=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&(G=l.formState)),s=H0(n,1,!0,s,l??null,c,d,_,x,C,D,G),s.context=V0(null),l=s.current,c=cn(),c=In(c),d=ns(c),d.callback=null,is(l,d,c),l=c,s.current.lanes=l,Nn(s,l),ti(s),n[ee]=s.current,Bf(n),new ku(s)},jl.version="19.1.1",jl}var hp;function MS(){if(hp)return hd.exports;hp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hd.exports=AS(),hd.exports}var DS=MS();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fp="popstate";function LS(r={}){function t(i,a){let{pathname:o,search:u,hash:h}=i.location;return Kd("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Jl(a)}return NS(t,e,null,r)}function te(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function li(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OS(){return Math.random().toString(36).substring(2,10)}function dp(r,t){return{usr:r.state,key:r.key,idx:t}}function Kd(r,t,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?La(t):t,state:e,key:t&&t.key||i||OS()}}function Jl({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function La(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substring(i),r=r.substring(0,i)),r&&(t.pathname=r)}return t}function NS(r,t,e,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,h="POP",f=null,g=m();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function m(){return(u.state||{idx:null}).idx}function y(){h="POP";let T=m(),b=T==null?null:T-g;g=T,f&&f({action:h,location:w.location,delta:b})}function p(T,b){h="PUSH";let R=Kd(w.location,T,b);g=m()+1;let O=dp(R,g),A=w.createHref(R);try{u.pushState(O,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(A)}o&&f&&f({action:h,location:w.location,delta:1})}function v(T,b){h="REPLACE";let R=Kd(w.location,T,b);g=m();let O=dp(R,g),A=w.createHref(R);u.replaceState(O,"",A),o&&f&&f({action:h,location:w.location,delta:0})}function S(T){return IS(T)}let w={get action(){return h},get location(){return r(a,u)},listen(T){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(fp,y),f=T,()=>{a.removeEventListener(fp,y),f=null}},createHref(T){return t(a,T)},createURL:S,encodeLocation(T){let b=S(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:v,go(T){return u.go(T)}};return w}function IS(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),te(e,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Jl(r);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Tx(r,t,e="/"){return jS(r,t,e,!1)}function jS(r,t,e,i){let a=typeof t=="string"?La(t):t,o=Pi(a.pathname||"/",e);if(o==null)return null;let u=wx(r);kS(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let g=ZS(o);h=HS(u[f],g,i)}return h}function wx(r,t=[],e=[],i="",a=!1){let o=(u,h,f=a,g)=>{let m={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&f)return;te(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let y=Ii([i,m.relativePath]),p=e.concat(m);u.children&&u.children.length>0&&(te(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),wx(u.children,t,p,y,f)),!(u.path==null&&!u.index)&&t.push({path:y,score:XS(y,u.index),routesMeta:p})};return r.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let f of Rx(u.path))o(u,h,!0,f)}),t}function Rx(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=Rx(i.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&h.push(...u),h.map(f=>r.startsWith("/")&&f===""?"/":f)}function kS(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:BS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var FS=/^:[\w-]+$/,zS=3,GS=2,PS=1,US=10,YS=-2,gp=r=>r==="*";function XS(r,t){let e=r.split("/"),i=e.length;return e.some(gp)&&(i+=YS),t&&(i+=GS),e.filter(a=>!gp(a)).reduce((a,o)=>a+(FS.test(o)?zS:o===""?PS:US),i)}function BS(r,t){return r.length===t.length&&r.slice(0,-1).every((i,a)=>i===t[a])?r[r.length-1]-t[t.length-1]:0}function HS(r,t,e=!1){let{routesMeta:i}=r,a={},o="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],g=h===i.length-1,m=o==="/"?t:t.slice(o.length)||"/",y=ac({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},m),p=f.route;if(!y&&g&&e&&!i[i.length-1].route.index&&(y=ac({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!y)return null;Object.assign(a,y.params),u.push({params:a,pathname:Ii([o,y.pathname]),pathnameBase:QS(Ii([o,y.pathnameBase])),route:p}),y.pathnameBase!=="/"&&(o=Ii([o,y.pathnameBase]))}return u}function ac(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=VS(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((g,{paramName:m,isOptional:y},p)=>{if(m==="*"){let S=h[p]||"";u=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=h[p];return y&&!v?g[m]=void 0:g[m]=(v||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:u,pattern:r}}function VS(r,t=!1,e=!0){li(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function ZS(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return li(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Pi(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}function qS(r,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof r=="string"?La(r):r;return{pathname:e?e.startsWith("/")?e:KS(e,t):t,search:$S(i),hash:JS(a)}}function KS(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function md(r,t,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WS(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Ax(r){let t=WS(r);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Mx(r,t,e,i=!1){let a;typeof r=="string"?a=La(r):(a={...r},te(!a.pathname||!a.pathname.includes("?"),md("?","pathname","search",a)),te(!a.pathname||!a.pathname.includes("#"),md("#","pathname","hash",a)),te(!a.search||!a.search.includes("#"),md("#","search","hash",a)));let o=r===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=e;else{let y=t.length-1;if(!i&&u.startsWith("..")){let p=u.split("/");for(;p[0]==="..";)p.shift(),y-=1;a.pathname=p.join("/")}h=y>=0?t[y]:"/"}let f=qS(a,h),g=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(g||m)&&(f.pathname+="/"),f}var Ii=r=>r.join("/").replace(/\/\/+/g,"/"),QS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$S=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,JS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Dx=["POST","PUT","PATCH","DELETE"];new Set(Dx);var eC=["GET",...Dx];new Set(eC);var Oa=j.createContext(null);Oa.displayName="DataRouter";var Rc=j.createContext(null);Rc.displayName="DataRouterState";j.createContext(!1);var Lx=j.createContext({isTransitioning:!1});Lx.displayName="ViewTransition";var nC=j.createContext(new Map);nC.displayName="Fetchers";var iC=j.createContext(null);iC.displayName="Await";var oi=j.createContext(null);oi.displayName="Navigation";var go=j.createContext(null);go.displayName="Location";var Bi=j.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var pg=j.createContext(null);pg.displayName="RouteError";function sC(r,{relative:t}={}){te(mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=j.useContext(oi),{hash:a,pathname:o,search:u}=_o(r,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:Ii([e,o])),i.createHref({pathname:h,search:u,hash:a})}function mo(){return j.useContext(go)!=null}function hr(){return te(mo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(go).location}var Ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nx(r){j.useContext(oi).static||j.useLayoutEffect(r)}function Ac(){let{isDataRoute:r}=j.useContext(Bi);return r?yC():rC()}function rC(){te(mo(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(Oa),{basename:t,navigator:e}=j.useContext(oi),{matches:i}=j.useContext(Bi),{pathname:a}=hr(),o=JSON.stringify(Ax(i)),u=j.useRef(!1);return Nx(()=>{u.current=!0}),j.useCallback((f,g={})=>{if(li(u.current,Ox),!u.current)return;if(typeof f=="number"){e.go(f);return}let m=Mx(f,JSON.parse(o),a,g.relative==="path");r==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ii([t,m.pathname])),(g.replace?e.replace:e.push)(m,g.state,g)},[t,e,o,a,r])}j.createContext(null);function _o(r,{relative:t}={}){let{matches:e}=j.useContext(Bi),{pathname:i}=hr(),a=JSON.stringify(Ax(e));return j.useMemo(()=>Mx(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function aC(r,t){return Ix(r,t)}function Ix(r,t,e,i,a){te(mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(oi),{matches:u}=j.useContext(Bi),h=u[u.length-1],f=h?h.params:{},g=h?h.pathname:"/",m=h?h.pathnameBase:"/",y=h&&h.route;{let R=y&&y.path||"";jx(g,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let p=hr(),v;if(t){let R=typeof t=="string"?La(t):t;te(m==="/"||R.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=p;let S=v.pathname||"/",w=S;if(m!=="/"){let R=m.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=Tx(r,{pathname:w});li(y||T!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),li(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=hC(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},f,R.params),pathname:Ii([m,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:Ii([m,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),u,e,i,a);return t&&b?j.createElement(go.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},b):b}function lC(){let r=_C(),t=tC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),e?j.createElement("pre",{style:a},e):null,u)}var oC=j.createElement(lC,null),uC=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.unstable_onError?this.props.unstable_onError(r,t):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?j.createElement(Bi.Provider,{value:this.props.routeContext},j.createElement(pg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cC({routeContext:r,match:t,children:e}){let i=j.useContext(Oa);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Bi.Provider,{value:r},e)}function hC(r,t=[],e=null,i=null,a=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,u=e?.errors;if(u!=null){let g=o.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);te(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,f=-1;if(e)for(let g=0;g<o.length;g++){let m=o[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:y,errors:p}=e,v=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||v){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((g,m,y)=>{let p,v=!1,S=null,w=null;e&&(p=u&&m.route.id?u[m.route.id]:void 0,S=m.route.errorElement||oC,h&&(f<0&&y===0?(jx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):f===y&&(v=!0,w=m.route.hydrateFallbackElement||null)));let T=t.concat(o.slice(0,y+1)),b=()=>{let R;return p?R=S:v?R=w:m.route.Component?R=j.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=g,j.createElement(cC,{match:m,routeContext:{outlet:g,matches:T,isDataRoute:e!=null},children:R})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?j.createElement(uC,{location:e.location,revalidation:e.revalidation,component:S,error:p,children:b(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:i}):b()},null)}function xg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fC(r){let t=j.useContext(Oa);return te(t,xg(r)),t}function dC(r){let t=j.useContext(Rc);return te(t,xg(r)),t}function gC(r){let t=j.useContext(Bi);return te(t,xg(r)),t}function vg(r){let t=gC(r),e=t.matches[t.matches.length-1];return te(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function mC(){return vg("useRouteId")}function _C(){let r=j.useContext(pg),t=dC("useRouteError"),e=vg("useRouteError");return r!==void 0?r:t.errors?.[e]}function yC(){let{router:r}=fC("useNavigate"),t=vg("useNavigate"),e=j.useRef(!1);return Nx(()=>{e.current=!0}),j.useCallback(async(a,o={})=>{li(e.current,Ox),e.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:t,...o}))},[r,t])}var mp={};function jx(r,t,e){!t&&!mp[r]&&(mp[r]=!0,li(!1,e))}j.memo(pC);function pC({routes:r,future:t,state:e,unstable_onError:i}){return Ix(r,void 0,e,i,t)}function ua(r){te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:r="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:o=!1}){te(!mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof e=="string"&&(e=La(e));let{pathname:f="/",search:g="",hash:m="",state:y=null,key:p="default"}=e,v=j.useMemo(()=>{let S=Pi(f,u);return S==null?null:{location:{pathname:S,search:g,hash:m,state:y,key:p},navigationType:i}},[u,f,g,m,y,p,i]);return li(v!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:j.createElement(oi.Provider,{value:h},j.createElement(go.Provider,{children:t,value:v}))}function vC({children:r,location:t}){return aC(Wd(r),t)}function Wd(r,t=[]){let e=[];return j.Children.forEach(r,(i,a)=>{if(!j.isValidElement(i))return;let o=[...t,a];if(i.type===j.Fragment){e.push.apply(e,Wd(i.props.children,o));return}te(i.type===ua,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),te(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Wd(i.props.children,o)),e.push(u)}),e}var sc="get",rc="application/x-www-form-urlencoded";function Mc(r){return r!=null&&typeof r.tagName=="string"}function EC(r){return Mc(r)&&r.tagName.toLowerCase()==="button"}function SC(r){return Mc(r)&&r.tagName.toLowerCase()==="form"}function CC(r){return Mc(r)&&r.tagName.toLowerCase()==="input"}function bC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function TC(r,t){return r.button===0&&(!t||t==="_self")&&!bC(r)}var zu=null;function wC(){if(zu===null)try{new FormData(document.createElement("form"),0),zu=!1}catch{zu=!0}return zu}var RC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _d(r){return r!=null&&!RC.has(r)?(li(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rc}"`),null):r}function AC(r,t){let e,i,a,o,u;if(SC(r)){let h=r.getAttribute("action");i=h?Pi(h,t):null,e=r.getAttribute("method")||sc,a=_d(r.getAttribute("enctype"))||rc,o=new FormData(r)}else if(EC(r)||CC(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||h.getAttribute("action");if(i=f?Pi(f,t):null,e=r.getAttribute("formmethod")||h.getAttribute("method")||sc,a=_d(r.getAttribute("formenctype"))||_d(h.getAttribute("enctype"))||rc,o=new FormData(h,r),!wC()){let{name:g,type:m,value:y}=r;if(m==="image"){let p=g?`${g}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else g&&o.append(g,y)}}else{if(Mc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=sc,i=null,a=rc,u=r}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eg(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function MC(r,t,e){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&Pi(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function DC(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function OC(r,t,e){let i=await Promise.all(r.map(async a=>{let o=t.routes[a.route.id];if(o){let u=await DC(o,e);return u.links?u.links():[]}return[]}));return kC(i.flat(1).filter(LC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _p(r,t,e,i,a,o){let u=(f,g)=>e[g]?f.route.id!==e[g].route.id:!0,h=(f,g)=>e[g].pathname!==f.pathname||e[g].route.path?.endsWith("*")&&e[g].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,g)=>u(f,g)||h(f,g)):o==="data"?t.filter((f,g)=>{let m=i.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(u(f,g)||h(f,g))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function NC(r,t,{includeHydrateFallback:e}={}){return IC(r.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function IC(r){return[...new Set(r)]}function jC(r){let t={},e=Object.keys(r).sort();for(let i of e)t[i]=r[i];return t}function kC(r,t){let e=new Set;return new Set(t),r.reduce((i,a)=>{let o=JSON.stringify(jC(a));return e.has(o)||(e.add(o),i.push({key:o,link:a})),i},[])}function kx(){let r=j.useContext(Oa);return Eg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function FC(){let r=j.useContext(Rc);return Eg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Sg=j.createContext(void 0);Sg.displayName="FrameworkContext";function Fx(){let r=j.useContext(Sg);return Eg(r,"You must render this element inside a <HydratedRouter> element"),r}function zC(r,t){let e=j.useContext(Sg),[i,a]=j.useState(!1),[o,u]=j.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:g,onMouseLeave:m,onTouchStart:y}=t,p=j.useRef(null);j.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let w=b=>{b.forEach(R=>{u(R.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[r]),j.useEffect(()=>{if(i){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[i]);let v=()=>{a(!0)},S=()=>{a(!1),u(!1)};return e?r!=="intent"?[o,p,{}]:[o,p,{onFocus:kl(h,v),onBlur:kl(f,S),onMouseEnter:kl(g,v),onMouseLeave:kl(m,S),onTouchStart:kl(y,v)}]:[!1,p,{}]}function kl(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function GC({page:r,...t}){let{router:e}=kx(),i=j.useMemo(()=>Tx(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?j.createElement(UC,{page:r,matches:i,...t}):null}function PC(r){let{manifest:t,routeModules:e}=Fx(),[i,a]=j.useState([]);return j.useEffect(()=>{let o=!1;return OC(r,t,e).then(u=>{o||a(u)}),()=>{o=!0}},[r,t,e]),i}function UC({page:r,matches:t,...e}){let i=hr(),{manifest:a,routeModules:o}=Fx(),{basename:u}=kx(),{loaderData:h,matches:f}=FC(),g=j.useMemo(()=>_p(r,t,f,a,i,"data"),[r,t,f,a,i]),m=j.useMemo(()=>_p(r,t,f,a,i,"assets"),[r,t,f,a,i]),y=j.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let S=new Set,w=!1;if(t.forEach(b=>{let R=a.routes[b.route.id];!R||!R.hasLoader||(!g.some(O=>O.route.id===b.route.id)&&b.route.id in h&&o[b.route.id]?.shouldRevalidate||R.hasClientLoader?w=!0:S.add(b.route.id))}),S.size===0)return[];let T=MC(r,u,"data");return w&&S.size>0&&T.searchParams.set("_routes",t.filter(b=>S.has(b.route.id)).map(b=>b.route.id).join(",")),[T.pathname+T.search]},[u,h,i,a,g,t,r,o]),p=j.useMemo(()=>NC(m,a),[m,a]),v=PC(m);return j.createElement(j.Fragment,null,y.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),p.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),v.map(({key:S,link:w})=>j.createElement("link",{key:S,nonce:e.nonce,...w})))}function YC(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zx&&(window.__reactRouterVersion="7.9.3")}catch{}function XC({basename:r,children:t,window:e}){let i=j.useRef();i.current==null&&(i.current=LS({window:e,v5Compat:!0}));let a=i.current,[o,u]=j.useState({action:a.action,location:a.location}),h=j.useCallback(f=>{j.startTransition(()=>u(f))},[u]);return j.useLayoutEffect(()=>a.listen(h),[a,h]),j.createElement(xC,{basename:r,children:t,location:o.location,navigationType:o.action,navigator:a})}var Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=j.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:h,target:f,to:g,preventScrollReset:m,viewTransition:y,...p},v){let{basename:S}=j.useContext(oi),w=typeof g=="string"&&Gx.test(g),T,b=!1;if(typeof g=="string"&&w&&(T=g,zx))try{let V=new URL(window.location.href),et=g.startsWith("//")?new URL(V.protocol+g):new URL(g),lt=Pi(et.pathname,S);et.origin===V.origin&&lt!=null?g=lt+et.search+et.hash:b=!0}catch{li(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=sC(g,{relative:a}),[O,A,L]=zC(i,p),X=ZC(g,{replace:u,state:h,target:f,preventScrollReset:m,relative:a,viewTransition:y});function B(V){t&&t(V),V.defaultPrevented||X(V)}let H=j.createElement("a",{...p,...L,href:T||R,onClick:b||o?t:B,ref:YC(v,A),target:f,"data-discover":!w&&e==="render"?"true":void 0});return O&&!w?j.createElement(j.Fragment,null,H,j.createElement(GC,{page:R})):H});Pe.displayName="Link";var BC=j.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:h,children:f,...g},m){let y=_o(u,{relative:g.relative}),p=hr(),v=j.useContext(Rc),{navigator:S,basename:w}=j.useContext(oi),T=v!=null&&$C(y)&&h===!0,b=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,R=p.pathname,O=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(R=R.toLowerCase(),O=O?O.toLowerCase():null,b=b.toLowerCase()),O&&w&&(O=Pi(O,w)||O);const A=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let L=R===b||!a&&R.startsWith(b)&&R.charAt(A)==="/",X=O!=null&&(O===b||!a&&O.startsWith(b)&&O.charAt(b.length)==="/"),B={isActive:L,isPending:X,isTransitioning:T},H=L?t:void 0,V;typeof i=="function"?V=i(B):V=[i,L?"active":null,X?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let et=typeof o=="function"?o(B):o;return j.createElement(Pe,{...g,"aria-current":H,className:V,ref:m,style:et,to:u,viewTransition:h},typeof f=="function"?f(B):f)});BC.displayName="NavLink";var HC=j.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:o,method:u=sc,action:h,onSubmit:f,relative:g,preventScrollReset:m,viewTransition:y,...p},v)=>{let S=WC(),w=QC(h,{relative:g}),T=u.toLowerCase()==="get"?"get":"post",b=typeof h=="string"&&Gx.test(h),R=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let A=O.nativeEvent.submitter,L=A?.getAttribute("formmethod")||u;S(A||O.currentTarget,{fetcherKey:t,method:L,navigate:e,replace:a,state:o,relative:g,preventScrollReset:m,viewTransition:y})};return j.createElement("form",{ref:v,method:T,action:w,onSubmit:i?f:R,...p,"data-discover":!b&&r==="render"?"true":void 0})});HC.displayName="Form";function VC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(r){let t=j.useContext(Oa);return te(t,VC(r)),t}function ZC(r,{target:t,replace:e,state:i,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=Ac(),f=hr(),g=_o(r,{relative:o});return j.useCallback(m=>{if(TC(m,t)){m.preventDefault();let y=e!==void 0?e:Jl(f)===Jl(g);h(r,{replace:y,state:i,preventScrollReset:a,relative:o,viewTransition:u})}},[f,h,g,e,i,t,r,a,o,u])}var qC=0,KC=()=>`__${String(++qC)}__`;function WC(){let{router:r}=Px("useSubmit"),{basename:t}=j.useContext(oi),e=mC();return j.useCallback(async(i,a={})=>{let{action:o,method:u,encType:h,formData:f,body:g}=AC(i,t);if(a.navigate===!1){let m=a.fetcherKey||KC();await r.fetch(m,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await r.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,t,e])}function QC(r,{relative:t}={}){let{basename:e}=j.useContext(oi),i=j.useContext(Bi);te(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={..._o(r||".",{relative:t})},u=hr();if(r==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(m=>m==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let m=h.toString();o.search=m?`?${m}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Ii([e,o.pathname])),Jl(o)}function $C(r,{relative:t}={}){let e=j.useContext(Lx);te(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Px("useViewTransitionState"),a=_o(r,{relative:t});if(!e.isTransitioning)return!1;let o=Pi(e.currentLocation.pathname,i)||e.currentLocation.pathname,u=Pi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return ac(a.pathname,u)!=null||ac(a.pathname,o)!=null}const Dc="/assets/logo-BEQen25q.svg",Ux=(r,t,e=30)=>{const i=new Date;i.setTime(i.getTime()+e*24*60*60*1e3),document.cookie=`${r}=${t};expires=${i.toUTCString()};path=/`},dn=r=>{const e=`; ${document.cookie}`.split(`; ${r}=`);if(e.length===2)return e.pop().split(";").shift()},Oi=r=>{document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`},lc=r=>{if(!r)return!1;try{return r.split(".").length===3?!0:r.length>10}catch{return!1}},Bn="/api";async function JC(r){try{const t=await fetch(`${Bn}/users/profile?token=${encodeURIComponent(r)}`);if(!t.ok)return!1;const e=t.headers.get("content-type");return e&&e.includes("application/json")?(await t.json()).status==="success":!1}catch(t){return console.error("Token validation error:",t),!1}}async function Yx(r,t){try{const e=await fetch(`${Bn}/get_token?login=${encodeURIComponent(r)}&password=${encodeURIComponent(t)}`);if(!e.ok){const a=await e.text();throw new Error(a||`HTTP error! status: ${e.status}`)}const i=await e.json();if(i.status==="success")return i.token;throw new Error(i.message||"Failed to get token")}catch(e){throw console.error("Error getting token:",e),e}}async function tb(r,t,e,i){return fetch(`${Bn}/add_user?login=${encodeURIComponent(r)}&password=${encodeURIComponent(t)}&first_name=${encodeURIComponent(e)}&last_name=${encodeURIComponent(i)}`,{method:"POST"})}async function Xx(r){return fetch(`${Bn}/users/profile?token=${encodeURIComponent(r)}`)}async function eb(r,t,e){const i=typeof e=="string"?e:JSON.stringify(e);return fetch(`${Bn}/fields/save?token=${encodeURIComponent(r)}&field_name=${encodeURIComponent(t)}&area_of_interest=${encodeURIComponent(i)}`,{method:"POST"})}async function nb(r){return fetch(`${Bn}/fields/list?token=${encodeURIComponent(r)}`)}async function ib(r,t){return fetch(`${Bn}/fields/${encodeURIComponent(r)}?token=${encodeURIComponent(t)}`,{method:"DELETE"})}async function yp(r,t,e,i){let a=`${Bn}/analysis/perform?token=${encodeURIComponent(r)}&start_date=${encodeURIComponent(t)}&end_date=${encodeURIComponent(e)}`;return i.lon&&i.lat&&i.radius_km?a+=`&lon=${encodeURIComponent(i.lon)}&lat=${encodeURIComponent(i.lat)}&radius_km=${encodeURIComponent(i.radius_km)}`:i.polygonCoords&&(a+=`&polygon_coords=${encodeURIComponent(JSON.stringify(i.polygonCoords))}`),fetch(a,{method:"POST"})}async function sb(r){return fetch(`${Bn}/analysis/list?token=${encodeURIComponent(r)}`)}async function rb(r,t){return fetch(`${Bn}/analysis/${encodeURIComponent(r)}?token=${encodeURIComponent(t)}`)}async function ab(r,t){return fetch(`${Bn}/analysis/${encodeURIComponent(r)}/recommendations?token=${encodeURIComponent(t)}`)}function lb({isTransparent:r}){const[t,e]=j.useState(null);let i=r?"text-[var(--neutral-color)] hover:text-[var(--accent-light-color)]":"text-[var(--neutral-dark-color)] hover:text-[var(--accent-dark-color)]",a=r?"stroke-[var(--neutral-color)] group-hover:stroke-[var(--accent-color)]":"stroke-[var(--neutral-dark-color)] group-hover:stroke-[var(--accent-dark-color)]";return j.useEffect(()=>{(async()=>{const u=dn("token");if(u)try{const h=await Xx(u);if(h.ok){const f=await h.json();f.status==="success"?e(f.user):e(null)}else e(null)}catch(h){console.error("Ошибка при получении профиля:",h),e(null)}else e(null)})()},[]),E.jsx("header",{id:"header",className:`shadow-md fixed w-dvw h-1/14 z-20 ${r?"bg-[var(--header-blur)] backdrop-blur-xs":"bg-[var(--neutral-color)]"}`,children:E.jsx("div",{className:"px-32 h-full",children:E.jsxs("div",{className:"flex items-center justify-between h-full",children:[E.jsxs("div",{className:"flex flex-row flex-shrink-0 h-full items-center",children:[E.jsx(Pe,{to:"/",className:"flex items-center h-full",children:E.jsx("img",{src:Dc,className:"max-h-full"})}),E.jsx(Pe,{to:"/",className:`text-4xl poppins-medium mt-2
                        ${r?"text-[var(--neutral-color)]":"text-[var(--neutral-dark-color)]"}`,children:"FieldScan"})]}),E.jsxs("nav",{className:"hidden md:flex gap-x-16 text-center",children:[E.jsx("a",{href:"#main",className:`${i} text-3xl transition-colors duration-100`,children:"Главная"}),E.jsx("a",{href:"#about-us",className:`${i} text-3xl transition-colors duration-100"`,children:"О нас"}),E.jsx("a",{href:"#advantages",className:`${i} text-3xl transition-colors duration-100"`,children:"Преимущества"})]}),E.jsx("div",{className:"flex items-center gap-x-16",children:t?E.jsx(E.Fragment,{children:E.jsx(Pe,{to:"/profile",className:`group ${i} text-3xl transition-colors duration-100`,children:E.jsxs("div",{className:"flex flex-row items-center",children:[E.jsxs("p",{children:[t.first_name," ",t.last_name]}),E.jsx("div",{className:"w-20 h-20 bg-transparent flex items-center justify-center",children:E.jsxs("svg",{width:"30",height:"30",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",className:`${a} transition-colors duration-100`,children:[E.jsx("circle",{cx:"12",cy:"8",r:"4"}),E.jsx("path",{d:"M4 20c0-4 8-4 8-4s8 0 8 4"})]})})]})})}):E.jsxs(E.Fragment,{children:[E.jsx(Pe,{to:"/login",className:`${i} text-3xl transition-colors duration-100"`,children:"Войти"}),E.jsx(Pe,{to:"/registration",className:`${i} text-3xl transition-colors duration-100"`,children:"Зарегистрироваться"})]})})]})})})}function Gu({title:r,description:t,image:e}){return E.jsx(E.Fragment,{children:E.jsx("div",{className:"bg-[var(--neutral-dark-color)] h-[60rem] w-[50rem] rounded-[8rem] shadow-2xl pt-16",children:E.jsxs("div",{className:"flex flex-col h-full",children:[E.jsx("h3",{className:"text-4xl lg:text-6xl text-center text-[var(--neutral-color)] font-bold",children:r}),E.jsx("p",{className:"text-2xl lg:text-3xl text-[var(--neutral-secondary-color)] m-12 tracking-wider",children:t}),E.jsx("div",{className:"flex-grow",children:E.jsx("img",{loading:"lazy",src:e,alt:r,className:"w-full h-full object-cover rounded-b-[8rem]"})})]})})})}function ob({title:r,description:t,image:e}){return E.jsx("div",{className:"bg-[var(--neutral-secondary-color)] h-[40vh] min-h-[400px] w-[70vw] max-w-6xl rounded-[8rem] shadow-2xl overflow-hidden",children:E.jsxs("div",{className:"flex h-full",children:[E.jsxs("div",{className:"flex flex-col justify-center py-8 px-12 w-7/12",children:[E.jsx("h3",{className:"text-3xl lg:text-4xl text-[var(--neutral-dark-color)] font-bold mb-6 text-start",children:r}),E.jsx("p",{className:"text-xl lg:text-2xl text-[var(--neutral-dark-color)] leading-tighter text-start",children:t})]}),E.jsx("div",{className:"w-5/12",children:E.jsx("img",{loading:"lazy",src:e,alt:r,className:"w-full h-full object-cover"})})]})})}const ub="/assets/card1_image-Cja_731I.jpg",cb="/assets/card2_image-rRG32aYf.jpg",hb="/assets/card3_image-D1HPZplG.jpg",fb="/assets/card4_image-D1Kk88aI.jpg",db="/assets/carousel_image1-D-KsvwdD.jpg",gb="/assets/carousel_image2-CS3r9Tz8.jpg",mb="/assets/carousel_image3-8JyMvcKF.jpg",_b="/assets/carousel_image4-DE-G_3YI.jpg";function yb(){const[r,t]=j.useState(!1);return j.useEffect(()=>{(()=>{const i=dn("token");t(!!i)})()},[]),E.jsx("div",{id:"main",className:"bg-[url(assets/hero_image.jpg)] bg-cover h-240 bg-center relative",children:E.jsxs("div",{className:"bg-[var(--hero-shadow)] h-full w-full pt-48 px-48 flex flex-col",children:[E.jsx("h1",{className:"text-8xl font-bold text-[var(--neutral-color)] tracking-tight",children:"Аналитика поля одним кликом"}),E.jsxs("p",{className:"text-3xl text-[var(--neutral-color)] mt-8 tracking-wider",children:["Просто укажите свой участок на карте — и наш искусственный",E.jsx("br",{}),"интеллект на основе спутниковых снимков мгновенно проведёт",E.jsx("br",{}),"диагностику. Получите готовый отчёт о состоянии почвы,",E.jsx("br",{}),"растительности и потенциальных рисках для вашего урожая."]}),E.jsx("div",{className:"flex-grow flex items-end justify-center pb-48",children:E.jsx(Pe,{to:r?"/profile":"/registration",className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)]
                        transition-[background-color] duration-100 cursor-pointer rounded-full text-5xl px-8 py-6 text-[var(--neutral-color)] shadow-2xl`,children:"Анализировать поле"})})]})})}function pb(){return E.jsx("div",{id:"about-us",className:"bg-[var(--neutral-color)] w-full",children:E.jsx("div",{className:"lg:container mx-auto lg:w-[max(3/4vw, 1000px)] pt-16 pb-32",children:E.jsxs("div",{className:"grid grid-cols-2 grid-rows-auto gap-y-16 gap-x-32",children:[E.jsx("h2",{className:"text-8xl font-bold text-center col-span-2 self-center",children:"О НАС"}),E.jsxs("p",{className:"text-4xl text-start col-span-2 tracking-wider",children:[E.jsx("strong",{children:"Мы создаём будущее сельского хозяйства,"})," где технологии работают на результат каждого фермера. Наша задача — дать вам не просто данные, а ясное понимание состояния ваших полей и конкретные рекомендации для принятия решений. Всё, что для этого нужно, — всего несколько кликов.",E.jsx("br",{}),E.jsx("br",{}),E.jsx("strong",{children:"Весь процесс от выбора поля до готового отчёта — прост и прозрачен"})]}),E.jsxs("div",{className:"row-start-3 col-start-1",children:[E.jsx("h2",{className:"text-9xl text-center text-[var(--neutral-dark-secondary-color)] mb-32 mt-16",children:"ШАГ 1 →"}),E.jsx("div",{className:"flex justify-center",children:E.jsx(Gu,{title:"Получение снимков",description:"Наша система через спутниковые API мгновенно загружает самый свежий снимок выбранной территории. Вам не нужно ждать или искать снимки вручную.",image:cb})})]}),E.jsxs("div",{className:"row-start-3 col-start-2",children:[E.jsx("div",{className:"flex justify-center",children:E.jsx(Gu,{title:"Выбор участка",description:"Отметьте границы вашего участка на интерактивной карте. Это займёт не больше минуты. Никаких сложных карт или файлов — только точные координаты.",image:ub})}),E.jsx("h2",{className:"text-9xl text-center text-[var(--neutral-dark-secondary-color)] mb-32 mt-32",children:"← ШАГ 2"})]}),E.jsxs("div",{className:"row-start-4 col-start-1",children:[E.jsx("h2",{className:"text-9xl text-center text-[var(--neutral-dark-secondary-color)] mb-32 mt-16",children:"ШАГ 3 →"}),E.jsx("div",{className:"flex justify-center",children:E.jsx(Gu,{title:"Подготовка отчета",description:"Вы получаете структурированный отчёт с визуализацией проблемных зон и конкретными советами: где полить, чем обработать и на что обратить внимание.",image:fb})})]}),E.jsxs("div",{className:"row-start-4 col-start-2",children:[E.jsx("div",{className:"flex justify-center",children:E.jsx(Gu,{title:"Анализ снимков",description:"Мощные алгоритмы искусственного интеллекта сканируют каждый пиксель изображения, выявляя проблемы и аномалии: стресс растительности, недостаток влаги, очаги болезней.",image:hb})}),E.jsx("h2",{className:"text-9xl text-center text-[var(--neutral-dark-secondary-color)] mb-32 mt-32",children:"← ШАГ 4"})]})]})})})}function xb(){const[r,t]=j.useState(!1);j.useEffect(()=>{(()=>{const m=dn("token");t(!!m)})()},[]);const e=j.useRef(null),h=[{title:"Предотвращение потерь урожая",description:"Диагностируйте угрозы на самой ранней стадии, когда их ещё не видно глазом. Спасайте урожай, а не констатируйте потери.",image:db},{title:"Простота и доступность",description:"Никакого сложного оборудования и долгого обучения. Анализ поля — в несколько кликов, прямо в вашем браузере.",image:gb},{title:"Круглосуточный мониторинг",description:"Ваши поля под наблюдением 24/7. Спутники работают даже когда вы спите.",image:mb},{title:"Принятие решений на основе данных",description:"Заменяйте догадки точными цифрами. Получайте конкретные рекомендации к действию: где полить, а где обработать от вредителей.",image:_b}],f=[...h,...h,...h];return j.useEffect(()=>{const g=e.current;if(!g)return;let m;const y=.7;let p=0;const v=()=>{p-=y,p<=-g.scrollWidth/3&&(p=0),g.style.transform=`translateX(${p}px)`,m=requestAnimationFrame(v)},S=setTimeout(()=>{m=requestAnimationFrame(v)},100);return()=>{clearTimeout(S),cancelAnimationFrame(m)}},[]),E.jsxs("div",{className:"bg-[var(--neutral-secondary-color)] overflow-hidden",children:[E.jsx("div",{id:"advantages",className:"bg-[var(--neutral-secondary-color)] pt-16",children:E.jsx("h3",{className:"text-8xl text-[var(--neutral-dark-color)] font-bold text-center",children:"ПРЕИМУЩЕСТВА"})}),E.jsxs("div",{className:"relative bg-[var(--neutral-secondary-color)] py-20 overflow-hidden",children:[E.jsx("div",{ref:e,className:"flex space-x-32 transition-transform duration-0",style:{willChange:"transform"},children:f.map((g,m)=>E.jsx("div",{className:"flex-shrink-0",children:E.jsx(ob,{title:g.title,description:g.description,image:g.image})},m))}),E.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-[var(--neutral-secondary-color)] to-transparent z-10"}),E.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-[var(--neutral-secondary-color)] to-transparent z-10"})]}),E.jsx("div",{className:"flex flex-col justify-center items-center bg-[var(--neutral-secondary-color)] pt-16 pb-32",children:E.jsx(Pe,{to:r?"/profile":"/registration",className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)]
                    transition-[background-color] duration-100 cursor-pointer rounded-full text-5xl px-8 py-6 text-[var(--neutral-color)] shadow-2xl`,children:"Анализировать поле"})})]})}function Bx({showNavigation:r=!0,logoutFunction:t=()=>{}}){return E.jsx("footer",{className:"bg-[var(--neutral-dark-color)] pt-16 pb-8",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-8 pb-8 border-b border-[var(--neutral-color)]",children:[E.jsxs("div",{className:"flex flex-col items-start",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[E.jsx("img",{src:Dc,alt:"FieldScan",className:"h-16 w-16"}),E.jsx("span",{className:"text-4xl font-bold text-[var(--accent-color)] tracking-tight",children:"FieldScan"})]}),E.jsx("span",{className:"text-xl text-gray-500 font-medium mb-2",children:"2025 © Все права защищены"}),E.jsx("span",{className:"text-lg text-gray-400",children:"Создано для будущего агроаналитики"})]}),r?E.jsxs("nav",{className:"flex flex-col md:flex-row gap-6 items-center",children:[E.jsx("a",{href:"#main",className:"text-2xl text-[var(--accent-color)] hover:text-[var(--accent-light-color)] transition-[color]",children:"Главная"}),E.jsx("a",{href:"#about-us",className:"text-2xl text-[var(--accent-color)] hover:text-[var(--accent-light-color)] transition-[color]",children:"О нас"}),E.jsx("a",{href:"#advantages",className:"text-2xl text-[var(--accent-color)] hover:text-[var(--accent-light-color)] transition-[color]",children:"Преимущества"})]}):E.jsxs("nav",{className:"flex flex-col md:flex-row gap-6 items-center",children:[E.jsx(Pe,{to:"/",className:"text-2xl text-[var(--accent-color)] hover:text-[var(--accent-light-color)] transition-[color]",children:"Главная"}),E.jsx("button",{onClick:()=>t(),className:"cursor-pointer text-2xl text-[var(--accent-color)] hover:text-[var(--accent-light-color)] transition-[color]",children:"Выйти"})]})]}),E.jsx("div",{className:"text-center text-gray-400 text-lg pt-6",children:"FieldScan — ваш помощник в цифровом сельском хозяйстве"})]})})}function pp(){const[r,t]=j.useState(!0);return j.useEffect(()=>{const e=()=>{const i=document.getElementById("main");if(!i)return;const a=document.getElementById("header").offsetHeight,o=i.offsetTop+i.offsetHeight,u=window.scrollY+a;t(u<o)};return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),E.jsxs(E.Fragment,{children:[E.jsx(lb,{isTransparent:r}),E.jsx(yb,{}),E.jsx(pb,{}),E.jsx(xb,{}),E.jsx(Bx,{})]})}var vb={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function Eb(r){if(typeof r=="number")return{value:r,unit:"px"};var t,e=(r.match(/^[0-9.]*/)||"").toString();e.includes(".")?t=parseFloat(e):t=parseInt(e,10);var i=(r.match(/[^0-9]*$/)||"").toString();return vb[i]?{value:t,unit:i}:(console.warn("React Spinners: ".concat(r," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function yd(r){var t=Eb(r);return"".concat(t.value).concat(t.unit)}var Hx=function(r,t,e){var i="react-spinners-".concat(r,"-").concat(e);if(typeof window>"u"||!window.document)return i;var a=document.createElement("style");document.head.appendChild(a);var o=a.sheet,u=`
    @keyframes `.concat(i,` {
      `).concat(t,`
    }
  `);return o&&o.insertRule(u,0),i},oc;(function(r){r.maroon="#800000",r.red="#FF0000",r.orange="#FFA500",r.yellow="#FFFF00",r.olive="#808000",r.green="#008000",r.purple="#800080",r.fuchsia="#FF00FF",r.lime="#00FF00",r.teal="#008080",r.aqua="#00FFFF",r.blue="#0000FF",r.navy="#000080",r.black="#000000",r.gray="#808080",r.silver="#C0C0C0",r.white="#FFFFFF"})(oc||(oc={}));var Sb=function(r,t){if(r.includes("/"))return r.replace("rgb(","rgba(");var e=r.substring(r.startsWith("rgba(")?5:4,r.length-1).trim(),i=e.split(",");return i.length===4?r.replace("rgb(","rgba("):i.length===3?"rgba(".concat(e,", ").concat(t,")"):"rgba(".concat(e," / ").concat(t,")")},Cb=function(r,t){if(r.startsWith("rgb"))return Sb(r,t);if(Object.keys(oc).includes(r)&&(r=oc[r]),r[0]==="#"&&(r=r.slice(1)),r.length===3){var e="";r.split("").forEach(function(a){e+=a,e+=a}),r=e}var i=(r.match(/.{2}/g)||[]).map(function(a){return parseInt(a,16)}).join(", ");return"rgba(".concat(i,", ").concat(t,")")},uc=function(){return uc=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},uc.apply(this,arguments)},bb=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(e[i[a]]=r[i[a]]);return e},Tb=Hx("BarLoader","0% {left: -35%;right: 100%} 60% {left: 100%;right: -90%} 100% {left: 100%;right: -90%}","long"),wb=Hx("BarLoader","0% {left: -200%;right: 100%} 60% {left: 107%;right: -8%} 100% {left: 107%;right: -8%}","short");function Vx(r){var t=r.loading,e=t===void 0?!0:t,i=r.color,a=i===void 0?"#000000":i,o=r.speedMultiplier,u=o===void 0?1:o,h=r.cssOverride,f=h===void 0?{}:h,g=r.height,m=g===void 0?4:g,y=r.width,p=y===void 0?100:y,v=bb(r,["loading","color","speedMultiplier","cssOverride","height","width"]),S=uc({display:"inherit",position:"relative",width:yd(p),height:yd(m),overflow:"hidden",backgroundColor:Cb(a,.2),backgroundClip:"padding-box"},f),w=function(T){return{position:"absolute",height:yd(m),overflow:"hidden",backgroundColor:a,backgroundClip:"padding-box",display:"block",borderRadius:2,willChange:"left, right",animationFillMode:"forwards",animation:"".concat(T===1?Tb:wb," ").concat(2.1/u,"s ").concat(T===2?"".concat(1.15/u,"s"):""," ").concat(T===1?"cubic-bezier(0.65, 0.815, 0.735, 0.395)":"cubic-bezier(0.165, 0.84, 0.44, 1)"," infinite")}};return e?j.createElement("span",uc({style:S},v),j.createElement("span",{style:w(1)}),j.createElement("span",{style:w(2)})):null}function Rb(){const[r,t]=j.useState(""),[e,i]=j.useState(""),[a,o]=j.useState(!1),[u,h]=j.useState(""),f=Ac();j.useEffect(()=>{(async()=>{const y=dn("token");if(console.log(`Token: ${y}`),y&&lc(y))try{await JC(y)?f("/profile"):Oi("token")}catch(p){console.error("Token validation failed:",p),Oi("token")}})()},[f]);const g=async()=>{try{o(!0),h("");const m=await Yx(r,e);if(m&&lc(m))Ux("token",m,7),f("/profile");else throw new Error("Получен невалидный токен от сервера")}catch(m){o(!1),h(m.message||"Ошибка входа. Проверьте email и пароль."),console.log("Login error:",m)}finally{o(!1)}};return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute h-[100vh] w-[100vw] bg-[var(--neutral-color)] -z-1"}),E.jsxs("div",{className:"flex bg-[var(--neutral-color)] justify-center items-center",children:[E.jsx(Pe,{to:"/",className:"absolute text-2xl md:text-3xl self-start left-2 mx-16 my-8 hover:text-[var(--accent-dark-color)] transition-[color] duration-100",children:"← На главную"}),E.jsx(Pe,{to:"/registration",className:"absolute text-2xl md:text-3xl self-start right-2 mx-16 my-8 hover:text-[var(--accent-dark-color)] transition-[color] duration-100",children:"Регистрация аккаунта →"}),E.jsxs("div",{className:"bg-[var(--neutral-secondary-color)] w-2/3 h-3/4 sm:w-1/2 max-w-240 rounded-[2vw] shadow-xl p-16 space-y-16 mt-[25vh] md:mt-[13vh]",children:[E.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[E.jsx("img",{src:Dc,className:"w-1/10 h-1/10"}),E.jsx("h1",{className:"text-5xl md:text-6xl text-center font-bold tracking-tight",children:"Вход"})]}),u&&E.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),E.jsxs("form",{method:"post",className:"flex flex-col justify-center space-y-8",children:[E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"email",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Почта"}),E.jsx("input",{onChange:m=>t(m.target.value),id:"email",name:"email",type:"email",placeholder:"Ваша@почта.ru",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                            focus:ring-[var(--accent-color)] focus:outline-0 focus:ring-2 w-full`})]}),E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"password",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Пароль"}),E.jsx("input",{onChange:m=>i(m.target.value),id:"password",name:"password",type:"password",placeholder:"Ваш секретный пароль",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                            focus:ring-[var(--accent-color)] focus:outline-0 focus:ring-2 w-full`})]}),E.jsx("div",{className:"flex justify-center items-center mt-16",children:a?E.jsx("div",{className:"flex justify-center items-center w-1/2 rounded-full bg-[var(--neutral-dark-secondary-color)]",children:E.jsx(Vx,{color:"var(--accent-color)",loading:a,width:"100%",height:5,"aria-label":"Регистрация..."})}):E.jsx("input",{onClick:g,type:"button",value:"Войти",className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)]
                                transition-[background-color] duration-100 cursor-pointer rounded-full text-2xl md:text-3xl px-5 py-5 text-[var(--neutral-color)] 
                                shadow-2xs w-3/4`})}),E.jsxs("p",{className:"text-end self-end",children:["Забыли пароль? ",E.jsx("span",{className:"text-[var(--accent-dark-color)] cursor-pointer",children:"Восстановить пароль"})]})]})]})]})]})}function Ab(){const r=Ac();j.useEffect(()=>{(async()=>{const z=dn("token");if(z&&lc(z))try{await validateToken(z)?r("/profile"):Oi("token")}catch(tt){console.error("Token validation failed:",tt),Oi("token")}})()},[r]);const[t,e]=j.useState(!1),[i,a]=j.useState(""),[o,u]=j.useState(""),[h,f]=j.useState(""),[g,m]=j.useState(""),[y,p]=j.useState(""),[v,S]=j.useState(!1),[w,T]=j.useState(""),b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,R=/^[A-Za-z0-9]{5,}$/,O=/^[A-Za-zА-Яа-яЁё\s\-']{2,}$/,A=b.test(h),L=R.test(g),X=g===y,B=O.test(i),H=O.test(o),V=t&&!A,et=t&&!L,lt=t&&!X,it=t&&!B,st=t&&!H,J=B&&H&&A&&L&&X,nt=async()=>{if(e(!0),T(""),!J){console.log("Форма невалидна, регистрация прервана");return}S(!0),console.log("Регистрация...",{email:h,password:g}),await I()},I=async()=>{try{const U=await tb(h,g,i,o);if(!U.ok){const rt=await U.text();throw new Error(rt||"Ошибка регистрации")}const z=await Yx(h,g);if(!z.ok){const rt=await z.text();throw new Error(rt||"Ошибка получения токена")}const tt=await z.text();Ux("token",tt,7),console.log("Регистрация успешна! Токен сохранен."),r("/profile")}catch(U){console.error("Ошибка регистрации:",U),T(U.message||"Произошла ошибка при регистрации")}finally{S(!1)}},Z=()=>h?"Введите корректный email (например: my@mail.com)":"Введите email",$=()=>g?g.length<5?"Пароль должен содержать минимум 5 символов":"Пароль должен содержать только буквы и цифры":"Введите пароль",at=()=>i?i.length<2?"Имя должно содержать минимум 2 символа":"Имя должно содержать только буквы, пробелы, дефисы и апострофы":"Введите имя",M=()=>o?o.length<2?"Фамилия должна содержать минимум 2 символа":"Фамилия должна содержать только буквы, пробелы, дефисы и апострофы":"Введите фамилию";return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute h-[100vh] w-[100vw] bg-[var(--neutral-color)] -z-1"}),E.jsxs("div",{className:"flex bg-[var(--neutral-color)] justify-center items-center",children:[E.jsx(Pe,{to:"/",className:"absolute text-2xl md:text-3xl self-start left-2 mx-16 my-8 hover:text-[var(--accent-dark-color)] transition-[color] duration-100",children:"← На главную"}),E.jsx(Pe,{to:"/login",className:"absolute text-2xl md:text-3xl self-start right-2 mx-16 my-8 hover:text-[var(--accent-dark-color)] transition-[color] duration-100",children:"Вход в аккаунт →"}),E.jsxs("div",{className:"bg-[var(--neutral-secondary-color)] w-2/3 h-3/4 sm:w-1/2 max-w-240 rounded-[2vw] shadow-xl p-16 space-y-16 mt-[25vh] md:mt-[13vh]",children:[E.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[E.jsx("img",{src:Dc,className:"w-1/10 h-1/10"}),E.jsx("h1",{className:"text-5xl md:text-6xl text-center font-bold tracking-tight",children:"Регистрация"})]}),E.jsxs("form",{method:"post",className:"flex flex-col justify-center space-y-8",children:[E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"user-name",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Имя"}),E.jsx("input",{value:i,onChange:U=>a(U.target.value),id:"user-name",name:"user-name",type:"text",placeholder:"Иван",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                                focus:outline-0 focus:ring-2 w-full ${it?"outline-1 outline-red-500 focus:ring-red-500":"focus:ring-[var(--accent-color)]"}`}),it&&E.jsx("span",{className:"text-red-500 text-xl mt-2 ml-4",children:at()})]}),E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"user-surname",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Фамилия"}),E.jsx("input",{value:o,onChange:U=>u(U.target.value),id:"user-surname",name:"user-surname",type:"text",placeholder:"Иванов",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                                focus:outline-0 focus:ring-2 w-full ${st?"outline-1 outline-red-500 focus:ring-red-500":"focus:ring-[var(--accent-color)]"}`}),st&&E.jsx("span",{className:"text-red-500 text-xl mt-2 ml-4",children:M()})]}),E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"email",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Почта"}),E.jsx("input",{value:h,onChange:U=>f(U.target.value),id:"email",name:"email",type:"email",placeholder:"Ваша@почта.ru",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                                focus:outline-0 focus:ring-2 w-full ${V?"outline-1 outline-red-500 focus:ring-red-500":"focus:ring-[var(--accent-color)]"}`}),V&&E.jsx("span",{className:"text-red-500 text-xl mt-2 ml-4",children:Z()})]}),E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"password",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Пароль"}),E.jsx("input",{value:g,onChange:U=>m(U.target.value),id:"password",name:"password",type:"password",placeholder:"Ваш секретный пароль",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                                focus:outline-0 focus:ring-2 w-full ${et?"outline-1 outline-red-500 focus:ring-red-500":"focus:ring-[var(--accent-color)]"}`}),et&&E.jsx("span",{className:"text-red-500 text-xl mt-2 ml-4",children:$()})]}),E.jsxs("div",{className:"flex flex-col w-full",children:[E.jsx("label",{htmlFor:"password-again",className:"text-2xl md:text-3xl ml-4 mb-2 text-[var(--neutral-dark-color)]",children:"Пароль ещё раз"}),E.jsx("input",{value:y,onChange:U=>p(U.target.value),id:"password-again",type:"password",placeholder:"Введите ваш пароль ещё раз",className:`text-2xl md:text-3xl bg-[var(--neutral-color)] rounded-4xl py-4 px-6 shadow-2xs 
                                focus:outline-0 focus:ring-2 w-full ${lt?"outline-1 outline-red-500 focus:ring-red-500":"focus:ring-[var(--accent-color)]"}`}),lt&&E.jsx("span",{className:"text-red-500 text-xl mt-2 ml-4",children:"Пароли не совпадают"})]}),E.jsx("div",{className:"flex justify-center items-center mt-16",children:v?E.jsx("div",{className:"flex justify-center items-center w-1/2 rounded-full bg-[var(--neutral-dark-secondary-color)]",children:E.jsx(Vx,{color:"var(--accent-color)",loading:v,width:"100%",height:5,"aria-label":"Регистрация..."})}):E.jsx("input",{onClick:nt,name:"registration-button",type:"button",value:"Зарегистрироваться",disabled:t&&!J,className:`${t&&!J?"bg-gray-400 cursor-not-allowed":"bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] cursor-pointer"} transition-[background-color] duration-100 rounded-full text-2xl md:text-3xl px-5 py-5 text-[var(--neutral-color)] shadow-2xs w-3/4`})})]})]})]})]})}function Mb(){return E.jsx("div",{className:"min-h-screen flex items-center justify-center",children:E.jsx("div",{className:"text-2xl",children:"Загрузка..."})})}function Db(){return E.jsx(Pe,{to:"/",className:"absolute text-2xl md:text-3xl self-start left-2 mx-16 my-8 hover:text-[var(--accent-dark-color)] transition-[color] duration-100",children:"← На главную"})}function Lb({user:r,activeTab:t,setActiveTab:e}){const i=[{id:"profile",label:"Профиль"},{id:"fields",label:"Список полей"},{id:"analyses",label:"Анализы"}];return E.jsxs("aside",{className:"rounded-2xl w-80 flex flex-col items-center py-8 px-6 mt-2 h-fit sticky top-24",children:[E.jsxs("div",{className:"flex flex-col items-center mb-8",children:[E.jsx("div",{className:"w-20 h-20 rounded-full bg-[var(--neutral-dark-color)] flex items-center justify-center mb-3",children:E.jsxs("svg",{width:"40",height:"40",fill:"none",stroke:"#fff",strokeWidth:"2",viewBox:"0 0 24 24",children:[E.jsx("circle",{cx:"12",cy:"8",r:"4"}),E.jsx("path",{d:"M4 20c0-4 8-4 8-4s8 0 8 4"})]})}),E.jsx("span",{className:"text-3xl lg:text-4xl font-semibold text-center text-[var(--netral-dark-color)]",children:r.name})]}),E.jsx("nav",{className:"flex flex-col gap-3 w-full",children:i.map(a=>E.jsx("button",{className:`text-2xl rounded-xl py-2 px-4 transition-all w-full text-start cursor-pointer ${t===a.id?"bg-[var(--neutral-color)] text-[var(--accent-color)]":"text-gray-500 hover:text-[var(--accent-light-color)] hover:bg-gray-100"}`,onClick:()=>e(a.id),children:a.label},a.id))})]})}function Ob({activeTab:r}){const t=()=>{switch(r){case"profile":return"Мой профиль";case"fields":return"Список полей";case"add":return"Добавить поле";default:return"Мой профиль"}};return E.jsx("div",{className:"flex justify-between items-center mb-10",children:E.jsx("h1",{className:"text-5xl font-bold text-[var(--neutral-dark-color)] tracking-tight",children:t()})})}function xp({user:r}){return E.jsx(E.Fragment,{children:E.jsxs("div",{className:"grid grid-cols-2 gap-y-8 gap-x-16 mb-14",children:[E.jsx("div",{className:"text-2xl text-gray-500",children:"Имя"}),E.jsx("div",{className:"text-2xl font-semibold text-[var(--neutral-dark-color)]",children:r.name}),E.jsx("div",{className:"text-2xl text-gray-500",children:"Email"}),E.jsx("div",{className:"text-2xl font-semibold text-[var(--neutral-dark-color)]",children:r.email})]})})}function Qt(r,t,e){return Math.min(Math.max(r,t),e)}function Nb(r,t,e,i,a,o){const u=a-e,h=o-i;if(u!==0||h!==0){const f=((r-e)*u+(t-i)*h)/(u*u+h*h);f>1?(e=a,i=o):f>0&&(e+=u*f,i+=h*f)}return ji(r,t,e,i)}function ji(r,t,e,i){const a=e-r,o=i-t;return a*a+o*o}function Ib(r){const t=r.length;for(let i=0;i<t;i++){let a=i,o=Math.abs(r[i][i]);for(let h=i+1;h<t;h++){const f=Math.abs(r[h][i]);f>o&&(o=f,a=h)}if(o===0)return null;const u=r[a];r[a]=r[i],r[i]=u;for(let h=i+1;h<t;h++){const f=-r[h][i]/r[i][i];for(let g=i;g<t+1;g++)i==g?r[h][g]=0:r[h][g]+=f*r[i][g]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=r[i][t]/r[i][i];for(let a=i-1;a>=0;a--)r[a][t]-=r[a][i]*e[i]}return e}function vp(r){return r*180/Math.PI}function Un(r){return r*Math.PI/180}function ya(r,t){const e=r%t;return e*t<0?e+t:e}function fn(r,t,e){return r+e*(t-r)}function yo(r,t){const e=Math.pow(10,t);return Math.round(r*e)/e}function Pu(r,t){return Math.floor(yo(r,t))}function Uu(r,t){return Math.ceil(yo(r,t))}function Qd(r,t,e){if(r>=t&&r<e)return r;const i=e-t;return((r-t)%i+i)%i+t}const Zx=63710088e-1;function Ep(r,t,e){e=e||Zx;const i=Un(r[1]),a=Un(t[1]),o=(a-i)/2,u=Un(t[0]-r[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(u)*Math.sin(u)*Math.cos(i)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Yu(r,t){let e=0;const i=r.length;let a=r[i-1][0],o=r[i-1][1];for(let u=0;u<i;u++){const h=r[u][0],f=r[u][1];e+=Un(h-a)*(2+Math.sin(Un(o))+Math.sin(Un(f))),a=h,o=f}return e*t*t/2}function Cg(r,t){t=t||{};const e=t.radius||Zx,i=t.projection||"EPSG:3857",a=r.getType();a!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let o=0,u,h,f,g,m,y;switch(a){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(u=r.getCoordinates(),o=Math.abs(Yu(u[0],e)),f=1,g=u.length;f<g;++f)o-=Math.abs(Yu(u[f],e));break}case"MultiPolygon":{for(u=r.getCoordinates(),f=0,g=u.length;f<g;++f)for(h=u[f],o+=Math.abs(Yu(h[0],e)),m=1,y=h.length;m<y;++m)o-=Math.abs(Yu(h[m],e));break}case"GeometryCollection":{const p=r.getGeometries();for(f=0,g=p.length;f<g;++f)o+=Cg(p[f],t);break}default:throw new Error("Unsupported geometry type: "+a)}return o}function qx(...r){console.warn(...r)}const ve={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function We(r){const t=Dn();for(let e=0,i=r.length;e<i;++e)Wl(t,r[e]);return t}function Lc(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function Kx(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function fr(r,t,e){let i,a;return t<r[0]?i=r[0]-t:r[2]<t?i=t-r[2]:i=0,e<r[1]?a=r[1]-e:r[3]<e?a=e-r[3]:a=0,i*i+a*a}function Sa(r,t){return bg(r,t[0],t[1])}function Yl(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function bg(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function $d(r,t){const e=r[0],i=r[1],a=r[2],o=r[3],u=t[0],h=t[1];let f=ve.UNKNOWN;return u<e?f=f|ve.LEFT:u>a&&(f=f|ve.RIGHT),h<i?f=f|ve.BELOW:h>o&&(f=f|ve.ABOVE),f===ve.UNKNOWN&&(f=ve.INTERSECTING),f}function Dn(){return[1/0,1/0,-1/0,-1/0]}function Ui(r,t,e,i,a){return a?(a[0]=r,a[1]=t,a[2]=e,a[3]=i,a):[r,t,e,i]}function po(r){return Ui(1/0,1/0,-1/0,-1/0,r)}function Kl(r,t){const e=r[0],i=r[1];return Ui(e,i,e,i,t)}function Tg(r,t,e,i,a){const o=po(a);return Qx(o,r,t,e,i)}function to(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function Wx(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Wl(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function Qx(r,t,e,i,a){for(;e<i;e+=a)jb(r,t[e],t[e+1]);return r}function jb(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function wg(r,t){let e;return e=t(Oc(r)),e||(e=t(Nc(r)),e)||(e=t(Ic(r)),e)||(e=t(dr(r)),e)?e:!1}function Jd(r){let t=0;return jc(r)||(t=Yt(r)*Ye(r)),t}function Oc(r){return[r[0],r[1]]}function Nc(r){return[r[2],r[1]]}function Ls(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function kb(r,t){let e;if(t==="bottom-left")e=Oc(r);else if(t==="bottom-right")e=Nc(r);else if(t==="top-left")e=dr(r);else if(t==="top-right")e=Ic(r);else throw new Error("Invalid corner");return e}function tg(r,t,e,i,a){const[o,u,h,f,g,m,y,p]=$x(r,t,e,i);return Ui(Math.min(o,h,g,y),Math.min(u,f,m,p),Math.max(o,h,g,y),Math.max(u,f,m,p),a)}function $x(r,t,e,i){const a=t*i[0]/2,o=t*i[1]/2,u=Math.cos(e),h=Math.sin(e),f=a*u,g=a*h,m=o*u,y=o*h,p=r[0],v=r[1];return[p-f+y,v-g-m,p-f-y,v-g+m,p+f-y,v+g+m,p+f+y,v+g-m,p-f+y,v-g-m]}function Ye(r){return r[3]-r[1]}function ar(r,t,e){const i=e||Dn();return Ue(r,t)?(r[0]>t[0]?i[0]=r[0]:i[0]=t[0],r[1]>t[1]?i[1]=r[1]:i[1]=t[1],r[2]<t[2]?i[2]=r[2]:i[2]=t[2],r[3]<t[3]?i[3]=r[3]:i[3]=t[3]):po(i),i}function dr(r){return[r[0],r[3]]}function Ic(r){return[r[2],r[3]]}function Yt(r){return r[2]-r[0]}function Ue(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function jc(r){return r[2]<r[0]||r[3]<r[1]}function Fb(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function zb(r,t,e){let i=!1;const a=$d(r,t),o=$d(r,e);if(a===ve.INTERSECTING||o===ve.INTERSECTING)i=!0;else{const u=r[0],h=r[1],f=r[2],g=r[3],m=t[0],y=t[1],p=e[0],v=e[1],S=(v-y)/(p-m);let w,T;o&ve.ABOVE&&!(a&ve.ABOVE)&&(w=p-(v-g)/S,i=w>=u&&w<=f),!i&&o&ve.RIGHT&&!(a&ve.RIGHT)&&(T=v-(p-f)*S,i=T>=h&&T<=g),!i&&o&ve.BELOW&&!(a&ve.BELOW)&&(w=p-(v-h)/S,i=w>=u&&w<=f),!i&&o&ve.LEFT&&!(a&ve.LEFT)&&(T=v-(p-u)*S,i=T>=h&&T<=g)}return i}function Jx(r,t){const e=t.getExtent(),i=Ls(r);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const a=Yt(e),u=Math.floor((i[0]-e[0])/a)*a;r[0]-=u,r[2]-=u}return r}function tv(r,t,e){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[i[0],r[1],i[2],r[3]]];Jx(r,t);const a=Yt(i);if(Yt(r)>a&&!e)return[[i[0],r[1],i[2],r[3]]];if(r[0]<i[0])return[[r[0]+a,r[1],i[2],r[3]],[i[0],r[1],r[2],r[3]]];if(r[2]>i[2])return[[r[0],r[1],i[2],r[3]],[i[0],r[1],r[2]-a,r[3]]]}return[r]}function Gb(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function ev(r,t){const e=r[0],i=r[1],a=t[0],o=t[1],u=a[0],h=a[1],f=o[0],g=o[1],m=f-u,y=g-h,p=m===0&&y===0?0:(m*(e-u)+y*(i-h))/(m*m+y*y||0);let v,S;return p<=0?(v=u,S=h):p>=1?(v=f,S=g):(v=u+p*m,S=h+p*y),[v,S]}function ze(r,t){let e=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=t[i]){e=!1;break}return e}function Rg(r,t){const e=Math.cos(t),i=Math.sin(t),a=r[0]*e-r[1]*i,o=r[1]*e+r[0]*i;return r[0]=a,r[1]=o,r}function Pb(r,t){return r[0]*=t,r[1]*=t,r}function Ca(r,t){const e=r[0]-t[0],i=r[1]-t[1];return e*e+i*i}function cc(r,t){return Math.sqrt(Ca(r,t))}function Ub(r,t){return Ca(r,ev(r,t))}function nv(r,t){if(t.canWrapX()){const e=Yt(t.getExtent()),i=Yb(r,t,e);i&&(r[0]-=i*e)}return r}function Yb(r,t,e){const i=t.getExtent();let a=0;return t.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(e=e||Yt(i),a=Math.floor((r[0]-i[0])/e)),a}const Ag={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Mg{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ag[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const xo=6378137,ga=Math.PI*xo,Xb=[-ga,-ga,ga,ga],Bb=[-180,-85,180,85],Xu=xo*Math.log(Math.tan(Math.PI/2));class na extends Mg{constructor(t){super({code:t,units:"m",extent:Xb,global:!0,worldExtent:Bb,getPointResolution:function(e,i){return e/Math.cosh(i[1]/xo)}})}}const Sp=[new na("EPSG:3857"),new na("EPSG:102100"),new na("EPSG:102113"),new na("EPSG:900913"),new na("http://www.opengis.net/def/crs/EPSG/0/3857"),new na("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Hb(r,t,e,i){const a=r.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=r.slice():t=new Array(a));for(let o=0;o<a;o+=i){t[o]=ga*r[o]/180;let u=xo*Math.log(Math.tan(Math.PI*(+r[o+1]+90)/360));u>Xu?u=Xu:u<-Xu&&(u=-Xu),t[o+1]=u}return t}function Vb(r,t,e,i){const a=r.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=r.slice():t=new Array(a));for(let o=0;o<a;o+=i)t[o]=180*r[o]/ga,t[o+1]=360*Math.atan(Math.exp(r[o+1]/xo))/Math.PI-90;return t}const Zb=6378137,Cp=[-180,-90,180,90],qb=Math.PI*Zb/180;class $s extends Mg{constructor(t,e){super({code:t,units:"degrees",extent:Cp,axisOrientation:e,global:!0,metersPerUnit:qb,worldExtent:Cp})}}const bp=[new $s("CRS:84"),new $s("EPSG:4326","neu"),new $s("urn:ogc:def:crs:OGC:1.3:CRS84"),new $s("urn:ogc:def:crs:OGC:2:84"),new $s("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $s("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $s("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let eg={};function Kb(r){return eg[r]||eg[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Wb(r,t){eg[r]=t}function vo(r){for(const t in r)delete r[t]}function ba(r){let t;for(t in r)return!1;return!t}let pa={};function eo(r,t,e){const i=r.getCode(),a=t.getCode();i in pa||(pa[i]={}),pa[i][a]=e}function pd(r,t){return r in pa&&t in pa[r]?pa[r][t]:null}const hc=.9996,Mn=.00669438,kc=Mn*Mn,Fc=kc*Mn,nr=Mn/(1-Mn),Tp=Math.sqrt(1-Mn),Ta=(1-Tp)/(1+Tp),iv=Ta*Ta,Dg=iv*Ta,Lg=Dg*Ta,sv=Lg*Ta,rv=1-Mn/4-3*kc/64-5*Fc/256,Qb=3*Mn/8+3*kc/32+45*Fc/1024,$b=15*kc/256+45*Fc/1024,Jb=35*Fc/3072,tT=3/2*Ta-27/32*Dg+269/512*sv,eT=21/16*iv-55/32*Lg,nT=151/96*Dg-417/128*sv,iT=1097/512*Lg,fc=6378137;function sT(r,t,e){const i=r-5e5,u=(e.north?t:t-1e7)/hc/(fc*rv),h=u+tT*Math.sin(2*u)+eT*Math.sin(4*u)+nT*Math.sin(6*u)+iT*Math.sin(8*u),f=Math.sin(h),g=f*f,m=Math.cos(h),y=f/m,p=y*y,v=p*p,S=1-Mn*g,w=Math.sqrt(1-Mn*g),T=fc/w,b=(1-Mn)/S,R=nr*m**2,O=R*R,A=i/(T*hc),L=A*A,X=L*A,B=X*A,H=B*A,V=H*A,et=h-y/b*(L/2-B/24*(5+3*p+10*R-4*O-9*nr))+V/720*(61+90*p+298*R+45*v-252*nr-3*O);let lt=(A-X/6*(1+2*p+R)+H/120*(5-2*R+28*p-3*O+8*nr+24*v))/m;return lt=Qd(lt+Un(av(e.number)),-Math.PI,Math.PI),[vp(lt),vp(et)]}const wp=-80,Rp=84,rT=-180,aT=180;function lT(r,t,e){r=Qd(r,rT,aT),t<wp?t=wp:t>Rp&&(t=Rp);const i=Un(t),a=Math.sin(i),o=Math.cos(i),u=a/o,h=u*u,f=h*h,g=Un(r),m=av(e.number),y=Un(m),p=fc/Math.sqrt(1-Mn*a**2),v=nr*o**2,S=o*Qd(g-y,-Math.PI,Math.PI),w=S*S,T=w*S,b=T*S,R=b*S,O=R*S,A=fc*(rv*i-Qb*Math.sin(2*i)+$b*Math.sin(4*i)-Jb*Math.sin(6*i)),L=hc*p*(S+T/6*(1-h+v)+R/120*(5-18*h+f+72*v-58*nr))+5e5;let X=hc*(A+p*u*(w/2+b/24*(5-h+9*v+4*v**2)+O/720*(61-58*h+f+600*v-330*nr)));return e.north||(X+=1e7),[L,X]}function av(r){return(r-1)*6-180+3}const oT=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function lv(r){let t=0;for(const a of oT){const o=r.match(a);if(o){t=parseInt(o[1]);break}}if(!t)return null;let e=0,i=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(i=!0,e=t-32600),e?{number:e,north:i}:null}function Ap(r,t){return function(e,i,a,o){const u=e.length;a=a>1?a:2,o=o??a,i||(a>2?i=e.slice():i=new Array(u));for(let h=0;h<u;h+=o){const f=e[h],g=e[h+1],m=r(f,g,t);i[h]=m[0],i[h+1]=m[1]}return i}}function uT(r){return lv(r)?new Mg({code:r,units:"m"}):null}function cT(r){const t=lv(r.getCode());return t?{forward:Ap(lT,t),inverse:Ap(sT,t)}:null}const hT=[cT],fT=[uT];let ng=!0;function dT(r){ng=!1}function Og(r,t){if(t!==void 0){for(let e=0,i=r.length;e<i;++e)t[e]=r[e];t=t}else t=r.slice();return t}function ig(r){Wb(r.getCode(),r),eo(r,r,Og)}function gT(r){r.forEach(ig)}function en(r){if(typeof r!="string")return r;const t=Kb(r);if(t)return t;for(const e of fT){const i=e(r);if(i)return i}return null}function Mp(r,t,e,i){r=en(r);let a;const o=r.getPointResolutionFunc();if(o)a=o(t,e);else{const u=r.getUnits();if(u=="degrees"&&!i||i=="degrees")a=t;else{const h=Ig(r,en("EPSG:4326"));if(!h&&u!=="degrees")a=t*r.getMetersPerUnit();else{let g=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];g=h(g,g,2);const m=Ep(g.slice(0,2),g.slice(2,4)),y=Ep(g.slice(4,6),g.slice(6,8));a=(m+y)/2}const f=r.getMetersPerUnit();f!==void 0&&(a/=f)}}return a}function Dp(r){gT(r),r.forEach(function(t){r.forEach(function(e){t!==e&&eo(t,e,Og)})})}function mT(r,t,e,i){r.forEach(function(a){t.forEach(function(o){eo(a,o,e),eo(o,a,i)})})}function Ng(r,t){return r?typeof r=="string"?en(r):r:en(t)}function _T(r){return(function(t,e,i,a){const o=t.length;i=i!==void 0?i:2,a=a??i,e=e!==void 0?e:new Array(o);for(let u=0;u<o;u+=a){const h=r(t.slice(u,u+i)),f=h.length;for(let g=0,m=a;g<m;++g)e[u+g]=g>=f?t[u+g]:h[g]}return e})}function xd(r,t){if(r===t)return!0;const e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||Ig(r,t)===Og)&&e}function Ig(r,t){const e=r.getCode(),i=t.getCode();let a=pd(e,i);if(a)return a;let o=null,u=null;for(const f of hT)o||(o=f(r)),u||(u=f(t));if(!o&&!u)return null;const h="EPSG:4326";if(u)if(o)a=vd(o.inverse,u.forward);else{const f=pd(e,h);f&&(a=vd(f,u.forward))}else{const f=pd(h,i);f&&(a=vd(o.inverse,f))}return a&&(ig(r),ig(t),eo(r,t,a)),a}function vd(r,t){return function(e,i,a,o){return i=r(e,i,a,o),t(i,i,a,o)}}function dc(r,t){const e=en(r),i=en(t);return Ig(e,i)}function gc(r,t,e){const i=dc(t,e);if(!i){const a=en(t).getCode(),o=en(e).getCode();throw new Error(`No transform available between ${a} and ${o}`)}return i(r,void 0,r.length)}function lr(r,t){return r}function Jt(r,t){return ng&&!ze(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(ng=!1,qx("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function jg(r,t){return r}function Ni(r,t){return r}function yT(){Dp(Sp),Dp(bp),mT(bp,Sp,Hb,Vb)}yT();function pT({fieldType:r,setFieldType:t}){return E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-2xl font-semibold mb-4 text-[var(--neutral-dark-color)]",children:"Тип поля"}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{type:"button",className:`px-6 py-4 rounded-full text-xl transition-all cursor-pointer shadow-2xs ${r==="polygon"?"bg-[var(--accent-color)] text-white hover:bg-[var(--accent-light-color)]":"bg-[var(--neutral-color)] text-gray-700 hover:bg-gray-200"}`,onClick:()=>t("polygon"),children:"Полигон (3-5 вершин)"}),E.jsx("button",{type:"button",className:`px-6 py-4 rounded-full text-xl transition-all cursor-pointer shadow-2xs ${r==="point"?"bg-[var(--accent-color)] text-white hover:bg-[var(--accent-light-color)]":"bg-[var(--neutral-color)] text-gray-700 hover:bg-gray-200"}`,onClick:()=>t("point"),children:"Точка с радиусом"})]})]})}function xT({fieldType:r,fieldName:t,setFieldName:e,radius:i,setRadius:a,area:o}){return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-2xl font-semibold mb-2 text-[var(--neutral-dark-color)]",htmlFor:"fieldName",children:"Название поля"}),E.jsx("input",{id:"fieldName",type:"text",value:t,onChange:u=>e(u.target.value),className:"w-full rounded-4xl px-6 py-4 text-xl bg-[var(--neutral-light-color)] shadow-2xs focus:outline-0 focus:ring-2 focus:ring-[var(--accent-color)] cursor-text",placeholder:"Введите название поля"})]}),r==="point"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-2xl font-semibold mb-2 text-[var(--neutral-dark-color)]",htmlFor:"radius",children:"Радиус (метры)"}),E.jsx("input",{id:"radius",type:"number",value:i,onChange:u=>a(parseInt(u.target.value)||100),className:"w-full rounded-4xl px-6 py-4 text-xl bg-[var(--neutral-light-color)] shadow-2xs focus:outline-0 focus:ring-2 focus:ring-[var(--accent-color)] cursor-text",placeholder:"Введите радиус",min:"1"})]}),o&&E.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:E.jsxs("p",{className:"text-lg font-semibold text-green-800",children:["Площадь: ",o]})}),r==="polygon"&&E.jsxs("div",{className:"text-lg text-gray-600 bg-yellow-50 p-4 rounded-xl",children:[E.jsx("p",{children:"ℹ️ Выберите на карте от 3 до 5 точек для создания полигона"}),E.jsx("p",{className:"text-md mt-2",children:"• Кликните на карте, чтобы добавить вершины"}),E.jsx("p",{className:"text-md",children:"• Двойной клик или нажмите Enter для завершения"}),E.jsx("p",{className:"text-md",children:"• Перетащите точки для изменения формы"})]})]})}const Ie={ADD:"add",REMOVE:"remove"},wa={PROPERTYCHANGE:"propertychange"},pt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class zc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function vT(r,t,e){let i,a;e=e||ki;let o=0,u=r.length,h=!1;for(;o<u;)i=o+(u-o>>1),a=+e(r[i],t),a<0?o=i+1:(u=i,h=!a);return h?o:~o}function ki(r,t){return r>t?1:r<t?-1:0}function ET(r,t){return r<t?1:r>t?-1:0}function kg(r,t,e){if(r[0]<=t)return 0;const i=r.length;if(t<=r[i-1])return i-1;if(typeof e=="function"){for(let a=1;a<i;++a){const o=r[a];if(o===t)return a;if(o<t)return e(t,r[a-1],o)>0?a-1:a}return i-1}if(e>0){for(let a=1;a<i;++a)if(r[a]<t)return a-1;return i-1}if(e<0){for(let a=1;a<i;++a)if(r[a]<=t)return a;return i-1}for(let a=1;a<i;++a){if(r[a]==t)return a;if(r[a]<t)return r[a-1]-t<t-r[a]?a-1:a}return i-1}function ST(r,t,e){for(;t<e;){const i=r[t];r[t]=r[e],r[e]=i,++t,--e}}function ri(r,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let a=0;a<i;a++)r[r.length]=e[a]}function Hi(r,t){const e=r.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(r[i]!==t[i])return!1;return!0}function CT(r,t,e){const i=t||ki;return r.every(function(a,o){if(o===0)return!0;const u=i(r[o-1],a);return!(u>0||u===0)})}function Ra(){return!0}function Na(){return!1}function no(){}function ov(r){let t,e,i;return function(){const a=Array.prototype.slice.call(arguments);return(!e||this!==i||!Hi(a,e))&&(i=this,e=a,t=r.apply(this,arguments)),t}}function bT(r){function t(){let e;try{e=r()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}return t()}class Hn{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Gc extends zc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),a=i[t]||(i[t]=[]);a.includes(e)||a.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,a=this.listeners_&&this.listeners_[i];if(!a)return;const o=e?new Hn(t):t;o.target||(o.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,h[i]=0),++u[i];let f;for(let g=0,m=a.length;g<m;++g)if("handleEvent"in a[g]?f=a[g].handleEvent(o):f=a[g].call(this,o),f===!1||o.propagationStopped){f=!1;break}if(--u[i]===0){let g=h[i];for(delete h[i];g--;)this.removeEventListener(i,no);delete u[i]}return f}disposeInternal(){this.listeners_&&vo(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const a=i.indexOf(e);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[a]=no,++this.pendingRemovals_[t]):(i.splice(a,1),i.length===0&&delete this.listeners_[t]))}}function Ot(r,t,e,i,a){if(a){const u=e;e=function(h){return r.removeEventListener(t,e),u.call(i??this,h)}}else i&&i!==r&&(e=e.bind(i));const o={target:r,type:t,listener:e};return r.addEventListener(t,e),o}function mc(r,t,e,i){return Ot(r,t,e,i,!0)}function Kt(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),vo(r))}class Eo extends Gc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pt.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=Ot(this,t[o],e);return a}return Ot(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const a=t.length;i=new Array(a);for(let o=0;o<a;++o)i[o]=mc(this,t[o],e)}else i=mc(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)TT(i);else if(Array.isArray(t))for(let a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],e);else this.removeEventListener(t,e)}}Eo.prototype.on;Eo.prototype.once;Eo.prototype.un;function TT(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)Kt(r[t]);else Kt(r)}function It(){throw new Error("Unimplemented abstract method.")}let wT=0;function Ct(r){return r.ol_uid||(r.ol_uid=String(++wT))}class Lp extends Hn{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class ui extends Eo{constructor(t){super(),this.on,this.once,this.un,Ct(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Lp(i,t,e)),i=wa.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Lp(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const a=this.values_||(this.values_={});if(i)a[t]=e;else{const o=a[t];a[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],ba(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Op={LENGTH:"length"};class Bu extends Hn{constructor(t,e,i){super(t),this.element=e,this.index=i}}class wn extends ui{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,a=this.array_.length;i<a;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,a=e.length;i<a;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Op.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Bu(Ie.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,a=e.length;i<a;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Bu(Ie.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const a=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Bu(Ie.REMOVE,a,t)),this.dispatchEvent(new Bu(Ie.ADD,e,t))}updateLength_(){this.set(Op.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,a=this.array_.length;i<a;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}class ca extends Hn{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}class Di extends ca{constructor(t,e,i,a,o,u){super(t,e,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=a!==void 0?a:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Dt={SINGLECLICK:"singleclick",CLICK:pt.CLICK,DBLCLICK:pt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},or=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",RT=or.includes("safari")&&!or.includes("chrom");RT&&(or.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(or));const AT=or.includes("webkit")&&!or.includes("edge"),uv=or.includes("macintosh"),MT=typeof devicePixelRatio<"u"?devicePixelRatio:1,Fg=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,cv=typeof Image<"u"&&Image.prototype.decode,hv=(function(){let r=!1;try{const t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r})(),sg={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class DT extends Gc{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ot(i,sg.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ot(i,sg.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_,hv?{passive:!1}:!1)}emulateClick_(t){let e=new Di(Dt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Di(Dt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Di(Dt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Dt.POINTERUP||e.type==Dt.POINTERCANCEL){delete this.trackedTouches_[i];for(const a in this.trackedTouches_)if(this.trackedTouches_[a].target!==e.target){delete this.trackedTouches_[a];break}}else(e.type==Dt.POINTERDOWN||e.type==Dt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Di(Dt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Kt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Di(Dt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ot(i,Dt.POINTERMOVE,this.handlePointerMove_,this),Ot(i,Dt.POINTERUP,this.handlePointerUp_,this),Ot(this.element_,Dt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ot(this.element_.getRootNode(),Dt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Di(Dt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Di(Dt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Kt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Kt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Kt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ws={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Oe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},dt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function zt(r,t){if(!r)throw new Error(t)}const _c=1/0;class LT{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,vo(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const a=this.keyFunction_(i);return delete this.queuedElements_[a],i}enqueue(t){zt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=_c?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,a=e.length,o=e[t],u=i[t],h=t;for(;t<a>>1;){const f=this.getLeftChildIndex_(t),g=this.getRightChildIndex_(t),m=g<a&&i[g]<i[f]?g:f;e[t]=e[m],i[t]=i[m],t=m}e[t]=o,i[t]=u,this.siftDown_(h,t)}siftDown_(t,e){const i=this.elements_,a=this.priorities_,o=i[e],u=a[e];for(;e>t;){const h=this.getParentIndex_(e);if(a[h]>u)i[e]=i[h],a[e]=a[h],e=h;else break}i[e]=o,a[e]=u}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let a=0;const o=e.length;let u,h,f;for(h=0;h<o;++h)u=e[h],f=t(u),f==_c?delete this.queuedElements_[this.keyFunction_(u)]:(i[a]=f,e[a++]=u);e.length=a,i.length=a,this.heapify_()}}class OT extends LT{constructor(t,e){super(i=>t.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(pt.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===dt.LOADED||i===dt.ERROR||i===dt.EMPTY){i!==dt.ERROR&&e.removeEventListener(pt.CHANGE,this.boundHandleTileChange_);const a=e.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;){const a=this.dequeue()[0],o=a.getKey();a.getState()===dt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,a.load())}}}function NT(r,t,e,i,a){if(!r||!(e in r.wantedTiles)||!r.wantedTiles[e][t.getKey()])return _c;const o=r.viewState.center,u=i[0]-o[0],h=i[1]-o[1];return 65536*Math.log(a)+Math.sqrt(u*u+h*h)/a}const Ne={ANIMATING:0,INTERACTING:1},zn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Np(r,t,e){return(function(i,a,o,u,h){if(!i)return;if(!a&&!t)return i;const f=t?0:o[0]*a,g=t?0:o[1]*a,m=h?h[0]:0,y=h?h[1]:0;let p=r[0]+f/2+m,v=r[2]-f/2+m,S=r[1]+g/2+y,w=r[3]-g/2+y;p>v&&(p=(v+p)/2,v=p),S>w&&(S=(w+S)/2,w=S);let T=Qt(i[0],p,v),b=Qt(i[1],S,w);if(u&&e&&a){const R=30*a;T+=-R*Math.log(1+Math.max(0,p-i[0])/R)+R*Math.log(1+Math.max(0,i[0]-v)/R),b+=-R*Math.log(1+Math.max(0,S-i[1])/R)+R*Math.log(1+Math.max(0,i[1]-w)/R)}return[T,b]})}function IT(r){return r}function fv(r){return Math.pow(r,3)}function Ia(r){return 1-fv(1-r)}function jT(r){return 3*r*r-2*r*r*r}function kT(r){return r}new Array(6);function Yn(){return[1,0,0,1,0,0]}function FT(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Ee(r,t){const e=t[0],i=t[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t}function Yi(r,t,e,i,a,o,u,h){const f=Math.sin(o),g=Math.cos(o);return r[0]=i*g,r[1]=a*f,r[2]=-i*f,r[3]=a*g,r[4]=u*i*g-h*i*f+t,r[5]=u*a*f+h*a*g+e,r}function dv(r,t){const e=zT(t);zt(e!==0,"Transformation matrix cannot be inverted");const i=t[0],a=t[1],o=t[2],u=t[3],h=t[4],f=t[5];return r[0]=u/e,r[1]=-a/e,r[2]=-o/e,r[3]=i/e,r[4]=(o*f-u*h)/e,r[5]=-(i*f-a*h)/e,r}function zT(r){return r[0]*r[3]-r[1]*r[2]}const GT=[1e5,1e5,1e5,1e5,2,2];function PT(r){return"matrix("+r.join(", ")+")"}function Ip(r){return r.substring(7,r.length-1).split(",").map(parseFloat)}function UT(r,t){const e=Ip(r),i=Ip(t);for(let a=0;a<6;++a)if(Math.round((e[a]-i[a])*GT[a])!==0)return!1;return!0}function Ds(r,t,e,i,a,o,u){o=o||[],u=u||2;let h=0;for(let f=t;f<e;f+=i){const g=r[f],m=r[f+1];o[h++]=a[0]*g+a[2]*m+a[4],o[h++]=a[1]*g+a[3]*m+a[5];for(let y=2;y<u;y++)o[h++]=r[f+y]}return o&&o.length!=h&&(o.length=h),o}function zg(r,t,e,i,a,o,u){u=u||[];const h=Math.cos(a),f=Math.sin(a),g=o[0],m=o[1];let y=0;for(let p=t;p<e;p+=i){const v=r[p]-g,S=r[p+1]-m;u[y++]=g+v*h-S*f,u[y++]=m+v*f+S*h;for(let w=p+2;w<p+i;++w)u[y++]=r[w]}return u&&u.length!=y&&(u.length=y),u}function YT(r,t,e,i,a,o,u,h){h=h||[];const f=u[0],g=u[1];let m=0;for(let y=t;y<e;y+=i){const p=r[y]-f,v=r[y+1]-g;h[m++]=f+a*p,h[m++]=g+o*v;for(let S=y+2;S<y+i;++S)h[m++]=r[S]}return h&&h.length!=m&&(h.length=m),h}function XT(r,t,e,i,a,o,u){u=u||[];let h=0;for(let f=t;f<e;f+=i){u[h++]=r[f]+a,u[h++]=r[f+1]+o;for(let g=f+2;g<f+i;++g)u[h++]=r[g]}return u&&u.length!=h&&(u.length=h),u}const jp=Yn(),BT=[NaN,NaN];class gv extends ui{constructor(){super(),this.extent_=Dn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=ov((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e);const a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return It()}closestPointXY(t,e,i,a){return It()}containsXY(t,e){return this.closestPointXY(t,e,BT,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return It()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&po(e),this.extentRevision_=this.getRevision()}return Fb(this.extent_,t)}rotate(t,e){It()}scale(t,e,i){It()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return It()}getType(){return It()}applyTransform(t){It()}intersectsExtent(t){return It()}translate(t,e){It()}transform(t,e){const i=en(t),a=i.getUnits()=="tile-pixels"?function(o,u,h){const f=i.getExtent(),g=i.getWorldExtent(),m=Ye(g)/Ye(f);Yi(jp,g[0],g[3],m,-m,0,0,0);const y=Ds(o,0,o.length,h,jp,u),p=dc(i,e);return p?p(y,y,h):y}:dc(i,e);return this.applyTransform(a),this}}class Os extends gv{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return Tg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return It()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=yc(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){It()}setLayout(t,e,i){let a;if(t)a=yc(t);else{for(let o=0;o<i;++o){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}a=e.length,t=HT(a)}this.layout=t,this.stride=a}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const a=this.getStride();zg(i,0,i.length,a,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Ls(this.getExtent()));const a=this.getFlatCoordinates();if(a){const o=this.getStride();YT(a,0,a.length,o,t,e,i,a),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const a=this.getStride();XT(i,0,i.length,a,t,e,i),this.changed()}}}function HT(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function yc(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function VT(r,t,e){const i=r.getFlatCoordinates();if(!i)return null;const a=r.getStride();return Ds(i,0,i.length,a,t,e)}function mv(r,t,e,i){let a=0;const o=r[e-i],u=r[e-i+1];let h=0,f=0;for(;t<e;t+=i){const g=r[t]-o,m=r[t+1]-u;a+=f*g-h*m,h=g,f=m}return a/2}function _v(r,t,e,i){let a=0;for(let o=0,u=e.length;o<u;++o){const h=e[o];a+=mv(r,t,h,i),t=h}return a}function ZT(r,t,e,i){let a=0;for(let o=0,u=e.length;o<u;++o){const h=e[o];a+=_v(r,t,h,i),t=h[h.length-1]}return a}function kp(r,t,e,i,a,o,u){const h=r[t],f=r[t+1],g=r[e]-h,m=r[e+1]-f;let y;if(g===0&&m===0)y=t;else{const p=((a-h)*g+(o-f)*m)/(g*g+m*m);if(p>1)y=e;else if(p>0){for(let v=0;v<i;++v)u[v]=fn(r[t+v],r[e+v],p);u.length=i;return}else y=t}for(let p=0;p<i;++p)u[p]=r[y+p];u.length=i}function Gg(r,t,e,i,a){let o=r[t],u=r[t+1];for(t+=i;t<e;t+=i){const h=r[t],f=r[t+1],g=ji(o,u,h,f);g>a&&(a=g),o=h,u=f}return a}function Pg(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o){const h=e[o];a=Gg(r,t,h,i,a),t=h}return a}function qT(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o){const h=e[o];a=Pg(r,t,h,i,a),t=h[h.length-1]}return a}function Ug(r,t,e,i,a,o,u,h,f,g,m){if(t==e)return g;let y,p;if(a===0){if(p=ji(u,h,r[t],r[t+1]),p<g){for(y=0;y<i;++y)f[y]=r[t+y];return f.length=i,p}return g}m=m||[NaN,NaN];let v=t+i;for(;v<e;)if(kp(r,v-i,v,i,u,h,m),p=ji(u,h,m[0],m[1]),p<g){for(g=p,y=0;y<i;++y)f[y]=m[y];f.length=i,v+=i}else v+=i*Math.max((Math.sqrt(p)-Math.sqrt(g))/a|0,1);if(o&&(kp(r,e-i,t,i,u,h,m),p=ji(u,h,m[0],m[1]),p<g)){for(g=p,y=0;y<i;++y)f[y]=m[y];f.length=i}return g}function Yg(r,t,e,i,a,o,u,h,f,g,m){m=m||[NaN,NaN];for(let y=0,p=e.length;y<p;++y){const v=e[y];g=Ug(r,t,v,i,a,o,u,h,f,g,m),t=v}return g}function KT(r,t,e,i,a,o,u,h,f,g,m){m=m||[NaN,NaN];for(let y=0,p=e.length;y<p;++y){const v=e[y];g=Yg(r,t,v,i,a,o,u,h,f,g,m),t=v[v.length-1]}return g}function yv(r,t,e,i){for(let a=0,o=e.length;a<o;++a)r[t++]=e[a];return t}function Pc(r,t,e,i){for(let a=0,o=e.length;a<o;++a){const u=e[a];for(let h=0;h<i;++h)r[t++]=u[h]}return t}function Xg(r,t,e,i,a){a=a||[];let o=0;for(let u=0,h=e.length;u<h;++u){const f=Pc(r,t,e[u],i);a[o++]=f,t=f}return a.length=o,a}function WT(r,t,e,i,a){a=a||[];let o=0;for(let u=0,h=e.length;u<h;++u){const f=Xg(r,t,e[u],i,a[o]);f.length===0&&(f[0]=t),a[o++]=f,t=f[f.length-1]}return a.length=o,a}function As(r,t,e,i,a){a=a!==void 0?a:[];let o=0;for(let u=t;u<e;u+=i)a[o++]=r.slice(u,u+i);return a.length=o,a}function io(r,t,e,i,a){a=a!==void 0?a:[];let o=0;for(let u=0,h=e.length;u<h;++u){const f=e[u];a[o++]=As(r,t,f,i,a[o]),t=f}return a.length=o,a}function rg(r,t,e,i,a){a=a!==void 0?a:[];let o=0;for(let u=0,h=e.length;u<h;++u){const f=e[u];a[o++]=f.length===1&&f[0]===t?[]:io(r,t,f,i,a[o]),t=f[f.length-1]}return a.length=o,a}function Uc(r,t,e,i,a,o,u){const h=(e-t)/i;if(h<3){for(;t<e;t+=i)o[u++]=r[t],o[u++]=r[t+1];return u}const f=new Array(h);f[0]=1,f[h-1]=1;const g=[t,e-i];let m=0;for(;g.length>0;){const y=g.pop(),p=g.pop();let v=0;const S=r[p],w=r[p+1],T=r[y],b=r[y+1];for(let R=p+i;R<y;R+=i){const O=r[R],A=r[R+1],L=Nb(O,A,S,w,T,b);L>v&&(m=R,v=L)}v>a&&(f[(m-t)/i]=1,p+i<m&&g.push(p,m),m+i<y&&g.push(m,y))}for(let y=0;y<h;++y)f[y]&&(o[u++]=r[t+y*i],o[u++]=r[t+y*i+1]);return u}function pv(r,t,e,i,a,o,u,h){for(let f=0,g=e.length;f<g;++f){const m=e[f];u=Uc(r,t,m,i,a,o,u),h.push(u),t=m}return u}function tr(r,t){return t*Math.round(r/t)}function QT(r,t,e,i,a,o,u){if(t==e)return u;let h=tr(r[t],a),f=tr(r[t+1],a);t+=i,o[u++]=h,o[u++]=f;let g,m;do if(g=tr(r[t],a),m=tr(r[t+1],a),t+=i,t==e)return o[u++]=g,o[u++]=m,u;while(g==h&&m==f);for(;t<e;){const y=tr(r[t],a),p=tr(r[t+1],a);if(t+=i,y==g&&p==m)continue;const v=g-h,S=m-f,w=y-h,T=p-f;if(v*T==S*w&&(v<0&&w<v||v==w||v>0&&w>v)&&(S<0&&T<S||S==T||S>0&&T>S)){g=y,m=p;continue}o[u++]=g,o[u++]=m,h=g,f=m,g=y,m=p}return o[u++]=g,o[u++]=m,u}function Bg(r,t,e,i,a,o,u,h){for(let f=0,g=e.length;f<g;++f){const m=e[f];u=QT(r,t,m,i,a,o,u),h.push(u),t=m}return u}function $T(r,t,e,i,a,o,u,h){for(let f=0,g=e.length;f<g;++f){const m=e[f],y=[];u=Bg(r,t,m,i,a,o,u,y),h.push(y),t=m[m.length-1]}return u}class so extends Os{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new so(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,a){return a<fr(this.getExtent(),t,e)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,a))}getArea(){return mv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Uc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new so(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pc(this.flatCoordinates,0,t,this.stride),this.changed()}}class ai extends Os{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new ai(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,a){const o=this.flatCoordinates,u=ji(t,e,o[0],o[1]);if(u<a){const h=this.stride;for(let f=0;f<h;++f)i[f]=o[f];return i.length=h,u}return a}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Kl(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return bg(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yv(this.flatCoordinates,0,t,this.stride),this.changed()}}function JT(r,t,e,i,a){return!wg(a,function(u){return!ir(r,t,e,i,u[0],u[1])})}function ir(r,t,e,i,a,o){let u=0,h=r[e-i],f=r[e-i+1];for(;t<e;t+=i){const g=r[t],m=r[t+1];f<=o?m>o&&(g-h)*(o-f)-(a-h)*(m-f)>0&&u++:m<=o&&(g-h)*(o-f)-(a-h)*(m-f)<0&&u--,h=g,f=m}return u!==0}function Hg(r,t,e,i,a,o){if(e.length===0||!ir(r,t,e[0],i,a,o))return!1;for(let u=1,h=e.length;u<h;++u)if(ir(r,e[u-1],e[u],i,a,o))return!1;return!0}function tw(r,t,e,i,a,o){if(e.length===0)return!1;for(let u=0,h=e.length;u<h;++u){const f=e[u];if(Hg(r,t,f,i,a,o))return!0;t=f[f.length-1]}return!1}function Vg(r,t,e,i,a,o,u){let h,f,g,m,y,p,v;const S=a[o+1],w=[];for(let R=0,O=e.length;R<O;++R){const A=e[R];for(m=r[A-i],p=r[A-i+1],h=t;h<A;h+=i)y=r[h],v=r[h+1],(S<=p&&v<=S||p<=S&&S<=v)&&(g=(S-p)/(v-p)*(y-m)+m,w.push(g)),m=y,p=v}let T=NaN,b=-1/0;for(w.sort(ki),m=w[0],h=1,f=w.length;h<f;++h){y=w[h];const R=Math.abs(y-m);R>b&&(g=(m+y)/2,Hg(r,t,e,i,g,S)&&(T=g,b=R)),m=y}return isNaN(T)&&(T=a[o]),u?(u.push(T,S,b),u):[T,S,b]}function xv(r,t,e,i,a){let o=[];for(let u=0,h=e.length;u<h;++u){const f=e[u];o=Vg(r,t,f,i,a,2*u,o),t=f[f.length-1]}return o}function vv(r,t,e,i,a){let o;for(t+=i;t<e;t+=i)if(o=a(r.slice(t-i,t),r.slice(t,t+i)),o)return o;return!1}function Yc(r,t,e,i,a,o){return o=o??Qx(Dn(),r,t,e,i),Ue(a,o)?o[0]>=a[0]&&o[2]<=a[2]||o[1]>=a[1]&&o[3]<=a[3]?!0:vv(r,t,e,i,function(u,h){return zb(a,u,h)}):!1}function ew(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o){if(Yc(r,t,e[o],i,a))return!0;t=e[o]}return!1}function Ev(r,t,e,i,a){return!!(Yc(r,t,e,i,a)||ir(r,t,e,i,a[0],a[1])||ir(r,t,e,i,a[0],a[3])||ir(r,t,e,i,a[2],a[1])||ir(r,t,e,i,a[2],a[3]))}function Sv(r,t,e,i,a){if(!Ev(r,t,e[0],i,a))return!1;if(e.length===1)return!0;for(let o=1,u=e.length;o<u;++o)if(JT(r,e[o-1],e[o],i,a)&&!Yc(r,e[o-1],e[o],i,a))return!1;return!0}function nw(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o){const h=e[o];if(Sv(r,t,h,i,a))return!0;t=h[h.length-1]}return!1}function iw(r,t,e,i){for(;t<e-i;){for(let a=0;a<i;++a){const o=r[t+a];r[t+a]=r[e-i+a],r[e-i+a]=o}t+=i,e-=i}}function Zg(r,t,e,i){let a=0,o=r[e-i],u=r[e-i+1];for(;t<e;t+=i){const h=r[t],f=r[t+1];a+=(h-o)*(f+u),o=h,u=f}return a===0?void 0:a>0}function Cv(r,t,e,i,a){a=a!==void 0?a:!1;for(let o=0,u=e.length;o<u;++o){const h=e[o],f=Zg(r,t,h,i);if(o===0){if(a&&f||!a&&!f)return!1}else if(a&&!f||!a&&f)return!1;t=h}return!0}function sw(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o){const h=e[o];if(!Cv(r,t,h,i,a))return!1;h.length&&(t=h[h.length-1])}return!0}function ag(r,t,e,i,a){a=a!==void 0?a:!1;for(let o=0,u=e.length;o<u;++o){const h=e[o],f=Zg(r,t,h,i);(o===0?a&&f||!a&&!f:a&&!f||!a&&f)&&iw(r,t,h,i),t=h}return t}function Fp(r,t,e,i,a){for(let o=0,u=e.length;o<u;++o)t=ag(r,t,e[o],i,a);return t}function rw(r,t){const e=[];let i=0,a=0,o;for(let u=0,h=t.length;u<h;++u){const f=t[u],g=Zg(r,i,f,2);if(o===void 0&&(o=g),g===o)e.push(t.slice(a,u+1));else{if(e.length===0)continue;e[e.length-1].push(t[a])}a=u+1,i=f}return e}class Xi extends Os{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ri(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Xi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,a){return a<fr(this.getExtent(),t,e)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,a))}containsXY(t,e){return Hg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return _v(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ag(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,io(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ls(this.getExtent());this.flatInteriorPoint_=Vg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ai(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new so(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,a=[];let o=0;for(let u=0,h=i.length;u<h;++u){const f=i[u],g=new so(e.slice(o,f),t);a.push(g),o=f}return a}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Cv(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ag(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Bg(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Xi(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Sv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xg(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function zp(r){if(jc(r))throw new Error("Cannot create polygon from empty extent");const t=r[0],e=r[1],i=r[2],a=r[3],o=[t,e,t,a,i,a,i,e,t,e];return new Xi(o,"XY",[o.length])}function qg(r,t,e,i){const a=Yt(t)/e[0],o=Ye(t)/e[1];return i?Math.min(r,Math.max(a,o)):Math.min(r,Math.min(a,o))}function Kg(r,t,e){let i=Math.min(r,t);const a=50;return i*=Math.log(1+a*Math.max(0,r/t-1))/a+1,e&&(i=Math.max(i,e),i/=Math.log(1+a*Math.max(0,e/r-1))/a+1),Qt(i,e/2,t*2)}function aw(r,t,e,i){return t=t!==void 0?t:!0,(function(a,o,u,h){if(a!==void 0){const f=r[0],g=r[r.length-1],m=e?qg(f,e,u,i):f;if(h)return t?Kg(a,m,g):Qt(a,g,m);const y=Math.min(m,a),p=Math.floor(kg(r,y,o));return r[p]>m&&p<r.length-1?r[p+1]:r[p]}})}function lw(r,t,e,i,a,o){return i=i!==void 0?i:!0,e=e!==void 0?e:0,(function(u,h,f,g){if(u!==void 0){const m=a?qg(t,a,f,o):t;if(g)return i?Kg(u,m,e):Qt(u,e,m);const y=1e-9,p=Math.ceil(Math.log(t/m)/Math.log(r)-y),v=-h*(.5-y)+.5,S=Math.min(m,u),w=Math.floor(Math.log(t/S)/Math.log(r)+v),T=Math.max(p,w),b=t/Math.pow(r,T);return Qt(b,e,m)}})}function Gp(r,t,e,i,a){return e=e!==void 0?e:!0,(function(o,u,h,f){if(o!==void 0){const g=i?qg(r,i,h,a):r;return!e||!f?Qt(o,t,g):Kg(o,g,t)}})}function Wg(r){if(r!==void 0)return 0}function Pp(r){if(r!==void 0)return r}function ow(r){const t=2*Math.PI/r;return(function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e})}function uw(r){const t=Un(5);return(function(e,i){return i||e===void 0?e:Math.abs(e)<=t?0:e})}const cw=42,Qg=256,Ed=0;class ei extends ui{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Ng(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&dT(),t.center&&(t.center=Jt(t.center,this.projection_)),t.extent&&(t.extent=Ni(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const h in zn)delete e[h];this.setProperties(e,!0);const i=fw(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const a=hw(t),o=i.constraint,u=dw(t);this.constraints_={center:a,resolution:o,rotation:u},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const a=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),u=o/2*(a[3]-e[3]+e[1]-a[1]),h=o/2*(a[0]-e[0]+e[2]-a[2]);this.setCenterInternal([i[0]+u,i[1]-h])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let a=arguments[i];a.center&&(a=Object.assign({},a),a.center=Jt(a.center,this.getProjection())),a.anchor&&(a=Object.assign({},a),a.anchor=Jt(a.anchor,this.getProjection())),e[i]=a}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let a=0;for(;a<e&&!this.isDef();++a){const m=arguments[a];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(a===e){i&&Hu(i,!0);return}let o=Date.now(),u=this.targetCenter_.slice(),h=this.targetResolution_,f=this.targetRotation_;const g=[];for(;a<e;++a){const m=arguments[a],y={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||jT,callback:i};if(m.center&&(y.sourceCenter=u,y.targetCenter=m.center.slice(),u=y.targetCenter),m.zoom!==void 0?(y.sourceResolution=h,y.targetResolution=this.getResolutionForZoom(m.zoom),h=y.targetResolution):m.resolution&&(y.sourceResolution=h,y.targetResolution=m.resolution,h=y.targetResolution),m.rotation!==void 0){y.sourceRotation=f;const p=ya(m.rotation-f+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=f+p,f=y.targetRotation}gw(y)?y.complete=!0:o+=y.duration,g.push(y)}this.animations_.push(g),this.setHint(Ne.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ne.ANIMATING]>0}getInteracting(){return this.hints_[Ne.INTERACTING]>0}cancelAnimations(){this.setHint(Ne.ANIMATING,-this.hints_[Ne.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const a=this.animations_[e];if(a[0].callback&&Hu(a[0].callback,!1),!t)for(let o=0,u=a.length;o<u;++o){const h=a[o];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const a=this.animations_[i];let o=!0;for(let u=0,h=a.length;u<h;++u){const f=a[u];if(f.complete)continue;const g=t-f.start;let m=f.duration>0?g/f.duration:1;m>=1?(f.complete=!0,m=1):o=!1;const y=f.easing(m);if(f.sourceCenter){const p=f.sourceCenter[0],v=f.sourceCenter[1],S=f.targetCenter[0],w=f.targetCenter[1];this.nextCenter_=f.targetCenter;const T=p+y*(S-p),b=v+y*(w-v);this.targetCenter_=[T,b]}if(f.sourceResolution&&f.targetResolution){const p=y===1?f.targetResolution:f.sourceResolution+y*(f.targetResolution-f.sourceResolution);if(f.anchor){const v=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(p,0,v,!0);this.targetCenter_=this.calculateCenterZoom(S,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const p=y===1?ya(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+y*(f.targetRotation-f.sourceRotation);if(f.anchor){const v=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(v,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),e=!0,!f.complete)break}if(o){this.animations_[i]=null,this.setHint(Ne.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=a[0].callback;u&&Hu(u,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const a=this.getCenterInternal();return a!==void 0&&(i=[a[0]-e[0],a[1]-e[1]],Rg(i,t-this.getRotation()),Gb(i,e)),i}calculateCenterZoom(t,e){let i;const a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){const u=e[0]-t*(e[0]-a[0])/o,h=e[1]-t*(e[1]-a[1])/o;i=[u,h]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],a=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(a*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&lr(t,this.getProjection())}getCenterInternal(){return this.get(zn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return jg(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();zt(e,"The view center is not defined");const i=this.getResolution();zt(i!==void 0,"The view resolution is not defined");const a=this.getRotation();return zt(a!==void 0,"The view rotation is not defined"),tg(e,i,a,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(zn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ni(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Yt(t)/e[0],a=Ye(t)/e[1];return Math.max(i,a)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(e/i)/Math.log(t);return(function(o){return e/Math.pow(t,o*a)})}getRotation(){return this.get(zn.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(i/a)/e;return(function(u){return Math.log(i/u)/e/o})}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let a=this.getCenterInternal();const o=this.padding_;if(o){const u=this.getViewportSizeMinusPadding_();a=Sd(a,this.getViewportSize_(),[u[0]/2+o[3],u[1]/2+o[0]],e,i)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,a;if(this.resolutions_){const o=kg(this.resolutions_,t,1);e=o,i=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=i/this.resolutions_[o+1]}else i=this.maxResolution_,a=this.zoomFactor_;return e+Math.log(i/t)/Math.log(a)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const e=Qt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Qt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(zt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){zt(!jc(t),"Cannot fit empty extent provided as `geometry`");const a=Ni(t,this.getProjection());i=zp(a)}else if(t.getType()==="Circle"){const a=Ni(t.getExtent(),this.getProjection());i=zp(a),i.rotate(this.getRotation(),Ls(a))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),a=Math.sin(-e),o=t.getFlatCoordinates(),u=t.getStride();let h=1/0,f=1/0,g=-1/0,m=-1/0;for(let y=0,p=o.length;y<p;y+=u){const v=o[y]*i-o[y+1]*a,S=o[y]*a+o[y+1]*i;h=Math.min(h,v),f=Math.min(f,S),g=Math.max(g,v),m=Math.max(m,S)}return[h,f,g,m]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const a=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1;let u;e.minResolution!==void 0?u=e.minResolution:e.maxZoom!==void 0?u=this.getResolutionForZoom(e.maxZoom):u=0;const h=this.rotatedExtentForGeometry(t);let f=this.getResolutionForExtentInternal(h,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);f=isNaN(f)?u:Math.max(f,u),f=this.getConstrainedResolution(f,o?0:1);const g=this.getRotation(),m=Math.sin(g),y=Math.cos(g),p=Ls(h);p[0]+=(a[1]-a[3])/2*f,p[1]+=(a[0]-a[2])/2*f;const v=p[0]*y-p[1]*m,S=p[1]*y+p[0]*m,w=this.getConstrainedCenter([v,S],f),T=e.callback?e.callback:no;e.duration!==void 0?this.animateInternal({resolution:f,center:w,duration:e.duration,easing:e.easing},T):(this.targetResolution_=f,this.targetCenter_=w,this.applyTargetState_(!1,!0),Hu(T,!0))}centerOn(t,e,i){this.centerOnInternal(Jt(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Sd(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,a){let o;const u=this.padding_;if(u&&t){const h=this.getViewportSizeMinusPadding_(-i),f=Sd(t,a,[h[0]/2+u[3],h[1]/2+u[0]],e,i);o=[t[0]-f[0],t[1]-f[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=lr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Jt(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Jt(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(a,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Jt(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,a=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(a),u=this.constraints_.resolution(this.targetResolution_,0,o,i),h=this.constraints_.center(this.targetCenter_,u,o,i,this.calculateCenterShift(this.targetCenter_,u,a,o));this.get(zn.ROTATION)!==a&&this.set(zn.ROTATION,a),this.get(zn.RESOLUTION)!==u&&(this.set(zn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(zn.CENTER)||!ze(this.get(zn.CENTER),h))&&this.set(zn.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const a=e||0,o=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(o),h=this.constraints_.resolution(this.targetResolution_,a,u),f=this.constraints_.center(this.targetCenter_,h,u,!1,this.calculateCenterShift(this.targetCenter_,h,o,u));if(t===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=o,this.targetCenter_=f,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==o||!this.getCenterInternal()||!ze(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:f,resolution:h,duration:t,easing:Ia,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ne.INTERACTING,1)}endInteraction(t,e,i){i=i&&Jt(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Ne.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function Hu(r,t){setTimeout(function(){r(t)},0)}function hw(r){if(r.extent!==void 0){const e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Np(r.extent,r.constrainOnlyCenter,e)}const t=Ng(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Np(e,!1,!1)}return IT}function fw(r){let t,e,i,u=r.minZoom!==void 0?r.minZoom:Ed,h=r.maxZoom!==void 0?r.maxZoom:28;const f=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,m=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,y=r.showFullExtent!==void 0?r.showFullExtent:!1,p=Ng(r.projection,"EPSG:3857"),v=p.getExtent();let S=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&p.isGlobal()&&(S=!1,w=v),r.resolutions!==void 0){const T=r.resolutions;e=T[u],i=T[h]!==void 0?T[h]:T[T.length-1],r.constrainResolution?t=aw(T,m,!S&&w,y):t=Gp(e,i,m,!S&&w,y)}else{const b=(v?Math.max(Yt(v),Ye(v)):360*Ag.degrees/p.getMetersPerUnit())/Qg/Math.pow(2,Ed),R=b/Math.pow(2,28-Ed);e=r.maxResolution,e!==void 0?u=0:e=b/Math.pow(f,u),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=e/Math.pow(f,h):i=b/Math.pow(f,h):i=R),h=u+Math.floor(Math.log(e/i)/Math.log(f)),i=e/Math.pow(f,h-u),r.constrainResolution?t=lw(f,e,i,m,!S&&w,y):t=Gp(e,i,m,!S&&w,y)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:u,zoomFactor:f}}function dw(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const e=r.constrainRotation;return e===void 0||e===!0?uw():e===!1?Pp:typeof e=="number"?ow(e):Pp}return Wg}function gw(r){return!(r.sourceCenter&&r.targetCenter&&!ze(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Sd(r,t,e,i,a){const o=Math.cos(-a);let u=Math.sin(-a),h=r[0]*o-r[1]*u,f=r[1]*o+r[0]*u;h+=(t[0]/2-e[0])*i,f+=(e[1]-t[1]/2)*i,u=-u;const g=h*o-f*u,m=f*o+h*u;return[g,m]}const Vu="ol-hidden",Xc="ol-unselectable",$g="ol-control",Up="ol-collapsed",mw=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Yp=["style","variant","weight","size","lineHeight","family"],lg={normal:400,bold:700},og=function(r){const t=r.match(mw);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,a=Yp.length;i<a;++i){const o=t[i+1];o!==void 0&&(e[Yp[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(e.weight))&&e.weight in lg&&(e.weight=lg[e.weight]),e.families=e.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),e};function de(r,t,e,i){let a;return e&&e.length?a=e.shift():Fg?a=new OffscreenCanvas(r||300,t||300):a=document.createElement("canvas"),r&&(a.width=r),t&&(a.height=t),a.getContext("2d",i)}let Cd;function pc(){return Cd||(Cd=de(1,1)),Cd}function Bc(r){const t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function Xp(r,t){const e=t.parentNode;e&&e.replaceChild(r,t)}function _w(r){for(;r.lastChild;)r.lastChild.remove()}function yw(r,t){const e=r.childNodes;for(let i=0;;++i){const a=e[i],o=t[i];if(!a&&!o)break;if(a!==o){if(!a){r.appendChild(o);continue}if(!o){r.removeChild(a),--i;continue}r.insertBefore(o,a)}}}class Jg extends ui{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let e=0,i=this.listenerKeys.length;e<i;++e)Kt(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==no&&this.listenerKeys.push(Ot(t,ws.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class pw extends Jg{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",a=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"›",u=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=u):this.collapseLabel_=o;const h=t.label!==void 0?t.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=a):this.label_=h;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const g=e+" "+Xc+" "+$g+(this.collapsed_&&this.collapsible_?" "+Up:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=g,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),i=new Set(e.flatMap(a=>a.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(a=>i.add(a)):i.add(this.attributions_)),!this.overrideCollapsible_){const a=!e.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(a)}return Array.from(i)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(a=>bT(()=>a))),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Hi(e,this.renderedAttributions_)){_w(this.ulElement_);for(let a=0,o=e.length;a<o;++a){const u=document.createElement("li");u.innerHTML=e[a],this.ulElement_.appendChild(u)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Up),this.collapsed_?Xp(this.collapseLabel_,this.label_):Xp(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class xw extends Jg{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",a=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=a,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(a));const o=t.tipLabel?t.tipLabel:"Reset rotation",u=document.createElement("button");u.className=e+"-reset",u.setAttribute("type","button"),u.title=o,u.appendChild(this.label_),u.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+Xc+" "+$g,f=this.element;f.className=h,f.appendChild(u),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Vu)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Ia}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const a="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Vu);!o&&i===0?this.element.classList.add(Vu):o&&i!==0&&this.element.classList.remove(Vu)}this.label_.style.transform=a}this.rotation_=i}}class vw extends Jg{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,a=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",u=t.zoomInLabel!==void 0?t.zoomInLabel:"+",h=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",f=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",g=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=a,m.setAttribute("type","button"),m.title=f,m.appendChild(typeof u=="string"?document.createTextNode(u):u),m.addEventListener(pt.CLICK,this.handleClick_.bind(this,i),!1);const y=document.createElement("button");y.className=o,y.setAttribute("type","button"),y.title=g,y.appendChild(typeof h=="string"?document.createTextNode(h):h),y.addEventListener(pt.CLICK,this.handleClick_.bind(this,-i),!1);const p=e+" "+Xc+" "+$g,v=this.element;v.className=p,v.appendChild(m),v.appendChild(y),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const a=i.getZoom();if(a!==void 0){const o=i.getConstrainedZoom(a+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Ia})):i.setZoom(o)}}}function Ew(r){r=r||{};const t=new wn;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new vw(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new xw(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new pw(r.attributionOptions)),t}class Sw{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const a=this.points_[e+2]-this.points_[i+2];if(a<1e3/60)return!1;const o=this.points_[e]-this.points_[i],u=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(u,o),this.initialVelocity_=Math.sqrt(o*o+u*u)/a,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const ug={ACTIVE:"active"};class So extends ui{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ug.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(ug.ACTIVE,t)}setMap(t){this.map_=t}}function Cw(r,t,e){const i=r.getCenterInternal();if(i){const a=[i[0]+t[0],i[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:kT,center:r.getConstrainedCenter(a)})}}function tm(r,t,e,i){const a=r.getZoom();if(a===void 0)return;const o=r.getConstrainedZoom(a+t),u=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:u,anchor:e,duration:i!==void 0?i:250,easing:Ia})}class bw extends So{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Dt.DBLCLICK){const i=t.originalEvent,a=t.map,o=t.coordinate,u=i.shiftKey?-this.delta_:this.delta_,h=a.getView();tm(h,u,o,this.duration_),i.preventDefault(),e=!0}return!e}}function cg(r){const t=arguments;return function(e){let i=!0;for(let a=0,o=t.length;a<o&&(i=i&&t[a](e),!!i);++a);return i}}const Tw=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},ww=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Rw=function(r){const t=r.map.getTargetElement(),e=t.getRootNode(),i=r.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(i):t.contains(i)},bv=function(r){const t=r.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?Rw(r):!0},xc=Ra,Tv=function(r){const t=r.originalEvent;return"pointerId"in t&&t.button==0&&!(AT&&uv&&t.ctrlKey)},Aw=Na,Mw=function(r){return r.type==Dt.SINGLECLICK},em=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Dw=function(r){const t=r.originalEvent;return uv?t.metaKey:t.ctrlKey},wv=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Rv=function(r){const t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},bd=function(r){const t=r.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},Av=function(r){const t=r.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class gr extends So{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Dt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Dt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Dt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Dt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function nm(r){const t=r.length;let e=0,i=0;for(let a=0;a<t;a++)e+=r[a].clientX,i+=r[a].clientY;return{clientX:e/t,clientY:i/t}}class Lw extends gr{constructor(t){super({stopDown:Na}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:cg(em,Av);this.condition_=t.onFocusOnly?cg(bv,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,a=e.getEventPixel(nm(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(a[0],a[1]),this.lastCentroid){const o=[this.lastCentroid[0]-a[0],a[1]-this.lastCentroid[1]],h=t.map.getView();Pb(o,h.getResolution()),Rg(o,h.getRotation()),h.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=a,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),u=i.getCenterInternal(),h=e.getPixelFromCoordinateInternal(u),f=e.getCoordinateFromPixelInternal([h[0]-a*Math.cos(o),h[1]-a*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(f),duration:500,easing:Ia})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Ow extends gr{constructor(t){t=t||{},super({stopDown:Na}),this.condition_=t.condition?t.condition:ww,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!bd(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Wg)return;const a=e.getSize(),o=t.pixel,u=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){const h=u-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=u}handleUpEvent(t){return bd(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return bd(t)&&Tv(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Nw extends zc{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",a=this.element_.style;a.left=Math.min(t[0],e[0])+i,a.top=Math.min(t[1],e[1])+i,a.width=Math.abs(e[0]-t[0])+i,a.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,a=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new Xi([a])}getGeometry(){return this.geometry_}}const ia={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fl extends Hn{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Iw extends gr{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Nw(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??Tv,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const a=i[0]-e[0],o=i[1]-e[1];return a*a+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Fl(ia.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Fl(e?ia.BOXEND:ia.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fl(ia.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fl(ia.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fl(ia.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class jw extends Iw{constructor(t){t=t||{};const e=t.condition?t.condition:wv;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let a=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(a),u=i.getResolutionForExtentInternal(o),h=i.getResolution()/u;a=a.clone(),a.scale(h*h)}i.fitInternal(a,{duration:this.duration_,easing:Ia})}}const Js={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class kw extends So{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return em(e)&&Rv(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN){const i=t.originalEvent,a=i.key;if(this.condition_(t)&&(a==Js.DOWN||a==Js.LEFT||a==Js.RIGHT||a==Js.UP)){const u=t.map.getView(),h=u.getResolution()*this.pixelDelta_;let f=0,g=0;a==Js.DOWN?g=-h:a==Js.LEFT?f=-h:a==Js.RIGHT?f=h:g=h;const m=[f,g];Rg(m,u.getRotation()),Cw(u,m,this.duration_),i.preventDefault(),e=!0}}return!e}}class Fw extends So{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Dw(e)&&Rv(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN||t.type==pt.KEYPRESS){const i=t.originalEvent,a=i.key;if(this.condition_(t)&&(a==="+"||a==="-")){const o=t.map,u=a==="+"?this.delta_:-this.delta_,h=o.getView();tm(h,u,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const zw=40,Gw=300;class Pw extends So{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:xc;this.condition_=t.onFocusOnly?cg(bv,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==pt.WHEEL)return!0;const i=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let o=a.deltaY;switch(a.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=zw;break;case WheelEvent.DOM_DELTA_PAGE:o*=Gw;break}if(o===0)return!1;this.lastDelta_=o;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const h=i.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=o;const f=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),f),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),tm(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Uw extends gr{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Na),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-i.clientY,a.clientX-i.clientX);if(this.lastAngle_!==void 0){const f=o-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=f}this.lastAngle_=o;const u=t.map,h=u.getView();h.getConstraints().rotation!==Wg&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(nm(this.targetPointers))),this.rotating_&&(u.render(),h.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class Yw extends gr{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Na),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],a=this.targetPointers[1],o=i.clientX-a.clientX,u=i.clientY-a.clientY,h=Math.sqrt(o*o+u*u);this.lastDistance_!==void 0&&(e=this.lastDistance_/h),this.lastDistance_=h;const f=t.map,g=f.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(nm(this.targetPointers))),f.render(),g.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),a=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,a),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function Xw(r){r=r||{};const t=new wn,e=new Sw(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new Ow),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new bw({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new Lw({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new Uw),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new Yw({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new kw),t.push(new Fw({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new Pw({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new jw({duration:r.zoomDuration})),t}const Ut={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Mv extends ui{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Ut.OPACITY]=t.opacity!==void 0?t.opacity:1,zt(typeof e[Ut.OPACITY]=="number","Layer opacity must be a number"),e[Ut.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Ut.Z_INDEX]=t.zIndex,e[Ut.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Ut.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Ut.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Ut.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=Qt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return It()}getLayerStatesArray(t){return It()}getExtent(){return this.get(Ut.EXTENT)}getMaxResolution(){return this.get(Ut.MAX_RESOLUTION)}getMinResolution(){return this.get(Ut.MIN_RESOLUTION)}getMinZoom(){return this.get(Ut.MIN_ZOOM)}getMaxZoom(){return this.get(Ut.MAX_ZOOM)}getOpacity(){return this.get(Ut.OPACITY)}getSourceState(){return It()}getVisible(){return this.get(Ut.VISIBLE)}getZIndex(){return this.get(Ut.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Ut.EXTENT,t)}setMaxResolution(t){this.set(Ut.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Ut.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Ut.MAX_ZOOM,t)}setMinZoom(t){this.set(Ut.MIN_ZOOM,t)}setOpacity(t){zt(typeof t=="number","Layer opacity must be a number"),this.set(Ut.OPACITY,t)}setVisible(t){this.set(Ut.VISIBLE,t)}setZIndex(t){this.set(Ut.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Rs extends Hn{constructor(t,e){super(t),this.layer=e}}const Td={LAYERS:"layers"};class ja extends Mv{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Td.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new wn(i.slice(),{unique:!0}):zt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new wn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Kt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ot(t,Ie.ADD,this.handleLayersAdd_,this),Ot(t,Ie.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Kt);vo(this.listenerKeys_);const e=t.getArray();for(let i=0,a=e.length;i<a;i++){const o=e[i];this.registerLayerListeners_(o),this.dispatchEvent(new Rs("addlayer",o))}this.changed()}registerLayerListeners_(t){const e=[Ot(t,wa.PROPERTYCHANGE,this.handleLayerChange_,this),Ot(t,pt.CHANGE,this.handleLayerChange_,this)];t instanceof ja&&e.push(Ot(t,"addlayer",this.handleLayerGroupAdd_,this),Ot(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ct(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Rs("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Rs("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Rs("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=Ct(e);this.listenerKeys_[i].forEach(Kt),delete this.listenerKeys_[i],this.dispatchEvent(new Rs("removelayer",e)),this.changed()}getLayers(){return this.get(Td.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let a=0,o=i.length;a<o;++a)this.dispatchEvent(new Rs("removelayer",i[a]))}this.set(Td.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(e)});const a=this.getLayerState();let o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(let u=i,h=e.length;u<h;u++){const f=e[u];f.opacity*=a.opacity,f.visible=f.visible&&a.visible,f.maxResolution=Math.min(f.maxResolution,a.maxResolution),f.minResolution=Math.max(f.minResolution,a.minResolution),f.minZoom=Math.max(f.minZoom,a.minZoom),f.maxZoom=Math.min(f.maxZoom,a.maxZoom),a.extent!==void 0&&(f.extent!==void 0?f.extent=ar(f.extent,a.extent):f.extent=a.extent),f.zIndex===void 0&&(f.zIndex=o)}return e}getSourceState(){return"ready"}}const Rn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Hc extends Mv{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Ut.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Ut.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Kt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ot(t,pt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof ei?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let a;if(e.layerStatesArray){if(a=e.layerStatesArray.find(u=>u.layer===this),!a)return!1}else a=this.getLayerState();const o=this.getExtent();return im(a,e.viewState)&&(!o||Ue(o,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];const i=t instanceof ei?t.getViewStateAndExtent():t;let a=e(i);return Array.isArray(a)||(a=[a]),a}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Ut.MAP,t)}getMapInternal(){return this.get(Ut.MAP)}setMap(t){this.mapPrecomposeKey_&&(Kt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Kt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ot(t,Rn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ot(this,pt.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);zt(!e.some(a=>a.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}setSource(t){this.set(Ut.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function im(r,t){if(!r.visible)return!1;const e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;const i=t.zoom;return i>r.minZoom&&i<=r.maxZoom}function Dv(r,t,e=0,i=r.length-1,a=Bw){for(;i>e;){if(i-e>600){const f=i-e+1,g=t-e+1,m=Math.log(f),y=.5*Math.exp(2*m/3),p=.5*Math.sqrt(m*y*(f-y)/f)*(g-f/2<0?-1:1),v=Math.max(e,Math.floor(t-g*y/f+p)),S=Math.min(i,Math.floor(t+(f-g)*y/f+p));Dv(r,t,v,S,a)}const o=r[t];let u=e,h=i;for(zl(r,e,t),a(r[i],o)>0&&zl(r,e,i);u<h;){for(zl(r,u,h),u++,h--;a(r[u],o)<0;)u++;for(;a(r[h],o)>0;)h--}a(r[e],o)===0?zl(r,e,h):(h++,zl(r,h,i)),h<=t&&(e=h+1),t<=h&&(i=h-1)}}function zl(r,t,e){const i=r[t];r[t]=r[e],r[e]=i}function Bw(r,t){return r<t?-1:r>t?1:0}let Lv=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!qu(t,e))return i;const a=this.toBBox,o=[];for(;e;){for(let u=0;u<e.children.length;u++){const h=e.children[u],f=e.leaf?a(h):h;qu(t,f)&&(e.leaf?i.push(h):Rd(t,f)?this._all(h,i):o.push(h))}e=o.pop()}return i}collides(t){let e=this.data;if(!qu(t,e))return!1;const i=[];for(;e;){for(let a=0;a<e.children.length;a++){const o=e.children[a],u=e.leaf?this.toBBox(o):o;if(qu(t,u)){if(e.leaf||Rd(t,u))return!0;i.push(o)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=ha([]),this}remove(t,e){if(!t)return this;let i=this.data;const a=this.toBBox(t),o=[],u=[];let h,f,g;for(;i||o.length;){if(i||(i=o.pop(),f=o[o.length-1],h=u.pop(),g=!0),i.leaf){const m=Hw(t,i.children,e);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!g&&!i.leaf&&Rd(i,a)?(o.push(i),u.push(h),h=0,f=i,i=i.children[0]):f?(h++,i=f.children[h],g=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,a){const o=i-e+1;let u=this._maxEntries,h;if(o<=u)return h=ha(t.slice(e,i+1)),sa(h,this.toBBox),h;a||(a=Math.ceil(Math.log(o)/Math.log(u)),u=Math.ceil(o/Math.pow(u,a-1))),h=ha([]),h.leaf=!1,h.height=a;const f=Math.ceil(o/u),g=f*Math.ceil(Math.sqrt(u));Bp(t,e,i,g,this.compareMinX);for(let m=e;m<=i;m+=g){const y=Math.min(m+g-1,i);Bp(t,m,y,f,this.compareMinY);for(let p=m;p<=y;p+=f){const v=Math.min(p+f-1,y);h.children.push(this._build(t,p,v,a-1))}}return sa(h,this.toBBox),h}_chooseSubtree(t,e,i,a){for(;a.push(e),!(e.leaf||a.length-1===i);){let o=1/0,u=1/0,h;for(let f=0;f<e.children.length;f++){const g=e.children[f],m=wd(g),y=qw(t,g)-m;y<u?(u=y,o=m<o?m:o,h=g):y===u&&m<o&&(o=m,h=g)}e=h||e.children[0]}return e}_insert(t,e,i){const a=i?t:this.toBBox(t),o=[],u=this._chooseSubtree(a,this.data,e,o);for(u.children.push(t),Bl(u,a);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(a,o,e)}_split(t,e){const i=t[e],a=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,a);const u=this._chooseSplitIndex(i,o,a),h=ha(i.children.splice(u,i.children.length-u));h.height=i.height,h.leaf=i.leaf,sa(i,this.toBBox),sa(h,this.toBBox),e?t[e-1].children.push(h):this._splitRoot(i,h)}_splitRoot(t,e){this.data=ha([t,e]),this.data.height=t.height+1,this.data.leaf=!1,sa(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let a,o=1/0,u=1/0;for(let h=e;h<=i-e;h++){const f=Xl(t,0,h,this.toBBox),g=Xl(t,h,i,this.toBBox),m=Kw(f,g),y=wd(f)+wd(g);m<o?(o=m,a=h,u=y<u?y:u):m===o&&y<u&&(u=y,a=h)}return a||i-e}_chooseSplitAxis(t,e,i){const a=t.leaf?this.compareMinX:Vw,o=t.leaf?this.compareMinY:Zw,u=this._allDistMargin(t,e,i,a),h=this._allDistMargin(t,e,i,o);u<h&&t.children.sort(a)}_allDistMargin(t,e,i,a){t.children.sort(a);const o=this.toBBox,u=Xl(t,0,e,o),h=Xl(t,i-e,i,o);let f=Zu(u)+Zu(h);for(let g=e;g<i-e;g++){const m=t.children[g];Bl(u,t.leaf?o(m):m),f+=Zu(u)}for(let g=i-e-1;g>=e;g--){const m=t.children[g];Bl(h,t.leaf?o(m):m),f+=Zu(h)}return f}_adjustParentBBoxes(t,e,i){for(let a=i;a>=0;a--)Bl(e[a],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():sa(t[e],this.toBBox)}};function Hw(r,t,e){if(!e)return t.indexOf(r);for(let i=0;i<t.length;i++)if(e(r,t[i]))return i;return-1}function sa(r,t){Xl(r,0,r.children.length,t,r)}function Xl(r,t,e,i,a){a||(a=ha(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(let o=t;o<e;o++){const u=r.children[o];Bl(a,r.leaf?i(u):u)}return a}function Bl(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function Vw(r,t){return r.minX-t.minX}function Zw(r,t){return r.minY-t.minY}function wd(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Zu(r){return r.maxX-r.minX+(r.maxY-r.minY)}function qw(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function Kw(r,t){const e=Math.max(r.minX,t.minX),i=Math.max(r.minY,t.minY),a=Math.min(r.maxX,t.maxX),o=Math.min(r.maxY,t.maxY);return Math.max(0,a-e)*Math.max(0,o-i)}function Rd(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function qu(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function ha(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bp(r,t,e,i,a){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=i)continue;const u=t+Math.ceil((e-t)/i/2)*i;Dv(r,u,t,e,a),o.push(t,u,u,e)}}const sm=[NaN,NaN,NaN,0];let Ad;function Ww(){return Ad||(Ad=de(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Ad}const Qw=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,$w=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Jw=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,tR=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ku(r,t){return r.endsWith("%")?Number(r.substring(0,r.length-1))/t:Number(r)}function Ql(r){throw new Error('failed to parse "'+r+'" as color')}function Ov(r){if(r.toLowerCase().startsWith("rgb")){const o=r.match($w)||r.match(Qw)||r.match(Jw);if(o){const u=o[4],h=100/255;return[Qt(Ku(o[1],h)+.5|0,0,255),Qt(Ku(o[2],h)+.5|0,0,255),Qt(Ku(o[3],h)+.5|0,0,255),u!==void 0?Qt(Ku(u,100),0,1):1]}Ql(r)}if(r.startsWith("#")){if(tR.test(r)){const o=r.substring(1),u=o.length<=4?1:2,h=[0,0,0,255];for(let f=0,g=o.length;f<g;f+=u){let m=parseInt(o.substring(f,f+u),16);u===1&&(m+=m<<4),h[f/u]=m}return h[3]=h[3]/255,h}Ql(r)}const t=Ww();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=r,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=r,t.fillStyle===e&&Ql(r));const i=t.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return Ov(i);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const a=Array.from(t.getImageData(0,0,1,1).data);return a[3]=yo(a[3]/255,3),a}function eR(r){return typeof r=="string"?r:am(r)}const nR=1024,Gl={};let Md=0;function iR(r){if(r.length===4)return r;const t=r.slice();return t[3]=1,t}function Dd(r){return r>.0031308?Math.pow(r,1/2.4)*269.025-14.025:r*3294.6}function Ld(r){return r>.2068965?Math.pow(r,3):(r-4/29)*(108/841)}function Od(r){return r>10.314724?Math.pow((r+14.025)/269.025,2.4):r/3294.6}function Nd(r){return r>.0088564?Math.pow(r,1/3):r/(108/841)+4/29}function Hp(r){const t=Od(r[0]),e=Od(r[1]),i=Od(r[2]),a=Nd(t*.222488403+e*.716873169+i*.06060791),o=500*(Nd(t*.452247074+e*.399439023+i*.148375274)-a),u=200*(a-Nd(t*.016863605+e*.117638439+i*.865350722)),h=Math.atan2(u,o)*(180/Math.PI);return[116*a-16,Math.sqrt(o*o+u*u),h<0?h+360:h,r[3]]}function sR(r){const t=(r[0]+16)/116,e=r[1],i=r[2]*Math.PI/180,a=Ld(t),o=Ld(t+e/500*Math.cos(i)),u=Ld(t-e/200*Math.sin(i)),h=Dd(o*3.021973625-a*1.617392459-u*.404875592),f=Dd(o*-.943766287+a*1.916279586+u*.027607165),g=Dd(o*.069407491-a*.22898585+u*1.159737864);return[Qt(h+.5|0,0,255),Qt(f+.5|0,0,255),Qt(g+.5|0,0,255),r[3]]}function rm(r){if(r==="none")return sm;if(Gl.hasOwnProperty(r))return Gl[r];if(Md>=nR){let e=0;for(const i in Gl)(e++&3)===0&&(delete Gl[i],--Md)}const t=Ov(r);t.length!==4&&Ql(r);for(const e of t)isNaN(e)&&Ql(r);return Gl[r]=t,++Md,t}function Aa(r){return Array.isArray(r)?r:rm(r)}function am(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const a=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+t+","+e+","+i+","+a+")"}function Vp(r){return r[0]>0&&r[1]>0}function rR(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function tn(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}let mr=0;const Ge=1<<mr++,Mt=1<<mr++,Qe=1<<mr++,Pn=1<<mr++,ur=1<<mr++,Hl=1<<mr++,Wu=Math.pow(2,mr)-1,lm={[Ge]:"boolean",[Mt]:"number",[Qe]:"string",[Pn]:"color",[ur]:"number[]",[Hl]:"size"},aR=Object.keys(lm).map(Number).sort(ki);function lR(r){return r in lm}function Vl(r){const t=[];for(const e of aR)Zl(r,e)&&t.push(lm[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Zl(r,t){return(r&t)===t}function Es(r,t){return r===t}class fe{constructor(t,e){if(!lR(t))throw new Error(`literal expressions must have a specific type, got ${Vl(t)}`);this.type=t,this.value=e}}class oR{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function Nv(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Re(r,t,e){switch(typeof r){case"boolean":{if(Es(t,Qe))return new fe(Qe,r?"true":"false");if(!Zl(t,Ge))throw new Error(`got a boolean, but expected ${Vl(t)}`);return new fe(Ge,r)}case"number":{if(Es(t,Hl))return new fe(Hl,tn(r));if(Es(t,Ge))return new fe(Ge,!!r);if(Es(t,Qe))return new fe(Qe,r.toString());if(!Zl(t,Mt))throw new Error(`got a number, but expected ${Vl(t)}`);return new fe(Mt,r)}case"string":{if(Es(t,Pn))return new fe(Pn,rm(r));if(Es(t,Ge))return new fe(Ge,!!r);if(!Zl(t,Qe))throw new Error(`got a string, but expected ${Vl(t)}`);return new fe(Qe,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return xR(r,t,e);for(const i of r)if(typeof i!="number")throw new Error("expected an array of numbers");if(Es(t,Hl)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new fe(Hl,r)}if(Es(t,Pn)){if(r.length===3)return new fe(Pn,[...r,1]);if(r.length===4)return new fe(Pn,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!Zl(t,ur))throw new Error(`got an array of numbers, but expected ${Vl(t)}`);return new fe(ur,r)}const K={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},uR={[K.Get]:yt(vt(1,1/0),Zp),[K.Var]:yt(vt(1,1),cR),[K.Has]:yt(vt(1,1/0),Zp),[K.Id]:yt(hR,ra),[K.Concat]:yt(vt(2,1/0),kt(Qe)),[K.GeometryType]:yt(fR,ra),[K.LineMetric]:yt(ra),[K.Resolution]:yt(Id,ra),[K.Zoom]:yt(Id,ra),[K.Time]:yt(Id,ra),[K.Any]:yt(vt(2,1/0),kt(Ge)),[K.All]:yt(vt(2,1/0),kt(Ge)),[K.Not]:yt(vt(1,1),kt(Ge)),[K.Equal]:yt(vt(2,2),kt(Wu)),[K.NotEqual]:yt(vt(2,2),kt(Wu)),[K.GreaterThan]:yt(vt(2,2),kt(Mt)),[K.GreaterThanOrEqualTo]:yt(vt(2,2),kt(Mt)),[K.LessThan]:yt(vt(2,2),kt(Mt)),[K.LessThanOrEqualTo]:yt(vt(2,2),kt(Mt)),[K.Multiply]:yt(vt(2,1/0),qp),[K.Coalesce]:yt(vt(2,1/0),qp),[K.Divide]:yt(vt(2,2),kt(Mt)),[K.Add]:yt(vt(2,1/0),kt(Mt)),[K.Subtract]:yt(vt(2,2),kt(Mt)),[K.Clamp]:yt(vt(3,3),kt(Mt)),[K.Mod]:yt(vt(2,2),kt(Mt)),[K.Pow]:yt(vt(2,2),kt(Mt)),[K.Abs]:yt(vt(1,1),kt(Mt)),[K.Floor]:yt(vt(1,1),kt(Mt)),[K.Ceil]:yt(vt(1,1),kt(Mt)),[K.Round]:yt(vt(1,1),kt(Mt)),[K.Sin]:yt(vt(1,1),kt(Mt)),[K.Cos]:yt(vt(1,1),kt(Mt)),[K.Atan]:yt(vt(1,2),kt(Mt)),[K.Sqrt]:yt(vt(1,1),kt(Mt)),[K.Match]:yt(vt(4,1/0),Kp,gR),[K.Between]:yt(vt(3,3),kt(Mt)),[K.Interpolate]:yt(vt(6,1/0),Kp,mR),[K.Case]:yt(vt(3,1/0),dR,_R),[K.In]:yt(vt(2,2),yR),[K.Number]:yt(vt(1,1/0),kt(Wu)),[K.String]:yt(vt(1,1/0),kt(Wu)),[K.Array]:yt(vt(1,1/0),kt(Mt)),[K.Color]:yt(vt(1,4),kt(Mt)),[K.Band]:yt(vt(1,3),kt(Mt)),[K.Palette]:yt(vt(2,2),pR),[K.ToString]:yt(vt(1,1),kt(Ge|Mt|Qe|Pn))};function Zp(r,t,e){const i=r.length-1,a=new Array(i);for(let o=0;o<i;++o){const u=r[o+1];switch(typeof u){case"number":{a[o]=new fe(Mt,u);break}case"string":{a[o]=new fe(Qe,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}o===0&&e.properties.add(String(u))}return a}function cR(r,t,e){const i=r[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return e.variables.add(i),[new fe(Qe,i)]}function hR(r,t,e){e.featureId=!0}function fR(r,t,e){e.geometryType=!0}function Id(r,t,e){e.mapState=!0}function ra(r,t,e){const i=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function vt(r,t){return function(e,i,a){const o=e[0],u=e.length-1;if(r===t){if(u!==r){const h=r===1?"":"s";throw new Error(`expected ${r} argument${h} for ${o}, got ${u}`)}}else if(u<r||u>t){const h=t===1/0?`${r} or more`:`${r} to ${t}`;throw new Error(`expected ${h} arguments for ${o}, got ${u}`)}}}function qp(r,t,e){const i=r.length-1,a=new Array(i);for(let o=0;o<i;++o){const u=Re(r[o+1],t,e);a[o]=u}return a}function kt(r){return function(t,e,i){const a=t.length-1,o=new Array(a);for(let u=0;u<a;++u){const h=Re(t[u+1],r,i);o[u]=h}return o}}function dR(r,t,e){const i=r[0],a=r.length-1;if(a%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${a} instead`)}function Kp(r,t,e){const i=r[0],a=r.length-1;if(a%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${a} instead`)}function gR(r,t,e){const i=r.length-1,a=Qe|Mt|Ge,o=Re(r[1],a,e),u=Re(r[r.length-1],t,e),h=new Array(i-2);for(let f=0;f<i-2;f+=2){try{const g=Re(r[f+2],o.type,e);h[f]=g}catch(g){throw new Error(`failed to parse argument ${f+1} of match expression: ${g.message}`)}try{const g=Re(r[f+3],u.type,e);h[f+1]=g}catch(g){throw new Error(`failed to parse argument ${f+2} of match expression: ${g.message}`)}}return[o,...h,u]}function mR(r,t,e){const i=r[1];let a;switch(i[0]){case"linear":a=1;break;case"exponential":const f=i[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);a=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new fe(Mt,a);let u;try{u=Re(r[2],Mt,e)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const h=new Array(r.length-3);for(let f=0;f<h.length;f+=2){try{const g=Re(r[f+3],Mt,e);h[f]=g}catch(g){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${g.message}`)}try{const g=Re(r[f+4],t,e);h[f+1]=g}catch(g){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${g.message}`)}}return[o,u,...h]}function _R(r,t,e){const i=Re(r[r.length-1],t,e),a=new Array(r.length-1);for(let o=0;o<a.length-1;o+=2){try{const u=Re(r[o+1],Ge,e);a[o]=u}catch(u){throw new Error(`failed to parse argument ${o} of case expression: ${u.message}`)}try{const u=Re(r[o+2],i.type,e);a[o+1]=u}catch(u){throw new Error(`failed to parse argument ${o+1} of case expression: ${u.message}`)}}return a[a.length-1]=i,a}function yR(r,t,e){let i=r[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let a;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],a=Qe}else a=Mt;const o=new Array(i.length);for(let h=0;h<o.length;h++)try{const f=Re(i[h],a,e);o[h]=f}catch(f){throw new Error(`failed to parse haystack item ${h} for "in" expression: ${f.message}`)}return[Re(r[1],a,e),...o]}function pR(r,t,e){let i;try{i=Re(r[1],Mt,e)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const a=r[2];if(!Array.isArray(a))throw new Error("the second argument of palette must be an array");const o=new Array(a.length);for(let u=0;u<o.length;u++){let h;try{h=Re(a[u],Pn,e)}catch(f){throw new Error(`failed to parse color at index ${u} in palette expression: ${f.message}`)}if(!(h instanceof fe))throw new Error(`the palette color at index ${u} must be a literal value`);o[u]=h}return[i,...o]}function yt(...r){return function(t,e,i){const a=t[0];let o;for(let u=0;u<r.length;u++){const h=r[u](t,e,i);if(u==r.length-1){if(!h)throw new Error("expected last argument validator to return the parsed args");o=h}}return new oR(e,a,...o)}}function xR(r,t,e){const i=r[0],a=uR[i];if(!a)throw new Error(`unknown operator: ${i}`);return a(r,t,e)}function Iv(r){if(!r)return"";const t=r.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Iv(r.getGeometries()[0]);default:return""}}function jv(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vi(r,t,e){const i=Re(r,t,e);return Xn(i)}function Xn(r,t){if(r instanceof fe){if(r.type===Pn&&typeof r.value=="string"){const i=rm(r.value);return function(){return i}}return function(){return r.value}}const e=r.operator;switch(e){case K.Number:case K.String:case K.Coalesce:return vR(r);case K.Get:case K.Var:case K.Has:return ER(r);case K.Id:return i=>i.featureId;case K.GeometryType:return i=>i.geometryType;case K.Concat:{const i=r.args.map(a=>Xn(a));return a=>"".concat(...i.map(o=>o(a).toString()))}case K.Resolution:return i=>i.resolution;case K.Any:case K.All:case K.Between:case K.In:case K.Not:return CR(r);case K.Equal:case K.NotEqual:case K.LessThan:case K.LessThanOrEqualTo:case K.GreaterThan:case K.GreaterThanOrEqualTo:return SR(r);case K.Multiply:case K.Divide:case K.Add:case K.Subtract:case K.Clamp:case K.Mod:case K.Pow:case K.Abs:case K.Floor:case K.Ceil:case K.Round:case K.Sin:case K.Cos:case K.Atan:case K.Sqrt:return bR(r);case K.Case:return TR(r);case K.Match:return wR(r);case K.Interpolate:return RR(r);case K.ToString:return AR(r);default:throw new Error(`Unsupported operator ${e}`)}}function vR(r,t){const e=r.operator,i=r.args.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=Xn(r.args[o]);switch(e){case K.Coalesce:return o=>{for(let u=0;u<i;++u){const h=a[u](o);if(typeof h<"u"&&h!==null)return h}throw new Error("Expected one of the values to be non-null")};case K.Number:case K.String:return o=>{for(let u=0;u<i;++u){const h=a[u](o);if(typeof h===e)return h}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function ER(r,t){const i=r.args[0].value;switch(r.operator){case K.Get:return a=>{const o=r.args;let u=a.properties[i];for(let h=1,f=o.length;h<f;++h){const m=o[h].value;u=u[m]}return u};case K.Var:return a=>a.variables[i];case K.Has:return a=>{const o=r.args;if(!(i in a.properties))return!1;let u=a.properties[i];for(let h=1,f=o.length;h<f;++h){const m=o[h].value;if(!u||!Object.hasOwn(u,m))return!1;u=u[m]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function SR(r,t){const e=r.operator,i=Xn(r.args[0]),a=Xn(r.args[1]);switch(e){case K.Equal:return o=>i(o)===a(o);case K.NotEqual:return o=>i(o)!==a(o);case K.LessThan:return o=>i(o)<a(o);case K.LessThanOrEqualTo:return o=>i(o)<=a(o);case K.GreaterThan:return o=>i(o)>a(o);case K.GreaterThanOrEqualTo:return o=>i(o)>=a(o);default:throw new Error(`Unsupported comparison operator ${e}`)}}function CR(r,t){const e=r.operator,i=r.args.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=Xn(r.args[o]);switch(e){case K.Any:return o=>{for(let u=0;u<i;++u)if(a[u](o))return!0;return!1};case K.All:return o=>{for(let u=0;u<i;++u)if(!a[u](o))return!1;return!0};case K.Between:return o=>{const u=a[0](o),h=a[1](o),f=a[2](o);return u>=h&&u<=f};case K.In:return o=>{const u=a[0](o);for(let h=1;h<i;++h)if(u===a[h](o))return!0;return!1};case K.Not:return o=>!a[0](o);default:throw new Error(`Unsupported logical operator ${e}`)}}function bR(r,t){const e=r.operator,i=r.args.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=Xn(r.args[o]);switch(e){case K.Multiply:return o=>{let u=1;for(let h=0;h<i;++h)u*=a[h](o);return u};case K.Divide:return o=>a[0](o)/a[1](o);case K.Add:return o=>{let u=0;for(let h=0;h<i;++h)u+=a[h](o);return u};case K.Subtract:return o=>a[0](o)-a[1](o);case K.Clamp:return o=>{const u=a[0](o),h=a[1](o);if(u<h)return h;const f=a[2](o);return u>f?f:u};case K.Mod:return o=>a[0](o)%a[1](o);case K.Pow:return o=>Math.pow(a[0](o),a[1](o));case K.Abs:return o=>Math.abs(a[0](o));case K.Floor:return o=>Math.floor(a[0](o));case K.Ceil:return o=>Math.ceil(a[0](o));case K.Round:return o=>Math.round(a[0](o));case K.Sin:return o=>Math.sin(a[0](o));case K.Cos:return o=>Math.cos(a[0](o));case K.Atan:return i===2?o=>Math.atan2(a[0](o),a[1](o)):o=>Math.atan(a[0](o));case K.Sqrt:return o=>Math.sqrt(a[0](o));default:throw new Error(`Unsupported numeric operator ${e}`)}}function TR(r,t){const e=r.args.length,i=new Array(e);for(let a=0;a<e;++a)i[a]=Xn(r.args[a]);return a=>{for(let o=0;o<e-1;o+=2)if(i[o](a))return i[o+1](a);return i[e-1](a)}}function wR(r,t){const e=r.args.length,i=new Array(e);for(let a=0;a<e;++a)i[a]=Xn(r.args[a]);return a=>{const o=i[0](a);for(let u=1;u<e-1;u+=2)if(o===i[u](a))return i[u+1](a);return i[e-1](a)}}function RR(r,t){const e=r.args.length,i=new Array(e);for(let a=0;a<e;++a)i[a]=Xn(r.args[a]);return a=>{const o=i[0](a),u=i[1](a);let h,f;for(let g=2;g<e;g+=2){const m=i[g](a);let y=i[g+1](a);const p=Array.isArray(y);if(p&&(y=iR(y)),m>=u)return g===2?y:p?MR(o,u,h,f,m,y):ql(o,u,h,f,m,y);h=m,f=y}return f}}function AR(r,t){const e=r.operator,i=r.args.length,a=new Array(i);for(let o=0;o<i;++o)a[o]=Xn(r.args[o]);switch(e){case K.ToString:return o=>{const u=a[0](o);return r.args[0].type===Pn?am(u):u.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function ql(r,t,e,i,a,o){const u=a-e;if(u===0)return i;const h=t-e,f=r===1?h/u:(Math.pow(r,h)-1)/(Math.pow(r,u)-1);return i+f*(o-i)}function MR(r,t,e,i,a,o){if(a-e===0)return i;const h=Hp(i),f=Hp(o);let g=f[2]-h[2];g>180?g-=360:g<-180&&(g+=360);const m=[ql(r,t,e,h[0],a,f[0]),ql(r,t,e,h[1],a,f[1]),h[2]+ql(r,t,e,0,a,g),ql(r,t,e,i[3],a,o[3])];return sR(m)}const Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function DR(r,t,e){const i=r;let a=!0,o=!1,u=!1;const h=[mc(i,pt.LOAD,function(){u=!0,o||t()})];return i.src&&cv?(o=!0,i.decode().then(function(){a&&t()}).catch(function(f){a&&(u?t():e())})):h.push(mc(i,pt.ERROR,e)),function(){a=!1,h.forEach(Kt)}}function LR(r,t){return new Promise((e,i)=>{function a(){u(),e(r)}function o(){u(),i(new Error("Image load error"))}function u(){r.removeEventListener("load",a),r.removeEventListener("error",o)}r.addEventListener("load",a),r.addEventListener("error",o)})}function OR(r,t){return t&&(r.src=t),r.src&&cv?new Promise((e,i)=>r.decode().then(()=>e(r)).catch(a=>r.complete&&r.width?e(r):i(a))):LR(r)}class NR{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const a=jd(t,e,i);return a in this.cache_?this.cache_[a]:null}getPattern(t,e,i){const a=jd(t,e,i);return a in this.patternCache_?this.patternCache_[a]:null}set(t,e,i,a,o){const u=jd(t,e,i),h=u in this.cache_;this.cache_[u]=a,o&&(a.getImageState()===Et.IDLE&&a.load(),a.getImageState()===Et.LOADING?a.ready().then(()=>{this.patternCache_[u]=pc().createPattern(a.getImage(1),"repeat")}):this.patternCache_[u]=pc().createPattern(a.getImage(1),"repeat")),h||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function jd(r,t,e){const i=e?Aa(e):"null";return t+":"+r+":"+i}const An=new NR;let Pl=null;class kv extends Gc{constructor(t,e,i,a,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=a===void 0?Et.IDLE:a,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Et.LOADED){Pl||(Pl=de(1,1,void 0,{willReadFrequently:!0})),Pl.drawImage(this.image_,0,0);try{Pl.getImageData(0,0,1,1),this.tainted_=!1}catch{Pl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pt.CHANGE)}handleImageError_(){this.imageState_=Et.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Et.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=de(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Et.IDLE){this.image_||this.initializeImage_(),this.imageState_=Et.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&OR(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Et.LOADED)return;const e=this.image_,i=de(Math.ceil(e.width*t),Math.ceil(e.height*t)),a=i.canvas;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=eR(this.color_),i.fillRect(0,0,a.width/t,a.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=a}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===Et.LOADED||this.imageState_===Et.ERROR)t();else{const e=()=>{(this.imageState_===Et.LOADED||this.imageState_===Et.ERROR)&&(this.removeEventListener(pt.CHANGE,e),t())};this.addEventListener(pt.CHANGE,e)}})),this.ready_}}function om(r,t,e,i,a,o){let u=t===void 0?void 0:An.get(t,e,a);return u||(u=new kv(r,r&&"src"in r?r.src||void 0:t,e,i,a),An.set(t,e,a,u,o)),o&&u&&!An.getPattern(t,e,a)&&An.set(t,e,a,u,o),u}function si(r){return r?Array.isArray(r)?am(r):typeof r=="object"&&"src"in r?IR(r):r:null}function IR(r){if(!r.offset||!r.size)return An.getPattern(r.src,"anonymous",r.color);const t=r.src+":"+r.offset,e=An.getPattern(t,void 0,r.color);if(e)return e;const i=An.get(r.src,"anonymous",null);if(i.getImageState()!==Et.LOADED)return null;const a=de(r.size[0],r.size[1]);return a.drawImage(i.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),om(a.canvas,t,void 0,Et.LOADED,r.color,!0),An.getPattern(t,void 0,r.color)}const Fv="10px sans-serif",$e="#000",Ma="round",Fi=[],zi=0,Da="round",ro=10,ao="#000",lo="center",vc="middle",sr=[0,0,0,0],oo=1,fa=new ui;let Ul=null,Wp;const hg={},jR=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function kR(r,t,e){return`${r} ${t} 16px "${e}"`}const FR=(function(){let t,e;async function i(o){await e.ready;const u=await e.load(o);if(u.length===0)return!1;const h=og(o),f=h.families[0].toLowerCase(),g=h.weight;return u.some(m=>{const y=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),p=lg[m.weight]||m.weight;return y===f&&m.style===h.style&&p==g})}async function a(){await e.ready;let o=!0;const u=fa.getProperties(),h=Object.keys(u).filter(f=>u[f]<100);for(let f=h.length-1;f>=0;--f){const g=h[f];let m=u[g];m<100&&(await i(g)?(vo(hg),fa.set(g,100)):(m+=10,fa.set(g,m,!0),m<100&&(o=!1)))}t=void 0,o||(t=setTimeout(a,100))}return async function(o){e||(e=Fg?self.fonts:document.fonts);const u=og(o);if(!u)return;const h=u.families;let f=!1;for(const g of h){if(jR.has(g))continue;const m=kR(u.style,u.weight,g);fa.get(m)===void 0&&(fa.set(m,0,!0),f=!0)}f&&(clearTimeout(t),t=setTimeout(a,100))}})(),zR=(function(){let r;return function(t){let e=hg[t];if(e==null){if(Fg){const i=og(t),a=zv(t,"Žg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);hg[t]=e}return e}})();function zv(r,t){return Ul||(Ul=de(1,1)),r!=Wp&&(Ul.font=r,Wp=Ul.font),Ul.measureText(t)}function Gv(r,t){return zv(r,t).width}function Qp(r,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((a,o)=>Math.max(a,Gv(r,o)),0);return e[t]=i,i}function GR(r,t){const e=[],i=[],a=[];let o=0,u=0,h=0,f=0;for(let g=0,m=t.length;g<=m;g+=2){const y=t[g];if(y===`
`||g===m){o=Math.max(o,u),a.push(u),u=0,h+=f,f=0;continue}const p=t[g+1]||r.font,v=Gv(p,y);e.push(v),u+=v;const S=zR(p);i.push(S),f=Math.max(f,S)}return{width:o,height:h,widths:e,heights:i,lineWidths:a}}function PR(r,t,e,i,a,o,u,h,f,g,m){r.save(),e!==1&&(r.globalAlpha===void 0?r.globalAlpha=y=>y.globalAlpha*=e:r.globalAlpha*=e),t&&r.transform.apply(r,t),i.contextInstructions?(r.translate(f,g),r.scale(m[0],m[1]),UR(i,r)):m[0]<0||m[1]<0?(r.translate(f,g),r.scale(m[0],m[1]),r.drawImage(i,a,o,u,h,0,0,u,h)):r.drawImage(i,a,o,u,h,f,g,u*m[0],h*m[1]),r.restore()}function UR(r,t){const e=r.contextInstructions;for(let i=0,a=e.length;i<a;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class Vc{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=tn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Vc({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return It()}getImage(t){return It()}getHitDetectionImage(){return It()}getPixelRatio(t){return 1}getImageState(){return It()}getImageSize(){return It()}getOrigin(){return It()}getSize(){return It()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=tn(t)}listenImageChange(t){It()}load(){It()}unlistenImageChange(t){It()}ready(){return Promise.resolve()}}class Zc extends Vc{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Et.LOADING:Et.LOADED,this.imageState_===Et.LOADING&&this.ready().then(()=>this.imageState_=Et.LOADED),this.render()}clone(){const t=this.getScale(),e=new Zc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let a=An.get(i,null,null)?.getImage(1);if(!a){const o=this.renderOptions_,u=Math.ceil(o.size*t),h=de(u,u);this.draw_(o,h,t),a=h.canvas,An.set(i,null,null,new kv(a,void 0,null,Et.LOADED,null))}return a}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let a=this.radius,o=this.radius2_===void 0?a:this.radius2_;if(a<o){const X=a;a=o,o=X}const u=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/u,f=o*Math.sin(h),g=Math.sqrt(o*o-f*f),m=a-g,y=Math.sqrt(f*f+m*m),p=y/f;if(t==="miter"&&p<=i)return p*e;const v=e/2/p,S=e/2*(m/y),T=Math.sqrt((a+v)*(a+v)+S*S)-a;if(this.radius2_===void 0||t==="bevel")return T*2;const b=a*Math.sin(h),R=Math.sqrt(a*a-b*b),O=o-R,L=Math.sqrt(b*b+O*O)/b;if(L<=i){const X=L*e/2-o-a;return 2*Math.max(T,X)}return T*2}createRenderOptions(){let t=Ma,e=Da,i=0,a=null,o=0,u,h=0;this.stroke_&&(u=si(this.stroke_.getColor()??ao),h=this.stroke_.getWidth()??oo,a=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??Da,t=this.stroke_.getLineCap()??Ma,i=this.stroke_.getMiterLimit()??ro);const f=this.calculateLineJoinSize_(e,h,i),g=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*g+f);return{strokeStyle:u,strokeWidth:h,size:m,lineCap:t,lineDash:a,lineDashOffset:o,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let a=this.fill_.getColor();a===null&&(a=$e),e.fillStyle=si(a),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),a=0;typeof i=="string"&&(i=Aa(i)),i===null?a=1:Array.isArray(i)&&(a=i.length===4?i[3]:1),a===0&&(e=de(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const a=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const o=this.angle_-Math.PI/2,u=2*Math.PI/e;for(let h=0;h<e;h++){const f=o+h*u,g=h%2===0?i:a;t.lineTo(g*Math.cos(f),g*Math.sin(f))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=$e,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class cr extends Zc{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new cr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class bn{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new bn({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=om(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===Et.IDLE&&e.load(),e.getImageState()===Et.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?Ct(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Aa(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function $p(r,t,e,i){return e!==void 0&&i!==void 0?[e/r,i/t]:e!==void 0?e/r:i!==void 0?i/t:1}class qc extends Vc{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,a=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:a,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const u=t.img!==void 0?t.img:null;let h=t.src;zt(!(h!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(h===void 0||h.length===0)&&u&&(h=u.src||Ct(u)),zt(h!==void 0&&h.length>0,"A defined and non-empty `src` or `image` must be provided"),zt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(t.src!==void 0?f=Et.IDLE:u!==void 0&&("complete"in u?u.complete?f=u.src?Et.LOADED:Et.IDLE:f=Et.LOADING:f=Et.LOADED),this.color_=t.color!==void 0?Aa(t.color):null,this.iconImage_=om(u,h,this.crossOrigin_,f,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let g,m;if(t.size)[g,m]=t.size;else{const y=this.getImage(1);if(y.width&&y.height)g=y.width,m=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=t;const p=()=>{if(this.unlistenImageChange(p),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale($p(v[0],v[1],t.width,t.height))};this.listenImageChange(p);return}}g!==void 0&&this.setScale($p(g,m,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new qc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const a=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!a)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=a[0]),this.anchorYUnits_=="fraction"&&(t[1]*=a[1])}if(this.anchorOrigin_!="top-left"){if(!a)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+a[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+a[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(pt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(pt.CHANGE,t)}ready(){return this.iconImage_.ready()}}class Tn{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Tn({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class je{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Jp,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new je({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Jp,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function YR(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(zt(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),t=function(){return e}}return t}let kd=null;function Pv(r,t){if(!kd){const e=new bn({color:"rgba(255,255,255,0.4)"}),i=new Tn({color:"#3399CC",width:1.25});kd=[new je({image:new cr({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return kd}function Uv(){const r={},t=[255,255,255,1],e=[0,153,255,1],i=3;return r.Polygon=[new je({fill:new bn({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new je({stroke:new Tn({color:t,width:i+2})}),new je({stroke:new Tn({color:e,width:i})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new je({image:new cr({radius:i*2,fill:new bn({color:e}),stroke:new Tn({color:t,width:i/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function Jp(r){return r.getGeometry()}const XR="#333";class um{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=tn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new bn({color:XR}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new um({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=tn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function BR(r){return!0}function HR(r){const t=Nv(),e=VR(r,t),i=jv();return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,t.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}return t.geometryType&&(i.geometryType=Iv(a.getGeometry())),e(i)}}function tx(r){const t=Nv(),e=r.length,i=new Array(e);for(let u=0;u<e;++u)i[u]=fg(r[u],t);const a=jv(),o=new Array(e);return function(u,h){if(a.properties=u.getPropertiesInternal(),a.resolution=h,t.featureId){const g=u.getId();g!==void 0?a.featureId=g:a.featureId=null}let f=0;for(let g=0;g<e;++g){const m=i[g](a);m&&(o[f]=m,f+=1)}return o.length=f,o}}function VR(r,t){const e=r.length,i=new Array(e);for(let a=0;a<e;++a){const o=r[a],u="filter"in o?Vi(o.filter,Ge,t):BR;let h;if(Array.isArray(o.style)){const f=o.style.length;h=new Array(f);for(let g=0;g<f;++g)h[g]=fg(o.style[g],t)}else h=[fg(o.style,t)];i[a]={filter:u,styles:h}}return function(a){const o=[];let u=!1;for(let h=0;h<e;++h){const f=i[h].filter;if(f(a)&&!(r[h].else&&u)){u=!0;for(const g of i[h].styles){const m=g(a);m&&o.push(m)}}}return o}}function fg(r,t){const e=uo(r,"",t),i=co(r,"",t),a=ZR(r,t),o=qR(r,t),u=Je(r,"z-index",t);if(!e&&!i&&!a&&!o&&!ba(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const h=new je;return function(f){let g=!0;if(e){const m=e(f);m&&(g=!1),h.setFill(m)}if(i){const m=i(f);m&&(g=!1),h.setStroke(m)}if(a){const m=a(f);m&&(g=!1),h.setText(m)}if(o){const m=o(f);m&&(g=!1),h.setImage(m)}return u&&h.setZIndex(u(f)),g?null:h}}function uo(r,t,e){let i;if(t+"fill-pattern-src"in r)i=$R(r,t+"fill-",e);else{if(r[t+"fill-color"]==="none")return o=>null;i=cm(r,t+"fill-color",e)}if(!i)return null;const a=new bn;return function(o){const u=i(o);return u===sm?null:(a.setColor(u),a)}}function co(r,t,e){const i=Je(r,t+"stroke-width",e),a=cm(r,t+"stroke-color",e);if(!i&&!a)return null;const o=Li(r,t+"stroke-line-cap",e),u=Li(r,t+"stroke-line-join",e),h=Yv(r,t+"stroke-line-dash",e),f=Je(r,t+"stroke-line-dash-offset",e),g=Je(r,t+"stroke-miter-limit",e),m=new Tn;return function(y){if(a){const p=a(y);if(p===sm)return null;m.setColor(p)}if(i&&m.setWidth(i(y)),o){const p=o(y);if(p!=="butt"&&p!=="round"&&p!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(p)}if(u){const p=u(y);if(p!=="bevel"&&p!=="round"&&p!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(p)}return h&&m.setLineDash(h(y)),f&&m.setLineDashOffset(f(y)),g&&m.setMiterLimit(g(y)),m}}function ZR(r,t){const e="text-",i=Li(r,e+"value",t);if(!i)return null;const a=uo(r,e,t),o=uo(r,e+"background-",t),u=co(r,e,t),h=co(r,e+"background-",t),f=Li(r,e+"font",t),g=Je(r,e+"max-angle",t),m=Je(r,e+"offset-x",t),y=Je(r,e+"offset-y",t),p=xa(r,e+"overflow",t),v=Li(r,e+"placement",t),S=Je(r,e+"repeat",t),w=Kc(r,e+"scale",t),T=xa(r,e+"rotate-with-view",t),b=Je(r,e+"rotation",t),R=Li(r,e+"align",t),O=Li(r,e+"justify",t),A=Li(r,e+"baseline",t),L=xa(r,e+"keep-upright",t),X=Yv(r,e+"padding",t),B=Wc(r,e+"declutter-mode"),H=new um({declutterMode:B});return function(V){if(H.setText(i(V)),a&&H.setFill(a(V)),o&&H.setBackgroundFill(o(V)),u&&H.setStroke(u(V)),h&&H.setBackgroundStroke(h(V)),f&&H.setFont(f(V)),g&&H.setMaxAngle(g(V)),m&&H.setOffsetX(m(V)),y&&H.setOffsetY(y(V)),p&&H.setOverflow(p(V)),v){const et=v(V);if(et!=="point"&&et!=="line")throw new Error("Expected point or line for text-placement");H.setPlacement(et)}if(S&&H.setRepeat(S(V)),w&&H.setScale(w(V)),T&&H.setRotateWithView(T(V)),b&&H.setRotation(b(V)),R){const et=R(V);if(et!=="left"&&et!=="center"&&et!=="right"&&et!=="end"&&et!=="start")throw new Error("Expected left, right, center, start, or end for text-align");H.setTextAlign(et)}if(O){const et=O(V);if(et!=="left"&&et!=="right"&&et!=="center")throw new Error("Expected left, right, or center for text-justify");H.setJustify(et)}if(A){const et=A(V);if(et!=="bottom"&&et!=="top"&&et!=="middle"&&et!=="alphabetic"&&et!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");H.setTextBaseline(et)}return X&&H.setPadding(X(V)),L&&H.setKeepUpright(L(V)),H}}function qR(r,t){return"icon-src"in r?KR(r,t):"shape-points"in r?WR(r,t):"circle-radius"in r?QR(r,t):null}function KR(r,t){const e="icon-",i=e+"src",a=Xv(r[i],i),o=Ec(r,e+"anchor",t),u=Kc(r,e+"scale",t),h=Je(r,e+"opacity",t),f=Ec(r,e+"displacement",t),g=Je(r,e+"rotation",t),m=xa(r,e+"rotate-with-view",t),y=nx(r,e+"anchor-origin"),p=ix(r,e+"anchor-x-units"),v=ix(r,e+"anchor-y-units"),S=n2(r,e+"color"),w=t2(r,e+"cross-origin"),T=e2(r,e+"offset"),b=nx(r,e+"offset-origin"),R=Sc(r,e+"width"),O=Sc(r,e+"height"),A=JR(r,e+"size"),L=Wc(r,e+"declutter-mode"),X=new qc({src:a,anchorOrigin:y,anchorXUnits:p,anchorYUnits:v,color:S,crossOrigin:w,offset:T,offsetOrigin:b,height:O,width:R,size:A,declutterMode:L});return function(B){return h&&X.setOpacity(h(B)),f&&X.setDisplacement(f(B)),g&&X.setRotation(g(B)),m&&X.setRotateWithView(m(B)),u&&X.setScale(u(B)),o&&X.setAnchor(o(B)),X}}function WR(r,t){const e="shape-",i=e+"points",a=e+"radius",o=dg(r[i],i),u=dg(r[a],a),h=uo(r,e,t),f=co(r,e,t),g=Kc(r,e+"scale",t),m=Ec(r,e+"displacement",t),y=Je(r,e+"rotation",t),p=xa(r,e+"rotate-with-view",t),v=Sc(r,e+"radius2"),S=Sc(r,e+"angle"),w=Wc(r,e+"declutter-mode"),T=new Zc({points:o,radius:u,radius2:v,angle:S,declutterMode:w});return function(b){return h&&T.setFill(h(b)),f&&T.setStroke(f(b)),m&&T.setDisplacement(m(b)),y&&T.setRotation(y(b)),p&&T.setRotateWithView(p(b)),g&&T.setScale(g(b)),T}}function QR(r,t){const e="circle-",i=uo(r,e,t),a=co(r,e,t),o=Je(r,e+"radius",t),u=Kc(r,e+"scale",t),h=Ec(r,e+"displacement",t),f=Je(r,e+"rotation",t),g=xa(r,e+"rotate-with-view",t),m=Wc(r,e+"declutter-mode"),y=new cr({radius:5,declutterMode:m});return function(p){return o&&y.setRadius(o(p)),i&&y.setFill(i(p)),a&&y.setStroke(a(p)),h&&y.setDisplacement(h(p)),f&&y.setRotation(f(p)),g&&y.setRotateWithView(g(p)),u&&y.setScale(u(p)),y}}function Je(r,t,e){if(!(t in r))return;const i=Vi(r[t],Mt,e);return function(a){return dg(i(a),t)}}function Li(r,t,e){if(!(t in r))return null;const i=Vi(r[t],Qe,e);return function(a){return Xv(i(a),t)}}function $R(r,t,e){const i=Li(r,t+"pattern-src",e),a=ex(r,t+"pattern-offset",e),o=ex(r,t+"pattern-size",e),u=cm(r,t+"color",e);return function(h){return{src:i(h),offset:a&&a(h),size:o&&o(h),color:u&&u(h)}}}function xa(r,t,e){if(!(t in r))return null;const i=Vi(r[t],Ge,e);return function(a){const o=i(a);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${t}`);return o}}function cm(r,t,e){if(!(t in r))return null;const i=Vi(r[t],Pn,e);return function(a){return Bv(i(a),t)}}function Yv(r,t,e){if(!(t in r))return null;const i=Vi(r[t],ur,e);return function(a){return Co(i(a),t)}}function Ec(r,t,e){if(!(t in r))return null;const i=Vi(r[t],ur,e);return function(a){const o=Co(i(a),t);if(o.length!==2)throw new Error(`Expected two numbers for ${t}`);return o}}function ex(r,t,e){if(!(t in r))return null;const i=Vi(r[t],ur,e);return function(a){return Hv(i(a),t)}}function Kc(r,t,e){if(!(t in r))return null;const i=Vi(r[t],ur|Mt,e);return function(a){return i2(i(a),t)}}function Sc(r,t){const e=r[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function JR(r,t){const e=r[t];if(e!==void 0){if(typeof e=="number")return tn(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function t2(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function nx(r,t){const e=r[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function ix(r,t){const e=r[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function e2(r,t){const e=r[t];if(e!==void 0)return Co(e,t)}function Wc(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function n2(r,t){const e=r[t];if(e!==void 0)return Bv(e,t)}function Co(r,t){if(!Array.isArray(r))throw new Error(`Expected an array for ${t}`);const e=r.length;for(let i=0;i<e;++i)if(typeof r[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return r}function Xv(r,t){if(typeof r!="string")throw new Error(`Expected a string for ${t}`);return r}function dg(r,t){if(typeof r!="number")throw new Error(`Expected a number for ${t}`);return r}function Bv(r,t){if(typeof r=="string")return r;const e=Co(r,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Hv(r,t){const e=Co(r,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function i2(r,t){return typeof r=="number"?r:Hv(r,t)}const sx={RENDER_ORDER:"renderOrder"};class Vv extends Hc{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(sx.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter();i in t.declutter||(t.declutter[i]=new Lv(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(sx.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?Pv:t;const e=s2(t);this.styleFunction_=t===null?void 0:YR(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function s2(r){if(r===void 0)return Pv;if(!r)return null;if(typeof r=="function"||r instanceof je)return r;if(!Array.isArray(r))return tx([r]);if(r.length===0)return[];const t=r.length,e=r[0];if(e instanceof je){const a=new Array(t);for(let o=0;o<t;++o){const u=r[o];if(!(u instanceof je))throw new Error("Expected a list of style instances");a[o]=u}return a}if("style"in e){const a=new Array(t);for(let o=0;o<t;++o){const u=r[o];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[o]=u}return HR(a)}return tx(r)}class Zv extends Hn{constructor(t,e,i,a){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=a}}class r2 extends zc{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){It()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;Yi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),dv(a,i)}forEachFeatureAtCoordinate(t,e,i,a,o,u,h,f){let g;const m=e.viewState;function y(A,L,X,B){return o.call(u,L,A?X:null,B)}const p=m.projection,v=nv(t.slice(),p),S=[[0,0]];if(p.canWrapX()&&a){const A=p.getExtent(),L=Yt(A);S.push([-L,0],[L,0])}const w=e.layerStatesArray,T=w.length,b=[],R=[];for(let A=0;A<S.length;A++)for(let L=T-1;L>=0;--L){const X=w[L],B=X.layer;if(B.hasRenderer()&&im(X,m)&&h.call(f,B)){const H=B.getRenderer(),V=B.getSource();if(H&&V){const et=V.getWrapX()?v:t,lt=y.bind(null,X.managed);R[0]=et[0]+S[A][0],R[1]=et[1]+S[A][1],g=H.forEachFeatureAtCoordinate(R,e,i,lt,b)}if(g)return g}}if(b.length===0)return;const O=1/b.length;return b.forEach((A,L)=>A.distanceSq+=L*O),b.sort((A,L)=>A.distanceSq-L.distanceSq),b.some(A=>g=A.callback(A.feature,A.layer,A.geometry)),g}hasFeatureAtCoordinate(t,e,i,a,o,u){return this.forEachFeatureAtCoordinate(t,e,i,a,Ra,this,o,u)!==void 0}getMap(){return this.map_}renderFrame(t){It()}scheduleExpireIconCache(t){An.canExpireCache()&&t.postRenderFunctions.push(a2)}}function a2(r,t){An.expire()}class l2 extends r2{constructor(t){super(t),this.fontChangeListenerKey_=Ot(fa,wa.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Xc+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const a=new Zv(t,void 0,e);i.dispatchEvent(a)}}disposeInternal(){Kt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Rn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((h,f)=>h.zIndex-f.zIndex);e.some(h=>h.layer instanceof Vv&&h.layer.getDeclutter())&&(t.declutter={});const a=t.viewState;this.children_.length=0;const o=[];let u=null;for(let h=0,f=e.length;h<f;++h){const g=e[h];t.layerIndex=h;const m=g.layer,y=m.getSourceState();if(!im(g,a)||y!="ready"&&y!="undefined"){m.unrender();continue}const p=m.render(t,u);p&&(p!==u&&(this.children_.push(p),u=p),o.push(g))}this.declutter(t,o),yw(this.element_,this.children_),this.dispatchRenderEvent(Rn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const a=e[i],o=a.layer;o.getDeclutter()&&o.renderDeclutter(t,a)}e.forEach(i=>i.layer.renderDeferred(t))}}}function qv(r){if(r instanceof Hc){r.setMapInternal(null);return}r instanceof ja&&r.getLayers().forEach(qv)}function Kv(r,t){if(r instanceof Hc){r.setMapInternal(t);return}if(r instanceof ja){const e=r.getLayers().getArray();for(let i=0,a=e.length;i<a;++i)Kv(e[i],t)}}let o2=class extends ui{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=u2(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:MT,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yn(),this.pixelToCoordinateTransform_=Yn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Ew(),this.interactions=e.interactions||Xw({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new OT(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Oe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Oe.VIEW,this.handleViewChanged_),this.addChangeListener(Oe.SIZE,this.handleSizeChanged_),this.addChangeListener(Oe.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof ei)&&t.view.then(function(a){i.setView(new ei(a))}),this.controls.addEventListener(Ie.ADD,a=>{a.element.setMap(this)}),this.controls.addEventListener(Ie.REMOVE,a=>{a.element.setMap(null)}),this.interactions.addEventListener(Ie.ADD,a=>{a.element.setMap(this)}),this.interactions.addEventListener(Ie.REMOVE,a=>{a.element.setMap(null)}),this.overlays_.addEventListener(Ie.ADD,a=>{this.addOverlayInternal_(a.element)}),this.overlays_.addEventListener(Ie.REMOVE,a=>{const o=a.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],a.element.setMap(null)}),this.controls.forEach(a=>{a.setMap(this)}),this.interactions.forEach(a=>{a.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Kv(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const a=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter!==void 0?i.layerFilter:Ra,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,h,e,null,u,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(a){i.push(a)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(a){a instanceof ja?e(a.getLayers()):t.push(a)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const a=e.layerFilter!==void 0?e.layerFilter:Ra,o=e.hitTolerance!==void 0?e.hitTolerance:0,u=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,u,a,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),a=this.getSize(),o=i.width/a[0],u=i.height/a[1],h="changedTouches"in t?t.changedTouches[0]:t;return[(h.clientX-i.left)/o,(h.clientY-i.top)/u]}getTarget(){return this.get(Oe.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return lr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Ee(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Oe.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof wn){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const a=t[e];if(!a.visible)continue;const o=a.layer.getRenderer();if(o&&!o.ready)return!0;const u=a.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Jt(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Ee(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Oe.SIZE)}getView(){return this.get(Oe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,a){return NT(this.frameState_,t,e,i,a)}handleBrowserEvent(t,e){e=e||t.type;const i=new Di(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===sg.POINTERDOWN||i===pt.WHEEL||i===pt.KEYDOWN){const a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,u=e.target,h=o instanceof ShadowRoot?o.host===u?o.host.ownerDocument:o:o===a?a.documentElement:o;if(this.overlayContainerStopEvent_.contains(u)||!h.contains(u))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const a=this.getInteractions().getArray().slice();for(let o=a.length-1;o>=0;o--){const u=a[o];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let a=this.maxTilesLoading_,o=a;if(t){const u=t.viewHints;if(u[Ne.ANIMATING]||u[Ne.INTERACTING]){const h=Date.now()-t.time>8;a=h?0:8,o=h?0:2}}e.getTilesLoading()<a&&(e.reprioritize(),e.loadMoreTiles(a,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Rn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Rn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ca(ws.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ca(ws.LOADSTART,this,t))));const i=this.postRenderFunctions_;if(t)for(let a=0,o=i.length;a<o;++a)i[a](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,a=this.targetChangeHandlerKeys_.length;i<a;++i)Kt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new l2(this)),this.mapBrowserEventHandler_=new DT(this,this.moveTolerance_);for(const o in Dt)this.mapBrowserEventHandler_.addEventListener(Dt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pt.WHEEL,this.boundHandleBrowserEvent_,hv?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=e.getRootNode();i=o instanceof ShadowRoot?o.host:e}this.targetChangeHandlerKeys_=[Ot(i,pt.KEYDOWN,this.handleBrowserEvent,this),Ot(i,pt.KEYPRESS,this.handleBrowserEvent,this)];const a=e.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.observe(a.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Kt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Kt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ot(t,wa.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ot(t,pt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Kt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Rs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ot(t,wa.PROPERTYCHANGE,this.render,this),Ot(t,pt.CHANGE,this.render,this),Ot(t,"addlayer",this.handleLayerAdd_,this),Ot(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let e=0,i=t.length;e<i;++e){const a=t[e].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){qv(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),a=this.frameState_;let o=null;if(e!==void 0&&Vp(e)&&i&&i.isDef()){const u=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:tg(h.center,h.resolution,h.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:u,wantedTiles:{},mapId:Ct(this),renderTargets:{}},h.nextCenter&&h.nextResolution){const f=isNaN(h.nextRotation)?h.rotation:h.nextRotation;o.nextExtent=tg(h.nextCenter,h.nextResolution,f,e)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),a&&(!this.previousExtent_||!jc(this.previousExtent_)&&!to(o.extent,this.previousExtent_))&&(this.dispatchEvent(new ca(ws.MOVESTART,this,a)),this.previousExtent_=po(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Ne.ANIMATING]&&!o.viewHints[Ne.INTERACTING]&&!to(o.extent,this.previousExtent_)&&(this.dispatchEvent(new ca(ws.MOVEEND,this,o)),Kx(o.extent,this.previousExtent_))),this.dispatchEvent(new ca(ws.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(ws.LOADSTART)||this.hasListener(ws.LOADEND)||this.hasListener(Rn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Rs("removelayer",e)),this.set(Oe.LAYERGROUP,t)}setSize(t){this.set(Oe.SIZE,t)}setTarget(t){this.set(Oe.TARGET,t)}setView(t){if(!t||t instanceof ei){this.set(Oe.VIEW,t);return}this.set(Oe.VIEW,new ei);const e=this;t.then(function(i){e.setView(new ei(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const a=getComputedStyle(t),o=t.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),u=t.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth);!isNaN(o)&&!isNaN(u)&&(e=[Math.max(0,o),Math.max(0,u)],!Vp(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&qx("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!Hi(e,i))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function u2(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const e={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new ja({layers:r.layers});e[Oe.LAYERGROUP]=i,e[Oe.TARGET]=r.target,e[Oe.VIEW]=r.view instanceof ei?r.view:new ei;let a;r.controls!==void 0&&(Array.isArray(r.controls)?a=new wn(r.controls.slice()):(zt(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),a=r.controls));let o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new wn(r.interactions.slice()):(zt(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=r.interactions));let u;return r.overlays!==void 0?Array.isArray(r.overlays)?u=new wn(r.overlays.slice()):(zt(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new wn,{controls:a,interactions:o,keyboardEventTarget:t,overlays:u,values:e}}class hm extends Gc{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(pt.CHANGE)}release(){this.setState(dt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==dt.EMPTY){if(this.state!==dt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){It()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const a=e-i+1e3/60;return a>=this.transition_?1:fv(a/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function gg(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}const c2=new Error("disposed"),h2=[256,256];class rx extends hm{constructor(t){const e=dt.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=gg(this.data_);return t?[t.width,t.height]:h2}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==dt.IDLE&&this.state!==dt.ERROR)return;this.state=dt.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=dt.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=dt.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(c2),this.controller_=null),super.disposeInternal()}}class Wv extends hm{constructor(t,e,i,a,o,u){super(t,e,u),this.crossOrigin_=a,this.src_=i,this.key=i,this.image_=new Image,a!==null&&(this.image_.crossOrigin=a),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=dt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=dt.ERROR,this.unlistenImage_(),this.image_=f2(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=dt.LOADED:this.state=dt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==dt.ERROR&&(this.state=dt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==dt.IDLE&&(this.state=dt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=DR(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function f2(){const r=de(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class fm{constructor(t,e,i,a){this.minX=t,this.maxX=e,this.minY=i,this.maxY=a}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function aa(r,t,e,i,a){return a!==void 0?(a.minX=r,a.maxX=t,a.minY=e,a.maxY=i,a):new fm(r,t,e,i)}let Fd;const va=[];function ax(r,t,e,i,a){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(i,a),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,i)+1,Math.max(e,a)),r.restore()}function zd(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function d2(){if(Fd===void 0){const r=de(6,6,va);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",ax(r,4,5,4,0),ax(r,4,5,0,5);const t=r.getImageData(0,0,3,3).data;Fd=zd(t,0)||zd(t,4)||zd(t,8),Bc(r),va.push(r.canvas)}return Fd}function lx(r,t,e,i){const a=gc(e,t,r);let o=Mp(t,i,e);const u=t.getMetersPerUnit();u!==void 0&&(o*=u);const h=r.getMetersPerUnit();h!==void 0&&(o/=h);const f=r.getExtent();if(!f||Sa(f,a)){const g=Mp(r,o,a)/o;isFinite(g)&&g>0&&(o/=g)}return o}function g2(r,t,e,i){const a=Ls(e);let o=lx(r,t,a,i);return(!isFinite(o)||o<=0)&&wg(e,function(u){return o=lx(r,t,u,i),isFinite(o)&&o>0}),o}function m2(r,t,e,i,a,o,u,h,f,g,m,y,p,v){const S=de(Math.round(e*r),Math.round(e*t),va);if(y||(S.imageSmoothingEnabled=!1),f.length===0)return S.canvas;S.scale(e,e);function w(L){return Math.round(L*e)/e}S.globalCompositeOperation="lighter";const T=Dn();f.forEach(function(L,X,B){Wx(T,L.extent)});let b;const R=e/i,O=(y?1:1+Math.pow(2,-24))/R;b=de(Math.round(Yt(T)*R),Math.round(Ye(T)*R),va),y||(b.imageSmoothingEnabled=!1),f.forEach(function(L,X,B){if(L.image.width>0&&L.image.height>0){if(L.clipExtent){b.save();const it=(L.clipExtent[0]-T[0])*R,st=-(L.clipExtent[3]-T[3])*R,J=Yt(L.clipExtent)*R,nt=Ye(L.clipExtent)*R;b.rect(y?it:Math.round(it),y?st:Math.round(st),y?J:Math.round(it+J)-Math.round(it),y?nt:Math.round(st+nt)-Math.round(st)),b.clip()}const H=(L.extent[0]-T[0])*R,V=-(L.extent[3]-T[3])*R,et=Yt(L.extent)*R,lt=Ye(L.extent)*R;b.drawImage(L.image,g,g,L.image.width-2*g,L.image.height-2*g,y?H:Math.round(H),y?V:Math.round(V),y?et:Math.round(H+et)-Math.round(H),y?lt:Math.round(V+lt)-Math.round(V)),L.clipExtent&&b.restore()}});const A=dr(u);return h.getTriangles().forEach(function(L,X,B){const H=L.source,V=L.target;let et=H[0][0],lt=H[0][1],it=H[1][0],st=H[1][1],J=H[2][0],nt=H[2][1];const I=w((V[0][0]-A[0])/o),Z=w(-(V[0][1]-A[1])/o),$=w((V[1][0]-A[0])/o),at=w(-(V[1][1]-A[1])/o),M=w((V[2][0]-A[0])/o),U=w(-(V[2][1]-A[1])/o),z=et,tt=lt;et=0,lt=0,it-=z,st-=tt,J-=z,nt-=tt;const rt=[[it,st,0,0,$-I],[J,nt,0,0,M-I],[0,0,it,st,at-Z],[0,0,J,nt,U-Z]],ht=Ib(rt);if(!ht)return;if(S.save(),S.beginPath(),d2()||!y){S.moveTo($,at);const Ft=4,At=I-$,le=Z-at;for(let Se=0;Se<Ft;Se++)S.lineTo($+w((Se+1)*At/Ft),at+w(Se*le/(Ft-1))),Se!=Ft-1&&S.lineTo($+w((Se+1)*At/Ft),at+w((Se+1)*le/(Ft-1)));S.lineTo(M,U)}else S.moveTo($,at),S.lineTo(I,Z),S.lineTo(M,U);S.clip(),S.transform(ht[0],ht[2],ht[1],ht[3],I,Z),S.translate(T[0]-z,T[3]-tt);let ut;if(b)ut=b.canvas,S.scale(O,-O);else{const Ft=f[0],At=Ft.extent;ut=Ft.image,S.scale(Yt(At)/ut.width,-Ye(At)/ut.height)}S.drawImage(ut,0,0),S.restore()}),b&&(Bc(b),va.push(b.canvas)),m&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,h.getTriangles().forEach(function(L,X,B){const H=L.target,V=(H[0][0]-A[0])/o,et=-(H[0][1]-A[1])/o,lt=(H[1][0]-A[0])/o,it=-(H[1][1]-A[1])/o,st=(H[2][0]-A[0])/o,J=-(H[2][1]-A[1])/o;S.beginPath(),S.moveTo(lt,it),S.lineTo(V,et),S.lineTo(st,J),S.closePath(),S.stroke()}),S.restore()),S.canvas}const _2=10,ox=.25;class y2{constructor(t,e,i,a,o,u,h){this.sourceProj_=t,this.targetProj_=e;let f={};const g=h?_T(O=>Ee(h,gc(O,this.targetProj_,this.sourceProj_))):dc(this.targetProj_,this.sourceProj_);this.transformInv_=function(O){const A=O[0]+"/"+O[1];return f[A]||(f[A]=g(O)),f[A]},this.maxSourceExtent_=a,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&Yt(a)>=Yt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Yt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Yt(this.targetProj_.getExtent()):null;const m=dr(i),y=Ic(i),p=Nc(i),v=Oc(i),S=this.transformInv_(m),w=this.transformInv_(y),T=this.transformInv_(p),b=this.transformInv_(v),R=_2+(u?Math.max(0,Math.ceil(Math.log2(Jd(i)/(u*u*256*256)))):0);if(this.addQuad_(m,y,p,v,S,w,T,b,R),this.wrapsXInSource_){let O=1/0;this.triangles_.forEach(function(A,L,X){O=Math.min(O,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-O>this.sourceWorldWidth_/2){const L=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];L[0][0]-O>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-O>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-O>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const X=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-X<this.sourceWorldWidth_/2&&(A.source=L)}})}f={}}addTriangle_(t,e,i,a,o,u){this.triangles_.push({source:[a,o,u],target:[t,e,i]})}addQuad_(t,e,i,a,o,u,h,f,g){const m=We([o,u,h,f]),y=this.sourceWorldWidth_?Yt(m)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&y>.5&&y<1;let S=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const T=We([t,e,i,a]);S=Yt(T)/this.targetWorldWidth_>ox||S}!v&&this.sourceProj_.isGlobal()&&y&&(S=y>ox||S)}if(!S&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Ue(m,this.maxSourceExtent_))return;let w=0;if(!S&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(f[0])||!isFinite(f[1]))){if(g>0)S=!0;else if(w=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!S){const T=[(t[0]+i[0])/2,(t[1]+i[1])/2],b=this.transformInv_(T);let R;v?R=(ya(o[0],p)+ya(h[0],p))/2-ya(b[0],p):R=(o[0]+h[0])/2-b[0];const O=(o[1]+h[1])/2-b[1];S=R*R+O*O>this.errorThresholdSquared_}if(S){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const T=[(e[0]+i[0])/2,(e[1]+i[1])/2],b=this.transformInv_(T),R=[(a[0]+t[0])/2,(a[1]+t[1])/2],O=this.transformInv_(R);this.addQuad_(t,e,T,R,o,u,b,O,g-1),this.addQuad_(R,T,i,a,O,b,h,f,g-1)}else{const T=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(T),R=[(i[0]+a[0])/2,(i[1]+a[1])/2],O=this.transformInv_(R);this.addQuad_(t,T,R,a,o,b,O,f,g-1),this.addQuad_(T,e,i,R,b,u,h,O,g-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(w&11)==0&&this.addTriangle_(t,i,a,o,h,f),(w&14)==0&&this.addTriangle_(t,i,e,o,h,u),w&&((w&13)==0&&this.addTriangle_(e,a,t,u,f,o),(w&7)==0&&this.addTriangle_(e,a,i,u,f,h))}calculateSourceExtent(){const t=Dn();return this.triangles_.forEach(function(e,i,a){const o=e.source;Wl(t,o[0]),Wl(t,o[1]),Wl(t,o[2])}),t}getTriangles(){return this.triangles_}}const p2=.5;class Qv extends hm{constructor(t,e,i,a,o,u,h,f,g,m,y,p){super(o,dt.IDLE,p),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=h,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=a,this.wrappedTileCoord_=u||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const v=a.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const T=S?ar(v,S):v;if(Jd(T)===0){this.state=dt.EMPTY;return}const b=t.getExtent();b&&(w?w=ar(w,b):w=b);const R=a.getResolution(this.wrappedTileCoord_[0]),O=g2(t,i,T,R);if(!isFinite(O)||O<=0){this.state=dt.EMPTY;return}const A=m!==void 0?m:p2;if(this.triangulation_=new y2(t,i,T,w,O*A,R),this.triangulation_.getTriangles().length===0){this.state=dt.EMPTY;return}this.sourceZ_=e.getZForResolution(O);let L=this.triangulation_.calculateSourceExtent();if(w&&(t.canWrapX()?(L[1]=Qt(L[1],w[1],w[3]),L[3]=Qt(L[3],w[1],w[3])):L=ar(L,w)),!Jd(L))this.state=dt.EMPTY;else{let X=0,B=0;t.canWrapX()&&(X=Yt(b),B=Math.floor((L[0]-b[0])/X)),tv(L.slice(),t,!0).forEach(V=>{const et=e.getTileRangeForExtentAndZ(V,this.sourceZ_);for(let lt=et.minX;lt<=et.maxX;lt++)for(let it=et.minY;it<=et.maxY;it++){const st=g(this.sourceZ_,lt,it,h);if(st){const J=B*X;this.sourceTiles_.push({tile:st,offset:J})}}++B}),this.sourceTiles_.length===0&&(this.state=dt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{const i=e.tile;if(i&&i.getState()==dt.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);a[0]+=e.offset,a[2]+=e.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=e.offset,o[2]+=e.offset),t.push({extent:a,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=dt.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),a=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(e),h=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=m2(a,o,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),u,f,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=dt.LOADED}this.changed()}load(){if(this.state==dt.IDLE){this.state=dt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const i=e.getState();if(i==dt.IDLE||i==dt.LOADING){t++;const a=Ot(e,pt.CHANGE,o=>{const u=e.getState();(u==dt.LOADED||u==dt.ERROR||u==dt.EMPTY)&&(Kt(a),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(a)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},i,a){e.getState()==dt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Kt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Bc(this.canvas_.getContext("2d")),va.push(this.canvas_),this.canvas_=null),super.release()}}class x2{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof zc&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return zt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return zt(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){zt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}function Cc(r,t,e,i){return i!==void 0?(i[0]=r,i[1]=t,i[2]=e,i):[r,t,e]}function v2(r,t,e){return r+"/"+t+"/"+e}function E2(r){return S2(r[0],r[1],r[2])}function S2(r,t,e){return(t<<r)+e}function C2(r,t){const e=r[0],i=r[1],a=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const o=t.getFullTileRange(e);return o?o.containsXY(i,a):!0}class $v{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(pc(),{get:(t,e)=>{if(typeof pc()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,i)=>(this.push_(e,i),!0)})}push_(...t){const e=this.instructions_,i=this.zIndex+this.offset_;e[i]||(e[i]=[]),e[i].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let i=0,a=e.length;i<a;++i){const o=e[i];if(typeof o=="function"){o(t);continue}const u=e[++i];if(typeof t[o]=="function")t[o](...u);else{if(typeof u=="function"){t[o]=u(t);continue}t[o]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const b2=5;class T2 extends Eo{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=b2}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return It()}getData(t){return null}prepareFrame(t){return It()}renderFrame(t,e){return It()}forEachFeatureAtCoordinate(t,e,i,a,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===Et.LOADED||e.getState()===Et.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Et.LOADED&&e!=Et.ERROR&&t.addEventListener(pt.CHANGE,this.boundHandleImageChange_),e==Et.IDLE&&(t.load(),e=t.getState()),e==Et.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ux=[];let da=null;function w2(){da=de(1,1,void 0,{willReadFrequently:!0})}class Jv extends T2{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Yn(),this.pixelTransform=Yn(),this.inversePixelTransform=Yn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,i){da||w2(),da.clearRect(0,0,1,1);let a;try{da.drawImage(t,e,i,1,1,0,0,1,1),a=da.getImageData(0,0,1,1).data}catch{return da=null,null}return a}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const a=this.getLayer().getClassName();let o,u;if(t&&t.className===a&&(!i||t&&t.style.backgroundColor&&Hi(Aa(t.style.backgroundColor),Aa(i)))){const h=t.firstElementChild;h instanceof HTMLCanvasElement&&(u=h.getContext("2d"))}if(u&&UT(u.canvas.style.transform,e)?(this.container=t,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=a;let h=o.style;h.position="absolute",h.width="100%",h.height="100%",u=de();const f=u.canvas;o.appendChild(f),h=f.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=o,this.context=u}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const a=dr(i),o=Ic(i),u=Nc(i),h=Oc(i);Ee(e.coordinateToPixelTransform,a),Ee(e.coordinateToPixelTransform,o),Ee(e.coordinateToPixelTransform,u),Ee(e.coordinateToPixelTransform,h);const f=this.inversePixelTransform;Ee(f,a),Ee(f,o),Ee(f,u),Ee(f,h),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()}prepareContainer(t,e){const i=t.extent,a=t.viewState.resolution,o=t.viewState.rotation,u=t.pixelRatio,h=Math.round(Yt(i)/a*u),f=Math.round(Ye(i)/a*u);Yi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,o,-h/2,-f/2),dv(this.inversePixelTransform,this.pixelTransform);const g=PT(this.pixelTransform);if(this.useContainer(e,g,this.getBackground(t)),!this.containerReused){const m=this.context.canvas;m.width!=h||m.height!=f?(m.width=h,m.height=f):this.context.clearRect(0,0,h,f),g!==m.style.transform&&(m.style.transform=g)}}dispatchRenderEvent_(t,e,i){const a=this.getLayer();if(a.hasListener(t)){const o=new Zv(t,this.inversePixelTransform,i,e);a.dispatchEvent(o)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Rn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Rn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new $v),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Rn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Rn.POSTRENDER,this.context,t))}getRenderTransform(t,e,i,a,o,u,h){const f=o/2,g=u/2,m=a/e,y=-m,p=-t[0]+h,v=-t[1];return Yi(this.tempTransform,f,g,m,y,-i,p,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Gd(r,t,e,i,a){return`${Ct(r)},${t},${v2(e,i,a)}`}function Pd(r,t,e){if(!(e in r))return r[e]=new Set([t]),!0;const i=r[e],a=i.has(t);return a||i.add(t),!a}function R2(r,t,e){const i=r[e];return i?i.delete(t):!1}function cx(r,t){const e=r.layerStatesArray[r.layerIndex];e.extent&&(t=ar(t,Ni(e.extent,r.viewState.projection)));const i=e.layer.getRenderSource();if(!i.getWrapX()){const a=i.getTileGridForProjection(r.viewState.projection).getExtent();a&&(t=ar(t,a))}return t}class A2 extends Jv{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Dn(),this.tempTileRange_=new fm(0,0,0,0),this.tempTileCoord_=Cc(0,0,0);const i=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new x2(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,i,a){const o=this.tileCache_,h=this.getLayer().getSource(),f=Gd(h,h.getKey(),t,e,i);let g;if(o.containsKey(f))g=o.get(f);else{if(g=h.getTile(t,e,i,a.pixelRatio,a.viewState.projection),!g)return null;o.set(f,g)}return g}getTile(t,e,i,a){const o=this.getOrCreateTile(t,e,i,a);return o||null}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),a=Ee(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!Sa(o,a))return null;const u=e.viewState,h=i.getRenderSource(),f=h.getTileGridForProjection(u.projection),g=h.getTilePixelRatio(e.pixelRatio);for(let m=f.getZForResolution(u.resolution);m>=f.getMinZoom();--m){const y=f.getTileCoordForCoordAndZ(a,m),p=this.getTile(m,y[1],y[2],e);if(!p||p.getState()!==dt.LOADED)continue;const v=f.getOrigin(m),S=tn(f.getTileSize(m)),w=f.getResolution(m);let T;if(p instanceof Wv||p instanceof Qv)T=p.getImage();else if(p instanceof rx){if(T=gg(p.getData()),!T)continue}else continue;const b=Math.floor(g*((a[0]-v[0])/w-y[1]*S[0])),R=Math.floor(g*((v[1]-a[1])/w-y[2]*S[1])),O=Math.round(g*h.getGutterForProjection(u.projection));return this.getImageData(T,b+O,R+O)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const i=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(t,e,i,a,o){const u=t.viewState,h=this.getLayer(),f=h.getRenderSource(),g=f.getTileGridForProjection(u.projection),m=Ct(f);m in t.wantedTiles||(t.wantedTiles[m]={});const y=t.wantedTiles[m],p=h.getMapInternal(),v=Math.max(i-o,g.getMinZoom(),g.getZForResolution(Math.min(h.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(h.getMinZoom(),0)):g.getResolution(0)),f.zDirection)),S=u.rotation,w=S?$x(u.center,u.resolution,S,t.size):void 0;for(let T=i;T>=v;--T){const b=g.getTileRangeForExtentAndZ(e,T,this.tempTileRange_),R=g.getResolution(T);for(let O=b.minX;O<=b.maxX;++O)for(let A=b.minY;A<=b.maxY;++A){if(S&&!g.tileCoordIntersectsViewport([T,O,A],w))continue;const L=this.getTile(T,O,A,t);if(!L||!Pd(a,L,T))continue;const B=L.getKey();if(y[B]=!0,L.getState()===dt.IDLE&&!t.tileQueue.isKeyQueued(B)){const H=Cc(T,O,A,this.tempTileCoord_);t.tileQueue.enqueue([L,m,g.getTileCoordCenter(H),R])}}}}findStaleTile_(t,e){const i=this.tileCache_,a=t[0],o=t[1],u=t[2],h=this.getStaleKeys();for(let f=0;f<h.length;++f){const g=Gd(this.getLayer().getSource(),h[f],a,o,u);if(i.containsKey(g)){const m=i.peek(g);if(m.getState()===dt.LOADED)return m.endTransition(Ct(this)),Pd(e,m,a),!0}}return!1}findAltTiles_(t,e,i,a){const o=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!o)return!1;let u=!0;const h=this.tileCache_,f=this.getLayer().getRenderSource(),g=f.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let y=o.minY;y<=o.maxY;++y){const p=Gd(f,g,i,m,y);let v=!1;if(h.containsKey(p)){const S=h.peek(p);S.getState()===dt.LOADED&&(Pd(a,S,i),v=!0)}v||(u=!1)}return u}renderFrame(t,e){this.renderComplete=!0;const i=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,u=a.resolution,h=a.center,f=t.pixelRatio,g=this.getLayer(),m=g.getSource(),y=m.getTileGridForProjection(o),p=y.getZForResolution(u,m.zDirection),v=y.getResolution(p),S=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let w=t.extent;const T=m.getTilePixelRatio(f);this.prepareContainer(t,e);const b=this.context.canvas.width,R=this.context.canvas.height,O=i.extent&&Ni(i.extent);O&&(w=ar(w,Ni(i.extent)));const A=v*b/2/T,L=v*R/2/T,X=[h[0]-A,h[1]-L,h[0]+A,h[1]+L],B={};this.renderedTiles.length=0;const H=g.getPreload();if(t.nextExtent){const $=y.getZForResolution(a.nextResolution,m.zDirection),at=cx(t,t.nextExtent);this.enqueueTiles(t,at,$,B,H)}const V=cx(t,w);if(this.enqueueTiles(t,V,p,B,0),H>0&&setTimeout(()=>{this.enqueueTiles(t,V,p-1,B,H-1)},0),!(p in B))return this.container;const et=Ct(this),lt=t.time;for(const $ of B[p]){const at=$.getState();if(at===dt.EMPTY)continue;const M=$.tileCoord;if(at===dt.LOADED&&$.getAlpha(et,lt)===1){$.endTransition(et);continue}if(at!==dt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(M,B)){R2(B,$,p),t.animate=!0;continue}if(this.findAltTiles_(y,M,p+1,B))continue;const tt=y.getMinZoom();for(let rt=p-1;rt>=tt&&!this.findAltTiles_(y,M,rt,B);--rt);}const it=v/u*f/T,st=this.getRenderContext(t);Yi(this.tempTransform,b/2,R/2,it,it,0,-b/2,-R/2),i.extent&&this.clipUnrotated(st,t,O),m.getInterpolate()||(st.imageSmoothingEnabled=!1),this.preRender(st,t);const J=Object.keys(B).map(Number);J.sort(ki);let nt;const I=[],Z=[];for(let $=J.length-1;$>=0;--$){const at=J[$],M=m.getTilePixelSize(at,f,o),z=y.getResolution(at)/v,tt=M[0]*z*it,rt=M[1]*z*it,ht=y.getTileCoordForCoordAndZ(dr(X),at),ut=y.getTileCoordExtent(ht),Ft=Ee(this.tempTransform,[T*(ut[0]-X[0])/v,T*(X[3]-ut[3])/v]),At=T*m.getGutterForProjection(o);for(const le of B[at]){if(le.getState()!==dt.LOADED)continue;const Se=le.tileCoord,ci=ht[1]-Se[1],Ns=Math.round(Ft[0]-(ci-1)*tt),hi=ht[2]-Se[2],Ln=Math.round(Ft[1]-(hi-1)*rt),Xe=Math.round(Ft[0]-ci*tt),gn=Math.round(Ft[1]-hi*rt),Ce=Ns-Xe,Zi=Ln-gn,qi=J.length===1;let Vn=!1;nt=[Xe,gn,Xe+Ce,gn,Xe+Ce,gn+Zi,Xe,gn+Zi];for(let On=0,Ki=I.length;On<Ki;++On)if(!qi&&at<Z[On]){const se=I[On];Ue([Xe,gn,Xe+Ce,gn+Zi],[se[0],se[3],se[4],se[7]])&&(Vn||(st.save(),Vn=!0),st.beginPath(),st.moveTo(nt[0],nt[1]),st.lineTo(nt[2],nt[3]),st.lineTo(nt[4],nt[5]),st.lineTo(nt[6],nt[7]),st.moveTo(se[6],se[7]),st.lineTo(se[4],se[5]),st.lineTo(se[2],se[3]),st.lineTo(se[0],se[1]),st.clip())}I.push(nt),Z.push(at),this.drawTile(le,t,Xe,gn,Ce,Zi,At,qi),Vn&&st.restore(),this.renderedTiles.unshift(le),this.updateUsedTiles(t.usedTiles,m,le)}}if(this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!to(this.renderedExtent_,X),this.renderedExtent_=X,this.renderedPixelRatio=f,this.postRender(this.context,t),i.extent&&st.restore(),st.imageSmoothingEnabled=!0,this.renderComplete){const $=(at,M)=>{const U=Ct(m),z=M.wantedTiles[U],tt=z?Object.keys(z).length:0;this.updateCacheSize(tt),this.tileCache_.expireCache()};t.postRenderFunctions.push($)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,i,a,o,u,h,f){let g;if(t instanceof rx){if(g=gg(t.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(t);if(!g)return;const m=this.getRenderContext(e),y=Ct(this),p=e.layerStatesArray[e.layerIndex],v=p.opacity*(f?t.getAlpha(y,e.time):1),S=v!==m.globalAlpha;S&&(m.save(),m.globalAlpha=v),m.drawImage(g,h,h,g.width-2*h,g.height-2*h,i,a,o,u),S&&m.restore(),v!==p.opacity?e.animate=!0:f&&t.endTransition(y)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,i){const a=Ct(e);a in t||(t[a]={}),t[a][i.getKey()]=!0}}const Qu={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class M2 extends Hc{constructor(t){t=t||{};const e=Object.assign({},t),i=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Qu.PRELOAD)}setPreload(t){this.set(Qu.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Qu.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Qu.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class D2 extends M2{constructor(t){super(t)}createRenderer(){return new A2(this,{cacheSize:this.getCacheSize()})}}const la=[0,0,0],Ss=5;class t1{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,zt(CT(this.resolutions_,(a,o)=>o-a),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let a=0,o=this.resolutions_.length-1;a<o;++a)if(!e)e=this.resolutions_[a]/this.resolutions_[a+1];else if(this.resolutions_[a]/this.resolutions_[a+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,zt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=dr(i)),zt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,zt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Qg,zt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((a,o)=>{const u=new fm(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){const h=this.getTileRangeForExtentAndZ(i,o);u.minX=Math.max(h.minX,u.minX),u.maxX=Math.min(h.maxX,u.maxX),u.minY=Math.max(h.minY,u.minY),u.maxY=Math.min(h.maxY,u.maxY)}return u}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const a=this.getTileRangeForExtentAndZ(t,e);for(let o=a.minX,u=a.maxX;o<=u;++o)for(let h=a.minY,f=a.maxY;h<=f;++h)i([e,o,h])}forEachTileCoordParentTileRange(t,e,i,a){let o,u,h,f=null,g=t[0]-1;for(this.zoomFactor_===2?(u=t[1],h=t[2]):f=this.getTileCoordExtent(t,a);g>=this.minZoom;){if(u!==void 0&&h!==void 0?(u=Math.floor(u/2),h=Math.floor(h/2),o=aa(u,u,h,h,i)):o=this.getTileRangeForExtentAndZ(f,g,i),e(g,o))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const o=t[1]*2,u=t[2]*2;return aa(o,o+1,u,u+1,e)}const a=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const a=t[0],o=t[1],u=t[2];if(e===a)return aa(o,u,o,u,i);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,e-a),g=Math.floor(o*f),m=Math.floor(u*f);if(e<a)return aa(g,g,m,m,i);const y=Math.floor(f*(o+1))-1,p=Math.floor(f*(u+1))-1;return aa(g,y,m,p,i)}const h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,la);const a=la[1],o=la[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,la);const u=la[1],h=la[2];return aa(a,u,o,h,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),a=tn(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*a[0]*i,e[1]-(t[2]+.5)*a[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),a=this.getResolution(t[0]),o=tn(this.getTileSize(t[0]),this.tmpSize_),u=i[0]+t[1]*o[0]*a,h=i[1]-(t[2]+1)*o[1]*a,f=u+o[0]*a,g=h+o[1]*a;return Ui(u,h,f,g,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,a,o){const u=this.getZForResolution(i),h=i/this.getResolution(u),f=this.getOrigin(u),g=tn(this.getTileSize(u),this.tmpSize_);let m=h*(t-f[0])/i/g[0],y=h*(f[1]-e)/i/g[1];return a?(m=Uu(m,Ss)-1,y=Uu(y,Ss)-1):(m=Pu(m,Ss),y=Pu(y,Ss)),Cc(u,m,y,o)}getTileCoordForXYAndZ_(t,e,i,a,o){const u=this.getOrigin(i),h=this.getResolution(i),f=tn(this.getTileSize(i),this.tmpSize_);let g=(t-u[0])/h/f[0],m=(u[1]-e)/h/f[1];return a?(g=Uu(g,Ss)-1,m=Uu(m,Ss)-1):(g=Pu(g,Ss),m=Pu(m,Ss)),Cc(i,g,m,o)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=kg(this.resolutions_,t,e||0);return Qt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Ev(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let a=this.minZoom;a<e;++a)i[a]=this.getTileRangeForExtentAndZ(t,a);this.fullTileRanges_=i}}function e1(r){let t=r.getDefaultTileGrid();return t||(t=I2(r),r.setDefaultTileGrid(t)),t}function L2(r,t,e){const i=t[0],a=r.getTileCoordCenter(t),o=dm(e);if(!Sa(o,a)){const u=Yt(o),h=Math.ceil((o[0]-a[0])/u);return a[0]+=u*h,r.getTileCoordForCoordAndZ(a,i)}return t}function O2(r,t,e,i){i=i!==void 0?i:"top-left";const a=n1(r,t,e);return new t1({extent:r,origin:kb(r,i),resolutions:a,tileSize:e})}function N2(r){const t=r||{},e=t.extent||en("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:n1(e,t.maxZoom,t.tileSize,t.maxResolution)};return new t1(i)}function n1(r,t,e,i){t=t!==void 0?t:cw,e=tn(e!==void 0?e:Qg);const a=Ye(r),o=Yt(r);i=i>0?i:Math.max(o/e[0],a/e[1]);const u=t+1,h=new Array(u);for(let f=0;f<u;++f)h[f]=i/Math.pow(2,f);return h}function I2(r,t,e,i){const a=dm(r);return O2(a,t,e,i)}function dm(r){r=en(r);let t=r.getExtent();if(!t){const e=180*Ag.degrees/r.getMetersPerUnit();t=Ui(-e,-e,e,e)}return t}const j2=/\{z\}/g,k2=/\{x\}/g,F2=/\{y\}/g,z2=/\{-y\}/g;function G2(r,t,e,i,a){return r.replace(j2,t.toString()).replace(k2,e.toString()).replace(F2,i.toString()).replace(z2,function(){if(a===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(a-i).toString()})}function P2(r){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(r);if(e){const i=e[1].charCodeAt(0),a=e[2].charCodeAt(0);let o;for(o=i;o<=a;++o)t.push(r.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){const i=parseInt(e[2],10);for(let a=parseInt(e[1],10);a<=i;a++)t.push(r.replace(e[0],a.toString()));return t}return t.push(r),t}function U2(r,t){return(function(e,i,a){if(!e)return;let o;const u=e[0];if(t){const h=t.getFullTileRange(u);h&&(o=h.getHeight()-1)}return G2(r,u,e[1],e[2],o)})}function Y2(r,t){const e=r.length,i=new Array(e);for(let a=0;a<e;++a)i[a]=U2(r[a],t);return X2(i)}function X2(r){return r.length===1?r[0]:(function(t,e,i){if(!t)return;const a=E2(t),o=ya(a,r.length);return r[o](t,e,i)})}class i1 extends ui{constructor(t){super(),this.projection=en(t.projection),this.attributions_=hx(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,a){e.viewResolver=i,e.viewRejector=a})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=hx(t),this.changed()}setState(t){this.state_=t,this.changed()}}function hx(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),t=>r):null}class B2 extends i1{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&tn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||Ct(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,a,o){return It()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:e1(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const a=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),u=tn(a.getTileSize(t),this.tmpSize);return o==1?u:rR(u,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const i=e!==void 0?e:this.getProjection(),a=e!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=L2(a,t,i)),C2(t,a)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class H2 extends Hn{constructor(t,e){super(t),this.tile=e}}const Ud={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class gm extends B2{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===gm.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=Ct(e),a=e.getState();let o;a==dt.LOADING?(this.tileLoadingKeys_[i]=!0,o=Ud.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=a==dt.ERROR?Ud.TILELOADERROR:a==dt.LOADED?Ud.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new H2(o,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=P2(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Y2(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}class V2 extends gm{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Z2,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Wv,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!xd(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||xd(e,t)))return this.tileGrid;const i=Ct(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=e1(t)),this.tileGridForProjection[i]}createTile_(t,e,i,a,o,u){const h=[t,e,i],f=this.getTileCoordForTileUrlFunction(h,o),g=f?this.tileUrlFunction(f,a,o):void 0,m=new this.tileClass(h,g!==void 0?dt.IDLE:dt.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=u,m.addEventListener(pt.CHANGE,this.handleTileChange.bind(this)),m}getTile(t,e,i,a,o){const u=this.getProjection();if(!u||!o||xd(u,o))return this.getTileInternal(t,e,i,a,u||o);const h=[t,e,i],f=this.getKey(),g=this.getTileGridForProjection(u),m=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(h,o),p=new Qv(u,g,o,m,h,y,this.getTilePixelRatio(a),this.getGutter(),(v,S,w,T)=>this.getTileInternal(v,S,w,T,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=f,p}getTileInternal(t,e,i,a,o){const u=this.getKey();return this.createTile_(t,e,i,a,o,u)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const i=en(t);if(i){const a=Ct(i);a in this.tileGridForProjection||(this.tileGridForProjection[a]=e)}}}function Z2(r,t){r.getImage().src=t}class q2 extends V2{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:N2({extent:dm(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const K2='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class W2 extends q2{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[K2];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",a=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:a,wrapX:t.wrapX,zDirection:t.zDirection})}}class s1{drawCustom(t,e,i,a,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const ft={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},$u=[ft.FILL],Ms=[ft.STROKE],rr=[ft.BEGIN_PATH],fx=[ft.CLOSE_PATH];class bo extends s1{constructor(t,e,i,a){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=a,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,o=this.coordinates;let u=o.length;for(let h=0,f=t.length;h<f;h+=e)a[0]=t[h],a[1]=t[h+1],Sa(i,a)&&(o[u++]=a[0],o[u++]=a[1]);return u}appendFlatLineCoordinates(t,e,i,a,o,u){const h=this.coordinates;let f=h.length;const g=this.getBufferedMaxExtent();u&&(e+=a);let m=t[e],y=t[e+1];const p=this.tmpCoordinate_;let v=!0,S,w,T;for(S=e+a;S<i;S+=a)p[0]=t[S],p[1]=t[S+1],T=$d(g,p),T!==w?(v&&(h[f++]=m,h[f++]=y,v=!1),h[f++]=p[0],h[f++]=p[1]):T===ve.INTERSECTING?(h[f++]=p[0],h[f++]=p[1],v=!1):v=!0,m=p[0],y=p[1],w=T;return(o&&v||S===e+a)&&(h[f++]=m,h[f++]=y),f}drawCustomCoordinates_(t,e,i,a,o){for(let u=0,h=i.length;u<h;++u){const f=i[u],g=this.appendFlatLineCoordinates(t,e,f,a,!1,!1);o.push(g),e=f}return e}drawCustom(t,e,i,a,o){this.beginGeometry(t,e,o);const u=t.getType(),h=t.getStride(),f=this.coordinates.length;let g,m,y,p,v;switch(u){case"MultiPolygon":g=t.getOrientedFlatCoordinates(),p=[];const S=t.getEndss();v=0;for(let w=0,T=S.length;w<T;++w){const b=[];v=this.drawCustomCoordinates_(g,v,S[w],h,b),p.push(b)}this.instructions.push([ft.CUSTOM,f,p,t,i,rg,o]),this.hitDetectionInstructions.push([ft.CUSTOM,f,p,t,a||i,rg,o]);break;case"Polygon":case"MultiLineString":y=[],g=u=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),v=this.drawCustomCoordinates_(g,0,t.getEnds(),h,y),this.instructions.push([ft.CUSTOM,f,y,t,i,io,o]),this.hitDetectionInstructions.push([ft.CUSTOM,f,y,t,a||i,io,o]);break;case"LineString":case"Circle":g=t.getFlatCoordinates(),m=this.appendFlatLineCoordinates(g,0,g.length,h,!1,!1),this.instructions.push([ft.CUSTOM,f,m,t,i,As,o]),this.hitDetectionInstructions.push([ft.CUSTOM,f,m,t,a||i,As,o]);break;case"MultiPoint":g=t.getFlatCoordinates(),m=this.appendFlatPointCoordinates(g,h),m>f&&(this.instructions.push([ft.CUSTOM,f,m,t,i,As,o]),this.hitDetectionInstructions.push([ft.CUSTOM,f,m,t,a||i,As,o]));break;case"Point":g=t.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),m=this.coordinates.length,this.instructions.push([ft.CUSTOM,f,m,t,i,void 0,o]),this.hitDetectionInstructions.push([ft.CUSTOM,f,m,t,a||i,void 0,o]);break}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[ft.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ft.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let a,o,u=-1;for(e=0;e<i;++e)a=t[e],o=a[0],o==ft.END_GEOMETRY?u=e:o==ft.BEGIN_GEOMETRY&&(a[2]=e,ST(this.hitDetectionInstructions,u,e),u=-1)}fillStyleToState(t,e={}){if(t){const i=t.getColor();e.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,e.fillStyle=si(i||$e)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const i=t.getColor();e.strokeStyle=si(i||ao);const a=t.getLineCap();e.lineCap=a!==void 0?a:Ma;const o=t.getLineDash();e.lineDash=o?o.slice():Fi;const u=t.getLineDashOffset();e.lineDashOffset=u||zi;const h=t.getLineJoin();e.lineJoin=h!==void 0?h:Da;const f=t.getWidth();e.lineWidth=f!==void 0?f:oo;const g=t.getMiterLimit();e.miterLimit=g!==void 0?g:ro,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const i=this.state;this.fillStyleToState(t,i),this.strokeStyleToState(e,i)}createFill(t){const e=t.fillStyle,i=[ft.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ft.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,a=t.lineCap,o=t.lineDash,u=t.lineDashOffset,h=t.lineJoin,f=t.lineWidth,g=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=a||o!=t.currentLineDash&&!Hi(t.currentLineDash,o)||t.currentLineDashOffset!=u||t.currentLineJoin!=h||t.currentLineWidth!=f||t.currentMiterLimit!=g)&&(e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=a,t.currentLineDash=o,t.currentLineDashOffset=u,t.currentLineJoin=h,t.currentLineWidth=f,t.currentMiterLimit=g)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[ft.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Kx(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Lc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Q2 extends bo{constructor(t,e,i,a){super(t,e,i,a),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!Sa(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const a=t.getFlatCoordinates(),o=t.getStride(),u=this.coordinates.length,h=this.appendFlatPointCoordinates(a,o);this.instructions.push([ft.DRAW_IMAGE,u,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ft.DRAW_IMAGE,u,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const a=t.getFlatCoordinates(),o=[];for(let f=0,g=a.length;f<g;f+=t.getStride())(!this.maxExtent||Sa(this.maxExtent,a.slice(f,f+2)))&&o.push(a[f],a[f+1]);const u=this.coordinates.length,h=this.appendFlatPointCoordinates(o,2);this.instructions.push([ft.DRAW_IMAGE,u,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ft.DRAW_IMAGE,u,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),a=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class $2 extends bo{constructor(t,e,i,a){super(t,e,i,a)}drawFlatCoordinates_(t,e,i,a){const o=this.coordinates.length,u=this.appendFlatLineCoordinates(t,e,i,a,!1,!1),h=[ft.MOVE_TO_LINE_TO,o,u];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i}drawLineString(t,e,i){const a=this.state,o=a.strokeStyle,u=a.lineWidth;if(o===void 0||u===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([ft.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,Fi,zi],rr);const h=t.getFlatCoordinates(),f=t.getStride();this.drawFlatCoordinates_(h,0,h.length,f),this.hitDetectionInstructions.push(Ms),this.endGeometry(e)}drawMultiLineString(t,e,i){const a=this.state,o=a.strokeStyle,u=a.lineWidth;if(o===void 0||u===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([ft.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,Fi,zi],rr);const h=t.getEnds(),f=t.getFlatCoordinates(),g=t.getStride();let m=0;for(let y=0,p=h.length;y<p;++y)m=this.drawFlatCoordinates_(f,m,h[y],g);this.hitDetectionInstructions.push(Ms),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ms),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ms),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(rr)}}class dx extends bo{constructor(t,e,i,a){super(t,e,i,a)}drawFlatCoordinatess_(t,e,i,a){const o=this.state,u=o.fillStyle!==void 0,h=o.strokeStyle!==void 0,f=i.length;this.instructions.push(rr),this.hitDetectionInstructions.push(rr);for(let g=0;g<f;++g){const m=i[g],y=this.coordinates.length,p=this.appendFlatLineCoordinates(t,e,m,a,!0,!h),v=[ft.MOVE_TO_LINE_TO,y,p];this.instructions.push(v),this.hitDetectionInstructions.push(v),h&&(this.instructions.push(fx),this.hitDetectionInstructions.push(fx)),e=m}return u&&(this.instructions.push($u),this.hitDetectionInstructions.push($u)),h&&(this.instructions.push(Ms),this.hitDetectionInstructions.push(Ms)),e}drawCircle(t,e,i){const a=this.state,o=a.fillStyle,u=a.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_FILL_STYLE,$e]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,Fi,zi]);const h=t.getFlatCoordinates(),f=t.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(h,0,h.length,f,!1,!1);const m=[ft.CIRCLE,g];this.instructions.push(rr,m),this.hitDetectionInstructions.push(rr,m),a.fillStyle!==void 0&&(this.instructions.push($u),this.hitDetectionInstructions.push($u)),a.strokeStyle!==void 0&&(this.instructions.push(Ms),this.hitDetectionInstructions.push(Ms)),this.endGeometry(e)}drawPolygon(t,e,i){const a=this.state,o=a.fillStyle,u=a.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_FILL_STYLE,$e]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,Fi,zi]);const h=t.getEnds(),f=t.getOrientedFlatCoordinates(),g=t.getStride();this.drawFlatCoordinatess_(f,0,h,g),this.endGeometry(e)}drawMultiPolygon(t,e,i){const a=this.state,o=a.fillStyle,u=a.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_FILL_STYLE,$e]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ft.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,Fi,zi]);const h=t.getEndss(),f=t.getOrientedFlatCoordinates(),g=t.getStride();let m=0;for(let y=0,p=h.length;y<p;++y)m=this.drawFlatCoordinatess_(f,m,h[y],g);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,a=e.length;i<a;++i)e[i]=tr(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function J2(r,t,e,i,a){const o=[];let u=e,h=0,f=t.slice(e,2);for(;h<r&&u+a<i;){const[g,m]=f.slice(-2),y=t[u+a],p=t[u+a+1],v=Math.sqrt((y-g)*(y-g)+(p-m)*(p-m));if(h+=v,h>=r){const S=(r-h+v)/v,w=fn(g,y,S),T=fn(m,p,S);f.push(w,T),o.push(f),f=[w,T],h==r&&(u+=a),h=0}else if(h<r)f.push(t[u+a],t[u+a+1]),u+=a;else{const S=v-h,w=fn(g,y,S/v),T=fn(m,p,S/v);f.push(w,T),o.push(f),f=[w,T],h=0,u+=a}}return h>0&&o.push(f),o}function tA(r,t,e,i,a){let o=e,u=e,h=0,f=0,g=e,m,y,p,v,S,w,T,b,R,O;for(y=e;y<i;y+=a){const A=t[y],L=t[y+1];S!==void 0&&(R=A-S,O=L-w,v=Math.sqrt(R*R+O*O),T!==void 0&&(f+=p,m=Math.acos((T*R+b*O)/(p*v)),m>r&&(f>h&&(h=f,o=g,u=y),f=0,g=y-a)),p=v,T=R,b=O),S=A,w=L}return f+=v,f>h?[g,y]:[o,u]}const bc={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class eA extends bo{constructor(t,e,i,a){super(t,e,i,a),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$e]={fillStyle:$e},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const a=this.textFillState_,o=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!a&&!o)return;const h=this.coordinates;let f=h.length;const g=t.getType();let m=null,y=t.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Ue(this.maxExtent,t.getExtent()))return;let p;if(m=t.getFlatCoordinates(),g=="LineString")p=[m.length];else if(g=="MultiLineString")p=t.getEnds();else if(g=="Polygon")p=t.getEnds().slice(0,1);else if(g=="MultiPolygon"){const T=t.getEndss();p=[];for(let b=0,R=T.length;b<R;++b)p.push(T[b][0])}this.beginGeometry(t,e,i);const v=u.repeat,S=v?void 0:u.textAlign;let w=0;for(let T=0,b=p.length;T<b;++T){let R;v?R=J2(v*this.resolution,m,w,p[T],y):R=[m.slice(w,p[T])];for(let O=0,A=R.length;O<A;++O){const L=R[O];let X=0,B=L.length;if(S==null){const V=tA(u.maxAngle,L,0,L.length,2);X=V[0],B=V[1]}for(let V=X;V<B;V+=y)h.push(L[V],L[V+1]);const H=h.length;w=p[T],this.drawChars_(f,H),f=H}}this.endGeometry(e)}else{let p=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":m=t.getFlatCoordinates();break;case"LineString":m=t.getFlatMidpoint();break;case"Circle":m=t.getCenter();break;case"MultiLineString":m=t.getFlatMidpoints(),y=2;break;case"Polygon":m=t.getFlatInteriorPoint(),u.overflow||p.push(m[2]/this.resolution),y=3;break;case"MultiPolygon":const A=t.getFlatInteriorPoints();m=[];for(let L=0,X=A.length;L<X;L+=3)u.overflow||p.push(A[L+2]/this.resolution),m.push(A[L],A[L+1]);if(m.length===0)return;y=2;break}const v=this.appendFlatPointCoordinates(m,y);if(v===f)return;if(p&&(v-f)/2!==m.length/y){let A=f/2;p=p.filter((L,X)=>{const B=h[(A+X)*2]===m[X*y]&&h[(A+X)*2+1]===m[X*y+1];return B||--A,B})}this.saveTextStates_();const S=u.backgroundFill?this.createFill(this.fillStyleToState(u.backgroundFill)):null,w=u.backgroundStroke?this.createStroke(this.strokeStyleToState(u.backgroundStroke)):null;this.beginGeometry(t,e,i);let T=u.padding;if(T!=sr&&(u.scale[0]<0||u.scale[1]<0)){let A=u.padding[0],L=u.padding[1],X=u.padding[2],B=u.padding[3];u.scale[0]<0&&(L=-L,B=-B),u.scale[1]<0&&(A=-A,X=-X),T=[A,L,X,B]}const b=this.pixelRatio;this.instructions.push([ft.DRAW_IMAGE,f,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,T==sr?sr:T.map(function(A){return A*b}),S,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]);const R=1/b,O=S?S.slice(0):null;O&&(O[1]=$e),this.hitDetectionInstructions.push([ft.DRAW_IMAGE,f,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,T,O,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$e:this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||lo,justify:e.justify,textBaseline:e.textBaseline||vc,scale:e.scale});const u=this.fillKey_;i&&(u in this.fillStates||(this.fillStates[u]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,a=this.textState_,o=this.strokeKey_,u=this.textKey_,h=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,g=bc[a.textBaseline],m=this.textOffsetY_*f,y=this.text_,p=i?i.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([ft.DRAW_CHARS,t,e,g,a.overflow,h,a.maxAngle,f,m,o,p*f,y,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ft.DRAW_CHARS,t,e,g,a.overflow,h&&$e,a.maxAngle,f,m,o,p*f,y,u,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,a,o;if(!t)this.text_="";else{const u=t.getFill();u?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=si(u.getColor()||$e)):(a=null,this.textFillState_=a);const h=t.getStroke();if(!h)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const w=h.getLineDash(),T=h.getLineDashOffset(),b=h.getWidth(),R=h.getMiterLimit();o.lineCap=h.getLineCap()||Ma,o.lineDash=w?w.slice():Fi,o.lineDashOffset=T===void 0?zi:T,o.lineJoin=h.getLineJoin()||Da,o.lineWidth=b===void 0?oo:b,o.miterLimit=R===void 0?ro:R,o.strokeStyle=si(h.getColor()||ao)}i=this.textState_;const f=t.getFont()||Fv;FR(f);const g=t.getScaleArray();i.overflow=t.getOverflow(),i.font=f,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||vc,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||sr,i.scale=g===void 0?[1,1]:g;const m=t.getOffsetX(),y=t.getOffsetY(),p=t.getRotateWithView(),v=t.getKeepUpright(),S=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=p===void 0?!1:p,this.textKeepUpright_=v===void 0?!0:v,this.textRotation_=S===void 0?0:S,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Ct(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=a&&a.fillStyle?typeof a.fillStyle=="string"?a.fillStyle:"|"+Ct(a.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const nA={Circle:dx,Default:bo,Image:Q2,LineString:$2,Polygon:dx,Text:eA};class iA{constructor(t,e,i,a){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=a,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const a in i){const o=i[a].finish();t[e][a]=o}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let a=this.buildersByZIndex_[i];a===void 0&&(a={},this.buildersByZIndex_[i]=a);let o=a[e];if(o===void 0){const u=nA[e];o=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),a[e]=o}return o}}function mm(r,t,e,i){let a=r[t],o=r[t+1],u=0;for(let h=t+i;h<e;h+=i){const f=r[h],g=r[h+1];u+=Math.sqrt((f-a)*(f-a)+(g-o)*(g-o)),a=f,o=g}return u}function sA(r,t,e,i,a,o,u,h,f,g,m,y,p=!0){let v=r[t],S=r[t+1],w=0,T=0,b=0,R=0;function O(){w=v,T=S,t+=i,v=r[t],S=r[t+1],R+=b,b=Math.sqrt((v-w)*(v-w)+(S-T)*(S-T))}do O();while(t<e-i&&R+b<o);let A=b===0?0:(o-R)/b;const L=fn(w,v,A),X=fn(T,S,A),B=t-i,H=R,V=o+h*f(g,a,m);for(;t<e-i&&R+b<V;)O();A=b===0?0:(V-R)/b;const et=fn(w,v,A),lt=fn(T,S,A);let it=!1;if(p)if(y){const Z=[L,X,et,lt];zg(Z,0,4,2,y,Z,Z),it=Z[0]>Z[2]}else it=L>et;const st=Math.PI,J=[],nt=B+i===t;t=B,b=0,R=H,v=r[t],S=r[t+1];let I;if(nt){O(),I=Math.atan2(S-T,v-w),it&&(I+=I>0?-st:st);const Z=(et+L)/2,$=(lt+X)/2;return J[0]=[Z,$,(V-o)/2,I,a],J}a=a.replace(/\n/g," ");for(let Z=0,$=a.length;Z<$;){O();let at=Math.atan2(S-T,v-w);if(it&&(at+=at>0?-st:st),I!==void 0){let ht=at-I;if(ht+=ht>st?-2*st:ht<-st?2*st:0,Math.abs(ht)>u)return null}I=at;const M=Z;let U=0;for(;Z<$;++Z){const ht=it?$-Z-1:Z,ut=h*f(g,a[ht],m);if(t+i<e&&R+b<o+U+ut/2)break;U+=ut}if(Z===M)continue;const z=it?a.substring($-M,$-Z):a.substring(M,Z);A=b===0?0:(o+U/2-R)/b;const tt=fn(w,v,A),rt=fn(T,S,A);J.push([tt,rt,U/2,at,z]),o+=U}return J}const oa=Dn(),Cs=[],Ai=[],Mi=[],bs=[];function gx(r){return r[3].declutterBox}const mx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Yd(r,t){return t==="start"?t=mx.test(r)?"right":"left":t==="end"&&(t=mx.test(r)?"left":"right"),bc[t]}function rA(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}function aA(r,t,e){return e%2===0&&(r+=t),r}class lA{constructor(t,e,i,a,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=a.instructions,this.coordinates=a.coordinates,this.coordinateCache_={},this.renderedTransform_=Yn(),this.hitDetectionInstructions=a.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=a.fillStates||{},this.strokeStates=a.strokeStates||{},this.textStates=a.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new $v:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,a){const o=t+e+i+a;if(this.labels_[o])return this.labels_[o];const u=a?this.strokeStates[a]:null,h=i?this.fillStates[i]:null,f=this.textStates[e],g=this.pixelRatio,m=[f.scale[0]*g,f.scale[1]*g],y=f.justify?bc[f.justify]:Yd(Array.isArray(t)?t[0]:t,f.textAlign||lo),p=a&&u.lineWidth?u.lineWidth:0,v=Array.isArray(t)?t:String(t).split(`
`).reduce(rA,[]),{width:S,height:w,widths:T,heights:b,lineWidths:R}=GR(f,v),O=S+p,A=[],L=(O+2)*m[0],X=(w+p)*m[1],B={width:L<0?Math.floor(L):Math.ceil(L),height:X<0?Math.floor(X):Math.ceil(X),contextInstructions:A};(m[0]!=1||m[1]!=1)&&A.push("scale",m),a&&(A.push("strokeStyle",u.strokeStyle),A.push("lineWidth",p),A.push("lineCap",u.lineCap),A.push("lineJoin",u.lineJoin),A.push("miterLimit",u.miterLimit),A.push("setLineDash",[u.lineDash]),A.push("lineDashOffset",u.lineDashOffset)),i&&A.push("fillStyle",h.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");const H=.5-y;let V=y*O+H*p;const et=[],lt=[];let it=0,st=0,J=0,nt=0,I;for(let Z=0,$=v.length;Z<$;Z+=2){const at=v[Z];if(at===`
`){st+=it,it=0,V=y*O+H*p,++nt;continue}const M=v[Z+1]||f.font;M!==I&&(a&&et.push("font",M),i&&lt.push("font",M),I=M),it=Math.max(it,b[J]);const U=[at,V+H*T[J]+y*(T[J]-R[nt]),.5*(p+it)+st];V+=T[J],a&&et.push("strokeText",U),i&&lt.push("fillText",U),++J}return Array.prototype.push.apply(A,et),Array.prototype.push.apply(A,lt),this.labels_[o]=B,B}replayTextBackground_(t,e,i,a,o,u,h){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,o),t.lineTo.apply(t,e),u&&(this.alignAndScaleFill_=u[2],t.fillStyle=u[1],this.fill_(t)),h&&(this.setStrokeStyle_(t,h),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,a,o,u,h,f,g,m,y,p,v,S,w,T){h*=p[0],f*=p[1];let b=i-h,R=a-f;const O=o+g>t?t-g:o,A=u+m>e?e-m:u,L=S[3]+O*p[0]+S[1],X=S[0]+A*p[1]+S[2],B=b-S[3],H=R-S[0];(w||y!==0)&&(Cs[0]=B,bs[0]=B,Cs[1]=H,Ai[1]=H,Ai[0]=B+L,Mi[0]=Ai[0],Mi[1]=H+X,bs[1]=Mi[1]);let V;return y!==0?(V=Yi(Yn(),i,a,1,1,y,-i,-a),Ee(V,Cs),Ee(V,Ai),Ee(V,Mi),Ee(V,bs),Ui(Math.min(Cs[0],Ai[0],Mi[0],bs[0]),Math.min(Cs[1],Ai[1],Mi[1],bs[1]),Math.max(Cs[0],Ai[0],Mi[0],bs[0]),Math.max(Cs[1],Ai[1],Mi[1],bs[1]),oa)):Ui(Math.min(B,B+L),Math.min(H,H+X),Math.max(B,B+L),Math.max(H,H+X),oa),v&&(b=Math.round(b),R=Math.round(R)),{drawImageX:b,drawImageY:R,drawImageW:O,drawImageH:A,originX:g,originY:m,declutterBox:{minX:oa[0],minY:oa[1],maxX:oa[2],maxY:oa[3],value:T},canvasTransform:V,scale:p}}replayImageOrLabel_(t,e,i,a,o,u,h){const f=!!(u||h),g=a.declutterBox,m=h?h[2]*a.scale[0]/2:0;return g.minX-m<=e[0]&&g.maxX+m>=0&&g.minY-m<=e[1]&&g.maxY+m>=0&&(f&&this.replayTextBackground_(t,Cs,Ai,Mi,bs,u,h),PR(t,a.canvasTransform,o,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=Ee(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;t.save(),t.translate(i[0]%a,i[1]%a),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,i,a){const o=this.textStates[e],u=this.createLabel(t,e,a,i),h=this.strokeStates[i],f=this.pixelRatio,g=Yd(Array.isArray(t)?t[0]:t,o.textAlign||lo),m=bc[o.textBaseline||vc],y=h&&h.lineWidth?h.lineWidth:0,p=u.width/f-2*o.scale[0],v=g*p+2*(.5-g)*y,S=m*u.height/f+2*(.5-m)*y;return{label:u,anchorX:v,anchorY:S}}execute_(t,e,i,a,o,u,h,f){const g=this.zIndexContext_;let m;this.pixelCoordinates_&&Hi(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Ds(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),FT(this.renderedTransform_,i));let y=0;const p=a.length;let v=0,S,w,T,b,R,O,A,L,X,B,H,V,et,lt=0,it=0;const st=this.coordinateCache_,J=this.viewRotation_,nt=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,I={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:J},Z=this.instructions!=a||this.overlaps?0:200;let $,at,M,U;for(;y<p;){const z=a[y];switch(z[0]){case ft.BEGIN_GEOMETRY:$=z[1],U=z[3],$.getGeometry()?h!==void 0&&!Ue(h,U.getExtent())?y=z[2]+1:++y:y=z[2],g&&(g.zIndex=z[4]);break;case ft.BEGIN_PATH:lt>Z&&(this.fill_(t),lt=0),it>Z&&(t.stroke(),it=0),!lt&&!it&&(t.beginPath(),R=NaN,O=NaN),++y;break;case ft.CIRCLE:v=z[1];const rt=m[v],ht=m[v+1],ut=m[v+2],Ft=m[v+3],At=ut-rt,le=Ft-ht,Se=Math.sqrt(At*At+le*le);t.moveTo(rt+Se,ht),t.arc(rt,ht,Se,0,2*Math.PI,!0),++y;break;case ft.CLOSE_PATH:t.closePath(),++y;break;case ft.CUSTOM:v=z[1],S=z[2];const ci=z[3],Ns=z[4],hi=z[5];I.geometry=ci,I.feature=$,y in st||(st[y]=[]);const Ln=st[y];hi?hi(m,v,S,2,Ln):(Ln[0]=m[v],Ln[1]=m[v+1],Ln.length=2),g&&(g.zIndex=z[6]),Ns(Ln,I),++y;break;case ft.DRAW_IMAGE:v=z[1],S=z[2],X=z[3],w=z[4],T=z[5];let Xe=z[6];const gn=z[7],Ce=z[8],Zi=z[9],qi=z[10];let Vn=z[11];const On=z[12];let Ki=z[13];b=z[14]||"declutter";const se=z[15];if(!X&&z.length>=20){B=z[19],H=z[20],V=z[21],et=z[22];const ke=this.drawLabelWithPointPlacement_(B,H,V,et);X=ke.label,z[3]=X;const In=z[23];w=(ke.anchorX-In)*this.pixelRatio,z[4]=w;const Me=z[24];T=(ke.anchorY-Me)*this.pixelRatio,z[5]=T,Xe=X.height,z[6]=Xe,Ki=X.width,z[13]=Ki}let ka;z.length>25&&(ka=z[25]);let Fa,Zn,ge;z.length>17?(Fa=z[16],Zn=z[17],ge=z[18]):(Fa=sr,Zn=null,ge=null),qi&&nt?Vn+=J:!qi&&!nt&&(Vn-=J);let qn=0;for(;v<S;v+=2){if(ka&&ka[qn++]<Ki/this.pixelRatio)continue;const ke=this.calculateImageOrLabelDimensions_(X.width,X.height,m[v],m[v+1],Ki,Xe,w,T,Ce,Zi,Vn,On,o,Fa,!!Zn||!!ge,$),In=[t,e,X,ke,gn,Zn,ge];if(f){let Me,nn,Be;if(se){const Tt=S-v;if(!se[Tt]){se[Tt]={args:In,declutterMode:b};continue}const ee=se[Tt];Me=ee.args,nn=ee.declutterMode,delete se[Tt],Be=gx(Me)}let me,Zt;if(Me&&(nn!=="declutter"||!f.collides(Be))&&(me=!0),(b!=="declutter"||!f.collides(ke.declutterBox))&&(Zt=!0),nn==="declutter"&&b==="declutter"){const Tt=me&&Zt;me=Tt,Zt=Tt}me&&(nn!=="none"&&f.insert(Be),this.replayImageOrLabel_.apply(this,Me)),Zt&&(b!=="none"&&f.insert(ke.declutterBox),this.replayImageOrLabel_.apply(this,In))}else this.replayImageOrLabel_.apply(this,In)}++y;break;case ft.DRAW_CHARS:const Ae=z[1],wo=z[2],za=z[3],$c=z[4];et=z[5];const _r=z[6],Is=z[7],Kn=z[8];V=z[9];const Wi=z[10];B=z[11],Array.isArray(B)&&(B=B.reduce(aA,"")),H=z[12];const Qi=[z[13],z[13]];b=z[14]||"declutter";const Jc=z[15],yr=this.textStates[H],$i=yr.font,fi=[yr.scale[0]*Is,yr.scale[1]*Is];let Nn;$i in this.widths_?Nn=this.widths_[$i]:(Nn={},this.widths_[$i]=Nn);const Ro=mm(m,Ae,wo,2),Ga=Math.abs(fi[0])*Qp($i,B,Nn);if($c||Ga<=Ro){const ke=this.textStates[H].textAlign,In=(Ro-Ga)*Yd(B,ke),Me=sA(m,Ae,wo,2,B,In,_r,Math.abs(fi[0]),Qp,$i,Nn,nt?0:this.viewRotation_,Jc);t:if(Me){const nn=[];let Be,me,Zt,Tt,ee;if(V)for(Be=0,me=Me.length;Be<me;++Be){ee=Me[Be],Zt=ee[4],Tt=this.createLabel(Zt,H,"",V),w=ee[2]+(fi[0]<0?-Wi:Wi),T=za*Tt.height+(.5-za)*2*Wi*fi[1]/fi[0]-Kn;const sn=this.calculateImageOrLabelDimensions_(Tt.width,Tt.height,ee[0],ee[1],Tt.width,Tt.height,w,T,0,0,ee[3],Qi,!1,sr,!1,$);if(f&&b==="declutter"&&f.collides(sn.declutterBox))break t;nn.push([t,e,Tt,sn,1,null,null])}if(et)for(Be=0,me=Me.length;Be<me;++Be){ee=Me[Be],Zt=ee[4],Tt=this.createLabel(Zt,H,et,""),w=ee[2],T=za*Tt.height-Kn;const sn=this.calculateImageOrLabelDimensions_(Tt.width,Tt.height,ee[0],ee[1],Tt.width,Tt.height,w,T,0,0,ee[3],Qi,!1,sr,!1,$);if(f&&b==="declutter"&&f.collides(sn.declutterBox))break t;nn.push([t,e,Tt,sn,1,null,null])}f&&b!=="none"&&f.load(nn.map(gx));for(let sn=0,th=nn.length;sn<th;++sn)this.replayImageOrLabel_.apply(this,nn[sn])}}++y;break;case ft.END_GEOMETRY:if(u!==void 0){$=z[1];const ke=u($,U,b);if(ke)return ke}++y;break;case ft.FILL:Z?lt++:this.fill_(t),++y;break;case ft.MOVE_TO_LINE_TO:for(v=z[1],S=z[2],at=m[v],M=m[v+1],t.moveTo(at,M),R=at+.5|0,O=M+.5|0,v+=2;v<S;v+=2)at=m[v],M=m[v+1],A=at+.5|0,L=M+.5|0,(v==S-2||A!==R||L!==O)&&(t.lineTo(at,M),R=A,O=L);++y;break;case ft.SET_FILL_STYLE:this.alignAndScaleFill_=z[2],lt&&(this.fill_(t),lt=0,it&&(t.stroke(),it=0)),t.fillStyle=z[1],++y;break;case ft.SET_STROKE_STYLE:it&&(t.stroke(),it=0),this.setStrokeStyle_(t,z),++y;break;case ft.STROKE:Z?it++:t.stroke(),++y;break;default:++y;break}}lt&&this.fill_(t),it&&t.stroke()}execute(t,e,i,a,o,u){this.viewRotation_=a,this.execute_(t,e,i,this.instructions,o,void 0,void 0,u)}executeHitDetection(t,e,i,a,o){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,a,o)}}const er=["Polygon","Circle","LineString","Image","Text","Default"],r1=["Image","Text"],oA=er.filter(r=>!r1.includes(r));class uA{constructor(t,e,i,a,o,u,h){this.maxExtent_=t,this.overlaps_=a,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,h)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let a=this.executorsByZIndex_[i];a===void 0&&(a={},this.executorsByZIndex_[i]=a);const o=t[i];for(const u in o){const h=o[u];a[u]=new lA(this.resolution_,this.pixelRatio_,this.overlaps_,h,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let a=0,o=t.length;a<o;++a)if(t[a]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,a,o,u){a=Math.round(a);const h=a*2+1,f=Yi(this.hitDetectionTransform_,a+.5,a+.5,1/e,-1/e,-i,-t[0],-t[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=de(h,h));const m=this.hitDetectionContext_;m.canvas.width!==h||m.canvas.height!==h?(m.canvas.width=h,m.canvas.height=h):g||m.clearRect(0,0,h,h);let y;this.renderBuffer_!==void 0&&(y=Dn(),Wl(y,t),Lc(y,e*(this.renderBuffer_+a),y));const p=cA(a);let v;function S(L,X,B){const H=m.getImageData(0,0,h,h).data;for(let V=0,et=p.length;V<et;V++)if(H[p[V]]>0){if(!u||B==="none"||v!=="Image"&&v!=="Text"||u.includes(L)){const lt=(p[V]-3)/4,it=a-lt%h,st=a-(lt/h|0),J=o(L,X,it*it+st*st);if(J)return J}m.clearRect(0,0,h,h);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(ki);let T,b,R,O,A;for(T=w.length-1;T>=0;--T){const L=w[T].toString();for(R=this.executorsByZIndex_[L],b=er.length-1;b>=0;--b)if(v=er[b],O=R[v],O!==void 0&&(A=O.executeHitDetection(m,f,i,S,y),A))return A}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],a=e[1],o=e[2],u=e[3],h=[i,a,i,u,o,u,o,a];return Ds(h,0,8,2,t,h),h}isEmpty(){return ba(this.executorsByZIndex_)}execute(t,e,i,a,o,u,h){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(h?ET:ki),u=u||er;const g=er.length;for(let m=0,y=f.length;m<y;++m){const p=f[m].toString(),v=this.executorsByZIndex_[p];for(let S=0,w=u.length;S<w;++S){const T=u[S],b=v[T];if(b!==void 0){const R=h===null?void 0:b.getZIndexContext(),O=R?R.getContext():t,A=this.maxExtent_&&T!=="Image"&&T!=="Text";if(A&&(O.save(),this.clip(O,i)),!R||T==="Text"||T==="Image"?b.execute(O,e,i,a,o,h):R.pushFunction(L=>b.execute(L,e,i,a,o,h)),A&&O.restore(),R){R.offset();const L=f[m]*g+er.indexOf(T);this.deferredZIndexContexts_[L]||(this.deferredZIndexContexts_[L]=[]),this.deferredZIndexContexts_[L].push(R)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(ki);for(let i=0,a=e.length;i<a;++i)t[e[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),t[e[i]].length=0}}const Xd={};function cA(r){if(Xd[r]!==void 0)return Xd[r];const t=r*2+1,e=r*r,i=new Array(e+1);for(let o=0;o<=r;++o)for(let u=0;u<=r;++u){const h=o*o+u*u;if(h>e)break;let f=i[h];f||(f=[],i[h]=f),f.push(((r+o)*t+(r+u))*4+3),o>0&&f.push(((r-o)*t+(r+u))*4+3),u>0&&(f.push(((r+o)*t+(r-u))*4+3),o>0&&f.push(((r-o)*t+(r-u))*4+3))}const a=[];for(let o=0,u=i.length;o<u;++o)i[o]&&a.push(...i[o]);return Xd[r]=a,a}class hA extends s1{constructor(t,e,i,a,o,u,h){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=a,this.transformRotation_=a?yo(Math.atan2(a[1],a[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=u,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yn()}drawImages_(t,e,i,a){if(!this.image_)return;const o=Ds(t,e,i,a,this.transform_,this.pixelCoordinates_),u=this.context_,h=this.tmpLocalTransform_,f=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=f*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let m=0,y=o.length;m<y;m+=2){const p=o[m]-this.imageAnchorX_,v=o[m+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=p+this.imageAnchorX_,w=v+this.imageAnchorY_;Yi(h,S,w,1,1,g,-S,-w),u.save(),u.transform.apply(u,h),u.translate(S,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=f)}drawText_(t,e,i,a){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Ds(t,e,i,a,this.transform_,this.pixelCoordinates_),u=this.context_;let h=this.textRotation_;for(this.transformRotation_===0&&(h-=this.viewRotation_),this.textRotateWithView_&&(h+=this.viewRotation_);e<i;e+=a){const f=o[e]+this.textOffsetX_,g=o[e+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(f-this.textOffsetX_,g-this.textOffsetY_),u.rotate(h),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,f,g),this.textFillState_&&u.fillText(this.text_,f,g))}}moveToLineTo_(t,e,i,a,o){const u=this.context_,h=Ds(t,e,i,a,this.transform_,this.pixelCoordinates_);u.moveTo(h[0],h[1]);let f=h.length;o&&(f-=2);for(let g=2;g<f;g+=2)u.lineTo(h[g],h[g+1]);return o&&u.closePath(),i}drawRings_(t,e,i,a){for(let o=0,u=i.length;o<u;++o)e=this.moveToLineTo_(t,e,i[o],a,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ue(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=VT(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],a=e[3]-e[1],o=Math.sqrt(i*i+a*a),u=this.context_;u.beginPath(),u.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,a=e.length;i<a;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ue(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ue(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,a=t.getFlatCoordinates();let o=0;const u=t.getEnds(),h=t.getStride();i.beginPath();for(let f=0,g=u.length;f<g;++f)o=this.moveToLineTo_(a,o,u[f],h,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ue(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ue(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let a=0;const o=t.getEndss(),u=t.getStride();e.beginPath();for(let h=0,f=o.length;h<f;++h){const g=o[h];a=this.drawRings_(i,a,g,u)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Hi(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,a=t.textAlign?t.textAlign:lo;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=a&&(i.textAlign=a,e.textAlign=a),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=a,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:si(i||$e)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),a=e.getLineCap(),o=e.getLineDash(),u=e.getLineDashOffset(),h=e.getLineJoin(),f=e.getWidth(),g=e.getMiterLimit(),m=o||Fi;this.strokeState_={lineCap:a!==void 0?a:Ma,lineDash:this.pixelRatio_===1?m:m.map(y=>y*this.pixelRatio_),lineDashOffset:(u||zi)*this.pixelRatio_,lineJoin:h!==void 0?h:Da,lineWidth:(f!==void 0?f:oo)*this.pixelRatio_,miterLimit:g!==void 0?g:ro,strokeStyle:si(i||ao)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),a=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=a[0]*i,this.imageAnchorY_=a[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const u=t.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/i,u[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const v=e.getColor();this.textFillState_={fillStyle:si(v||$e)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const v=i.getColor(),S=i.getLineCap(),w=i.getLineDash(),T=i.getLineDashOffset(),b=i.getLineJoin(),R=i.getWidth(),O=i.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:Ma,lineDash:w||Fi,lineDashOffset:T||zi,lineJoin:b!==void 0?b:Da,lineWidth:R!==void 0?R:oo,miterLimit:O!==void 0?O:ro,strokeStyle:si(v||ao)}}const a=t.getFont(),o=t.getOffsetX(),u=t.getOffsetY(),h=t.getRotateWithView(),f=t.getRotation(),g=t.getScaleArray(),m=t.getText(),y=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:a!==void 0?a:Fv,textAlign:y!==void 0?y:lo,textBaseline:p!==void 0?p:vc},this.text_=m!==void 0?Array.isArray(m)?m.reduce((v,S,w)=>v+=w%2?" ":S,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const ni=.5;function fA(r,t,e,i,a,o,u,h,f){const g=a,m=r[0]*ni,y=r[1]*ni,p=de(m,y);p.imageSmoothingEnabled=!1;const v=p.canvas,S=new hA(p,ni,a,null,u,h,null),w=e.length,T=Math.floor((256*256*256-1)/w),b={};for(let O=1;O<=w;++O){const A=e[O-1],L=A.getStyleFunction()||i;if(!L)continue;let X=L(A,o);if(!X)continue;Array.isArray(X)||(X=[X]);const H=(O*T).toString(16).padStart(7,"#00000");for(let V=0,et=X.length;V<et;++V){const lt=X[V],it=lt.getGeometryFunction()(A);if(!it||!Ue(g,it.getExtent()))continue;const st=lt.clone(),J=st.getFill();J&&J.setColor(H);const nt=st.getStroke();nt&&(nt.setColor(H),nt.setLineDash(null)),st.setText(void 0);const I=lt.getImage();if(I){const M=I.getImageSize();if(!M)continue;const U=de(M[0],M[1],void 0,{alpha:!1}),z=U.canvas;U.fillStyle=H,U.fillRect(0,0,z.width,z.height),st.setImage(new qc({img:z,anchor:I.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:I.getOrigin(),opacity:1,size:I.getSize(),scale:I.getScale(),rotation:I.getRotation(),rotateWithView:I.getRotateWithView()}))}const Z=st.getZIndex()||0;let $=b[Z];$||($={},b[Z]=$,$.Polygon=[],$.Circle=[],$.LineString=[],$.Point=[]);const at=it.getType();if(at==="GeometryCollection"){const M=it.getGeometriesArrayRecursive();for(let U=0,z=M.length;U<z;++U){const tt=M[U];$[tt.getType().replace("Multi","")].push(tt,st)}}else $[at.replace("Multi","")].push(it,st)}}const R=Object.keys(b).map(Number).sort(ki);for(let O=0,A=R.length;O<A;++O){const L=b[R[O]];for(const X in L){const B=L[X];for(let H=0,V=B.length;H<V;H+=2){S.setStyle(B[H+1]);for(let et=0,lt=t.length;et<lt;++et)S.setTransform(t[et]),S.drawGeometry(B[H])}}}return p.getImageData(0,0,v.width,v.height)}function dA(r,t,e){const i=[];if(e){const a=Math.floor(Math.round(r[0])*ni),o=Math.floor(Math.round(r[1])*ni),u=(Qt(a,0,e.width-1)+Qt(o,0,e.height-1)*e.width)*4,h=e.data[u],f=e.data[u+1],m=e.data[u+2]+256*(f+256*h),y=Math.floor((256*256*256-1)/t.length);m&&m%y===0&&i.push(t[m/y-1])}return i}const gA=.5,a1={Point:SA,LineString:xA,Polygon:bA,MultiPoint:CA,MultiLineString:vA,MultiPolygon:EA,GeometryCollection:pA,Circle:_A};function mA(r,t){return parseInt(Ct(r),10)-parseInt(Ct(t),10)}function _x(r,t){const e=l1(r,t);return e*e}function l1(r,t){return gA*r/t}function _A(r,t,e,i,a){const o=e.getFill(),u=e.getStroke();if(o||u){const f=r.getBuilder(e.getZIndex(),"Circle");f.setFillStrokeStyle(o,u),f.drawCircle(t,i,a)}const h=e.getText();if(h&&h.getText()){const f=r.getBuilder(e.getZIndex(),"Text");f.setTextStyle(h),f.drawText(t,i)}}function yx(r,t,e,i,a,o,u,h){const f=[],g=e.getImage();if(g){let p=!0;const v=g.getImageState();v==Et.LOADED||v==Et.ERROR?p=!1:v==Et.IDLE&&g.load(),p&&f.push(g.ready())}const m=e.getFill();m&&m.loading()&&f.push(m.ready());const y=f.length>0;return y&&Promise.all(f).then(()=>a(null)),yA(r,t,e,i,o,u,h),y}function yA(r,t,e,i,a,o,u){const h=e.getGeometryFunction()(t);if(!h)return;const f=h.simplifyTransformed(i,a);if(e.getRenderer())o1(r,f,e,t,u);else{const m=a1[f.getType()];m(r,f,e,t,u,o)}}function o1(r,t,e,i,a){if(t.getType()=="GeometryCollection"){const u=t.getGeometries();for(let h=0,f=u.length;h<f;++h)o1(r,u[h],e,i,a);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer(),a)}function pA(r,t,e,i,a,o){const u=t.getGeometriesArray();let h,f;for(h=0,f=u.length;h<f;++h){const g=a1[u[h].getType()];g(r,u[h],e,i,a,o)}}function xA(r,t,e,i,a){const o=e.getStroke();if(o){const h=r.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawLineString(t,i,a)}const u=e.getText();if(u&&u.getText()){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(u),h.drawText(t,i,a)}}function vA(r,t,e,i,a){const o=e.getStroke();if(o){const h=r.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawMultiLineString(t,i,a)}const u=e.getText();if(u&&u.getText()){const h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(u),h.drawText(t,i,a)}}function EA(r,t,e,i,a){const o=e.getFill(),u=e.getStroke();if(u||o){const f=r.getBuilder(e.getZIndex(),"Polygon");f.setFillStrokeStyle(o,u),f.drawMultiPolygon(t,i,a)}const h=e.getText();if(h&&h.getText()){const f=r.getBuilder(e.getZIndex(),"Text");f.setTextStyle(h),f.drawText(t,i,a)}}function SA(r,t,e,i,a,o){const u=e.getImage(),h=e.getText(),f=h&&h.getText(),g=o&&u&&f?{}:void 0;if(u){if(u.getImageState()!=Et.LOADED)return;const m=r.getBuilder(e.getZIndex(),"Image");m.setImageStyle(u,g),m.drawPoint(t,i,a)}if(f){const m=r.getBuilder(e.getZIndex(),"Text");m.setTextStyle(h,g),m.drawText(t,i,a)}}function CA(r,t,e,i,a,o){const u=e.getImage(),h=u&&u.getOpacity()!==0,f=e.getText(),g=f&&f.getText(),m=o&&h&&g?{}:void 0;if(h){if(u.getImageState()!=Et.LOADED)return;const y=r.getBuilder(e.getZIndex(),"Image");y.setImageStyle(u,m),y.drawMultiPoint(t,i,a)}if(g){const y=r.getBuilder(e.getZIndex(),"Text");y.setTextStyle(f,m),y.drawText(t,i,a)}}function bA(r,t,e,i,a){const o=e.getFill(),u=e.getStroke();if(o||u){const f=r.getBuilder(e.getZIndex(),"Polygon");f.setFillStrokeStyle(o,u),f.drawPolygon(t,i,a)}const h=e.getText();if(h&&h.getText()){const f=r.getBuilder(e.getZIndex(),"Text");f.setTextStyle(h),f.drawText(t,i,a)}}class TA extends Jv{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Dn(),this.wrappedRenderedExtent_=Dn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const a=e.extent,o=e.viewState,u=o.center,h=o.resolution,f=o.projection,g=o.rotation,m=f.getExtent(),y=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),v=e.pixelRatio,S=e.viewHints,w=!(S[Ne.ANIMATING]||S[Ne.INTERACTING]),T=this.context,b=Math.round(Yt(a)/h*v),R=Math.round(Ye(a)/h*v),O=y.getWrapX()&&f.canWrapX(),A=O?Yt(m):null,L=O?Math.ceil((a[2]-m[2])/A)+1:1;let X=O?Math.floor((a[0]-m[0])/A):0;do{let B=this.getRenderTransform(u,h,0,v,b,R,X*A);e.declutter&&(B=B.slice(0)),t.execute(T,[T.canvas.width,T.canvas.height],B,g,w,i===void 0?er:i?r1:oA,i?p&&e.declutter[p]:void 0)}while(++X<L)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=de(this.context.canvas.width,this.context.canvas.height,ux))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Bc(this.context),ux.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const a=t.viewState;this.prepareContainer(t,e);const o=this.context,u=this.replayGroup_;let h=u&&!u.isEmpty();if(!h&&!(this.getLayer().hasListener(Rn.PRERENDER)||this.getLayer().hasListener(Rn.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,t),a.projection,this.clipped_=!1,h&&i.extent&&this.clipping){const f=Ni(i.extent);h=Ue(f,t.extent),this.clipped_=h&&!Yl(f,t.extent),this.clipped_&&this.clipUnrotated(o,t,f)}return h&&this.renderWorlds(u,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&o.restore(),this.postRender(o,t),this.renderedRotation_!==a.rotation&&(this.renderedRotation_=a.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),a=this.renderedCenter_,o=this.renderedResolution_,u=this.renderedRotation_,h=this.renderedProjection_,f=this.wrappedRenderedExtent_,g=this.getLayer(),m=[],y=i[0]*ni,p=i[1]*ni;m.push(this.getRenderTransform(a,o,u,ni,y,p,0).slice());const v=g.getSource(),S=h.getExtent();if(v.getWrapX()&&h.canWrapX()&&!Yl(S,f)){let w=f[0];const T=Yt(S);let b=0,R;for(;w<S[0];)--b,R=T*b,m.push(this.getRenderTransform(a,o,u,ni,y,p,R).slice()),w+=T;for(b=0,w=f[2];w>S[2];)++b,R=T*b,m.push(this.getRenderTransform(a,o,u,ni,y,p,R).slice()),w-=T}this.hitDetectionImageData_=fA(i,m,this.renderedFeatures_,g.getStyleFunction(),f,o,u,_x(o,this.renderedPixelRatio_))}e(dA(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,a,o){if(!this.replayGroup_)return;const u=e.viewState.resolution,h=e.viewState.rotation,f=this.getLayer(),g={},m=function(p,v,S){const w=Ct(p),T=g[w];if(T){if(T!==!0&&S<T.distanceSq){if(S===0)return g[w]=!0,o.splice(o.lastIndexOf(T),1),a(p,f,v);T.geometry=v,T.distanceSq=S}}else{if(S===0)return g[w]=!0,a(p,f,v);o.push(g[w]={feature:p,layer:f,geometry:v,distanceSq:S,callback:a})}},y=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,u,h,i,m,y?e.declutter?.[y]?.all().map(p=>p.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const a=t.viewHints[Ne.ANIMATING],o=t.viewHints[Ne.INTERACTING],u=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!u&&a||!h&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=t.extent,g=t.viewState,m=g.projection,y=g.resolution,p=t.pixelRatio,v=e.getRevision(),S=e.getRenderBuffer();let w=e.getRenderOrder();w===void 0&&(w=mA);const T=g.center.slice(),b=Lc(f,S*y),R=b.slice(),O=[b.slice()],A=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Yl(A,t.extent)){const J=Yt(A),nt=Math.max(Yt(b)/2,J);b[0]=A[0]-nt,b[2]=A[2]+nt,nv(T,m);const I=Jx(O[0],m);I[0]<A[0]&&I[2]<A[2]?O.push([I[0]+J,I[1],I[2]+J,I[3]]):I[0]>A[0]&&I[2]>A[2]&&O.push([I[0]-J,I[1],I[2]-J,I[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==v&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!t.declutter&&Yl(this.wrappedRenderedExtent_,b))return Hi(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=T,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const L=new iA(l1(y,p),b,y,p);let X;for(let J=0,nt=O.length;J<nt;++J)i.loadFeatures(O[J],y,m);const B=_x(y,p);let H=!0;const V=(J,nt)=>{let I;const Z=J.getStyleFunction()||e.getStyleFunction();if(Z&&(I=Z(J,y)),I){const $=this.renderFeature(J,B,I,L,X,this.getLayer().getDeclutter(),nt);H=H&&!$}},et=jg(b),lt=i.getFeaturesInExtent(et);w&&lt.sort(w);for(let J=0,nt=lt.length;J<nt;++J)V(lt[J],J);this.renderedFeatures_=lt,this.ready=H;const it=L.finish(),st=new uA(b,y,p,i.getOverlaps(),it,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=y,this.renderedRevision_=v,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=b,this.renderedCenter_=T,this.renderedProjection_=m,this.renderedPixelRatio_=p,this.replayGroup_=st,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,a,o,u,h){if(!i)return!1;let f=!1;if(Array.isArray(i))for(let g=0,m=i.length;g<m;++g)f=yx(a,t,i[g],e,this.boundHandleStyleImageChange_,o,u,h)||f;else f=yx(a,t,i,e,this.boundHandleStyleImageChange_,o,u,h);return f}}class _m extends Vv{constructor(t){super(t)}createRenderer(){return new TA(this)}}let wA=!1;function RA(r,t,e,i,a,o,u){const h=new XMLHttpRequest;h.open("GET",typeof r=="function"?r(e,i,a):r,!0),t.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=wA,h.onload=function(f){if(!h.status||h.status>=200&&h.status<300){const g=t.getType();try{let m;g=="text"||g=="json"?m=h.responseText:g=="xml"?m=h.responseXML||h.responseText:g=="arraybuffer"&&(m=h.response),m?o(t.readFeatures(m,{extent:e,featureProjection:a}),t.readProjection(m)):u()}catch{u()}}else u()},h.onerror=u,h.send()}function px(r,t){return function(e,i,a,o,u){RA(r,t,e,i,a,(h,f)=>{this.addFeatures(h),o!==void 0&&o(h)},()=>{this.changed(),u!==void 0&&u()})}}function AA(r,t){return[[-1/0,-1/0,1/0,1/0]]}class ii extends ui{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new ii(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Kt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ot(t,pt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?MA(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function MA(r){if(typeof r=="function")return r;let t;return Array.isArray(r)?t=r:(zt(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[r]),function(){return t}}function u1(r,t,e,i){const a=[];let o=Dn();for(let u=0,h=e.length;u<h;++u){const f=e[u];o=Tg(r,t,f[0],i),a.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=f[f.length-1]}return a}function Tc(r,t,e,i,a,o,u){let h,f;const g=(e-t)/i;if(g===1)h=t;else if(g===2)h=t,f=a;else if(g!==0){let m=r[t],y=r[t+1],p=0;const v=[0];for(let T=t+i;T<e;T+=i){const b=r[T],R=r[T+1];p+=Math.sqrt((b-m)*(b-m)+(R-y)*(R-y)),v.push(p),m=b,y=R}const S=a*p,w=vT(v,S);w<0?(f=(S-v[-w-2])/(v[-w-1]-v[-w-2]),h=t+(-w-2)*i):h=t+w*i}u=u>1?u:2,o=o||new Array(u);for(let m=0;m<u;++m)o[m]=h===void 0?NaN:f===void 0?r[h+m]:fn(r[h+m],r[h+i+m],f);return o}function mg(r,t,e,i,a,o){if(e==t)return null;let u;if(a<r[t+i-1])return o?(u=r.slice(t,t+i),u[i-1]=a,u):null;if(r[e-1]<a)return o?(u=r.slice(e-i,e),u[i-1]=a,u):null;if(a==r[t+i-1])return r.slice(t,t+i);let h=t/i,f=e/i;for(;h<f;){const p=h+f>>1;a<r[(p+1)*i-1]?f=p:h=p+1}const g=r[h*i-1];if(a==g)return r.slice((h-1)*i,(h-1)*i+i);const m=r[(h+1)*i-1],y=(a-g)/(m-g);u=[];for(let p=0;p<i-1;++p)u.push(fn(r[(h-1)*i+p],r[h*i+p],y));return u.push(a),u}function DA(r,t,e,i,a,o,u){if(u)return mg(r,t,e[e.length-1],i,a,o);let h;if(a<r[i-1])return o?(h=r.slice(0,i),h[i-1]=a,h):null;if(r[r.length-1]<a)return o?(h=r.slice(r.length-i),h[i-1]=a,h):null;for(let f=0,g=e.length;f<g;++f){const m=e[f];if(t!=m){if(a<r[t+i-1])return null;if(a<=r[m-1])return mg(r,t,m,i,a,!1);t=m}}return null}class To extends Os{constructor(t,e,i){super(),i!==void 0&&e===void 0?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new To(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,a){const o=this.flatCoordinates,u=t-o[0],h=e-o[1],f=u*u+h*h;if(f<a){if(f===0)for(let g=0;g<this.stride;++g)i[g]=o[g];else{const g=this.getRadius()/Math.sqrt(f);i[0]=o[0]+g*u,i[1]=o[1]+g*h;for(let m=2;m<this.stride;++m)i[m]=o[m]}return i.length=this.stride,f}return a}containsXY(t,e){const i=this.flatCoordinates,a=t-i[0],o=e-i[1];return a*a+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return Ui(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(Ue(t,e)){const i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:wg(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],a=t.slice();a[e]=a[0]+i;for(let o=1;o<e;++o)a[e+o]=t[o];this.setFlatCoordinates(this.layout,a),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const a=this.flatCoordinates;let o=yv(a,0,t,this.stride);a[o++]=a[0]+e;for(let u=1,h=this.stride;u<h;++u)a[o++]=a[u];a.length=o,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),a=this.getStride();this.setCenter(zg(i,0,i.length,a,t,e,i)),this.changed()}}To.prototype.transform;class wc extends gv{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Kt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(Ot(t[e],pt.CHANGE,this.changed,this))}clone(){const t=new wc(Bd(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,a){if(a<fr(this.getExtent(),t,e))return a;const o=this.geometries_;for(let u=0,h=o.length;u<h;++u)a=o[u].closestPointXY(t,e,i,a);return a}containsXY(t,e){const i=this.geometries_;for(let a=0,o=i.length;a<o;++a)if(i[a].containsXY(t,e))return!0;return!1}computeExtent(t){po(t);const e=this.geometries_;for(let i=0,a=e.length;i<a;++i)Wx(t,e[i].getExtent());return t}getGeometries(){return Bd(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,a=e.length;i<a;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let a=!1;for(let o=0,u=i.length;o<u;++o){const h=i[o],f=h.getSimplifiedGeometry(t);e.push(f),f!==h&&(a=!0)}return a?new wc(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,a=e.length;i<a;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let a=0,o=i.length;a<o;++a)i[a].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Ls(this.getExtent()));const a=this.geometries_;for(let o=0,u=a.length;o<u;++o)a[o].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Bd(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,a=e.length;i<a;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let a=0,o=i.length;a<o;++a)i[a].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Bd(r){return r.map(t=>t.clone())}class Gi extends Os{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){ri(this.flatCoordinates,t),this.changed()}clone(){const t=new Gi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,a){return a<fr(this.getExtent(),t,e)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ug(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,a))}forEachSegment(t){return vv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,mg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return mm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Uc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Gi(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Yc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pc(this.flatCoordinates,0,t,this.stride),this.changed()}}class ho extends Os{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const a=t,o=[],u=[];for(let f=0,g=a.length;f<g;++f){const m=a[f];ri(o,m.getFlatCoordinates()),u.push(o.length)}const h=a.length===0?this.getLayout():a[0].getLayout();this.setFlatCoordinates(h,o),this.ends_=u}}appendLineString(t){ri(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ho(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,a){return a<fr(this.getExtent(),t,e)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,a))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,DA(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return io(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Gi(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,a=[];let o=0;for(let u=0,h=e.length;u<h;++u){const f=e[u],g=new Gi(t.slice(o,f),i);a.push(g),o=f}return a}getLength(){const t=this.ends_;let e=0,i=0;for(let a=0,o=t.length;a<o;++a)i+=mm(this.flatCoordinates,e,t[a],this.stride),e=t[a];return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const a=this.ends_,o=this.stride;for(let u=0,h=a.length;u<h;++u){const f=a[u],g=Tc(e,i,f,o,.5);ri(t,g),i=f}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=pv(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new ho(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return ew(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xg(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class Qc extends Os{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){ri(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new Qc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,a){if(a<fr(this.getExtent(),t,e))return a;const o=this.flatCoordinates,u=this.stride;for(let h=0,f=o.length;h<f;h+=u){const g=ji(t,e,o[h],o[h+1]);if(g<a){a=g;for(let m=0;m<u;++m)i[m]=o[h+m];i.length=u}}return a}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new ai(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,a=[];for(let o=0,u=t.length;o<u;o+=i){const h=new ai(t.slice(o,o+i),e);a.push(h)}return a}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let a=0,o=e.length;a<o;a+=i){const u=e[a],h=e[a+1];if(bg(t,u,h))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pc(this.flatCoordinates,0,t,this.stride),this.changed()}}class fo extends Os{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const a=t,o=[],u=[];for(let h=0,f=a.length;h<f;++h){const g=a[h],m=o.length,y=g.getEnds();for(let p=0,v=y.length;p<v;++p)y[p]+=m;ri(o,g.getFlatCoordinates()),u.push(y)}e=a.length===0?this.getLayout():a[0].getLayout(),t=o,i=u}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ri(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let a=0,o=e.length;a<o;++a)e[a]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let a=0;a<t;++a)e[a]=this.endss_[a].slice();const i=new fo(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,a){return a<fr(this.getExtent(),t,e)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qT(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),KT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,a))}containsXY(t,e){return tw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ZT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Fp(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,rg(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=u1(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=xv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Qc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;sw(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Fp(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=$T(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new fo(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const o=this.endss_[t-1];e=o[o.length-1]}const i=this.endss_[t].slice(),a=i[i.length-1];if(e!==0)for(let o=0,u=i.length;o<u;++o)i[o]-=e;return new Xi(this.flatCoordinates.slice(e,a),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,a=[];let o=0;for(let u=0,h=i.length;u<h;++u){const f=i[u].slice(),g=f[f.length-1];if(o!==0)for(let y=0,p=f.length;y<p;++y)f[y]-=o;const m=new Xi(e.slice(o,g),t,f);a.push(m),o=g}return a}getType(){return"MultiPolygon"}intersectsExtent(t){return nw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=WT(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const a=i[i.length-1];this.flatCoordinates.length=a.length===0?0:a[a.length-1]}this.changed()}}const xx=Yn();class Gn{constructor(t,e,i,a,o,u){this.styleFunction,this.extent_,this.id_=u,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=a,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Kl(this.flatCoordinates_):Tg(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Ls(this.getExtent());this.flatInteriorPoints_=Vg(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=rw(this.flatCoordinates_,this.ends_),e=u1(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=xv(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Tc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let a=0,o=i.length;a<o;++a){const u=i[a],h=Tc(t,e,u,2,.5);ri(this.flatMidpoints_,h),e=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=en(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const a=Ye(i)/Ye(e);Yi(xx,i[0],i[3],a,-a,0,0,0),Ds(this.flatCoordinates_,0,this.flatCoordinates_.length,2,xx,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Gn(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=ov((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let a;switch(this.type_){case"LineString":i.length=Uc(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),a=[i.length];break;case"MultiLineString":a=[],i.length=pv(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,a);break;case"Polygon":a=[],i.length=Bg(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,a);break}return a&&(this.simplifiedGeometry_=new Gn(this.type_,i,a,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Gn.prototype.getFlatCoordinates=Gn.prototype.getOrientedFlatCoordinates;class _g{constructor(t){this.rbush_=new Lv(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Ct(e)]=i}load(t,e){const i=new Array(e.length);for(let a=0,o=e.length;a<o;a++){const u=t[a],h=e[a],f={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:h};i[a]=f,this.items_[Ct(h)]=f}this.rbush_.load(i)}remove(t){const e=Ct(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[Ct(e)],a=[i.minX,i.minY,i.maxX,i.maxY];to(a,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(a){return a.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let a=0,o=t.length;a<o;a++)if(i=e(t[a]),i)return i;return i}isEmpty(){return ba(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Ui(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const Ke={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Ts extends Hn{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class ym extends i1{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=no,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(zt(this.format_,"`format` must be set when `url` is set"),this.loader_=px(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:AA;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new _g:null,this.loadedExtentsRtree_=new _g,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,a;Array.isArray(t.features)?a=t.features:t.features&&(i=t.features,a=i.getArray()),!e&&i===void 0&&(i=new wn(a)),a!==void 0&&this.addFeaturesInternal(a),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Ct(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const a=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ts(Ke.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof Gn||(this.featureChangeKeys_[t]=[Ot(e,pt.CHANGE,this.handleFeatureChange_,this),Ot(e,wa.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(e.getId()!==void 0){const a=String(e.getId());if(!(a in this.idIndex_))this.idIndex_[a]=e;else if(e instanceof Gn){const o=this.idIndex_[a];o instanceof Gn?Array.isArray(o)?o.push(e):this.idIndex_[a]=[o,e]:i=!1}else i=!1}return i&&(zt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],a=[];for(let o=0,u=t.length;o<u;o++){const h=t[o],f=Ct(h);this.addToIndex_(f,h)&&i.push(h)}for(let o=0,u=i.length;o<u;o++){const h=i[o],f=Ct(h);this.setupChangeEvents_(f,h);const g=h.getGeometry();if(g){const m=g.getExtent();e.push(m),a.push(h)}else this.nullGeometryFeatures_[f]=h}if(this.featuresRtree_&&this.featuresRtree_.load(e,a),this.hasListener(Ke.ADDFEATURE))for(let o=0,u=i.length;o<u;o++)this.dispatchEvent(new Ts(Ke.ADDFEATURE,i[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ke.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(Ke.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Ie.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(Ie.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Kt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ts(Ke.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(a){const o=a.getGeometry();if(o instanceof Gn||o.intersectsCoordinate(t))return e(a)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const a=i.getGeometry();if(a instanceof Gn||a.intersectsExtent(t)){const o=e(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),ba(this.nullGeometryFeatures_)||ri(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const a=tv(t,e);return[].concat(...a.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],a=t[1];let o=null;const u=[NaN,NaN];let h=1/0;const f=[-1/0,-1/0,1/0,1/0];return e=e||Ra,this.featuresRtree_.forEachInExtent(f,function(g){if(e(g)){const m=g.getGeometry(),y=h;if(h=m instanceof Gn?0:m.closestPointXY(i,a,u,h),h<y){o=g;const p=Math.sqrt(h);f[0]=i-p,f[1]=a-p,f[2]=i+p,f[3]=a+p}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=Ct(e),a=e.getGeometry();if(!a)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const u=a.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(u,e)):this.featuresRtree_&&this.featuresRtree_.update(u,e)}const o=e.getId();if(o!==void 0){const u=o.toString();this.idIndex_[u]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[u]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Ts(Ke.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:Ct(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ba(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const a=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let u=0,h=o.length;u<h;++u){const f=o[u];a.forEachInExtent(f,function(m){return Yl(m.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ts(Ke.FEATURESLOADSTART)),this.loader_.call(this,f,e,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ts(Ke.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ts(Ke.FEATURESLOADERROR))}),a.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,i=e.forEachInExtent(t,function(a){if(to(a.extent,t))return a});i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,a=t.length;i<a;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Ct(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.featureChangeKeys_[e]?.forEach(Kt),delete this.featureChangeKeys_[e];const a=t.getId();if(a!==void 0){const o=a.toString(),u=this.idIndex_[o];u===t?delete this.idIndex_[o]:Array.isArray(u)&&(u.splice(u.indexOf(t),1),u.length===1&&(this.idIndex_[o]=u[0]))}return delete this.uidIndex_[e],this.hasListener(Ke.REMOVEFEATURE)&&this.dispatchEvent(new Ts(Ke.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){zt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(px(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const Ju={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class tc extends Hn{constructor(t,e){super(t),this.feature=e}}function LA(r,t){const e=[];for(let i=0;i<t.length;++i){const o=t[i].getGeometry();c1(r,o,e)}return e}function ec(r,t){return ji(r[0],r[1],t[0],t[1])}function ma(r,t){const e=r.length;return t<0?r[t+e]:t>=e?r[t-e]:r[t]}function nc(r,t,e){let i,a;t<e?(i=t,a=e):(i=e,a=t);const o=Math.ceil(i),u=Math.floor(a);if(o>u){const f=_a(r,i),g=_a(r,a);return ec(f,g)}let h=0;if(i<o){const f=_a(r,i),g=ma(r,o);h+=ec(f,g)}if(u<a){const f=ma(r,u),g=_a(r,a);h+=ec(f,g)}for(let f=o;f<u-1;++f){const g=ma(r,f),m=ma(r,f+1);h+=ec(g,m)}return h}function c1(r,t,e){if(t instanceof Gi){ic(r,t.getCoordinates(),!1,e);return}if(t instanceof ho){const i=t.getCoordinates();for(let a=0,o=i.length;a<o;++a)ic(r,i[a],!1,e);return}if(t instanceof Xi){const i=t.getCoordinates();for(let a=0,o=i.length;a<o;++a)ic(r,i[a],!0,e);return}if(t instanceof fo){const i=t.getCoordinates();for(let a=0,o=i.length;a<o;++a){const u=i[a];for(let h=0,f=u.length;h<f;++h)ic(r,u[h],!0,e)}return}if(t instanceof wc){const i=t.getGeometries();for(let a=0;a<i.length;++a)c1(r,i[a],e);return}}const Hd={index:-1,endIndex:NaN};function OA(r,t,e,i){const a=r[0],o=r[1];let u=1/0,h=-1,f=NaN;for(let y=0;y<t.targets.length;++y){const p=t.targets[y],v=p.coordinates;let S=1/0,w;for(let T=0;T<v.length-1;++T){const b=v[T],R=v[T+1],O=h1(a,o,b,R);O.squaredDistance<S&&(S=O.squaredDistance,w=T+O.along)}S<u&&(u=S,p.ring&&t.targetIndex===y&&(p.endIndex>p.startIndex?w<p.startIndex&&(w+=v.length):p.endIndex<p.startIndex&&w>p.startIndex&&(w-=v.length)),f=w,h=y)}const g=t.targets[h];let m=g.ring;if(t.targetIndex===h&&m){const y=_a(g.coordinates,f),p=e.getPixelFromCoordinate(y);cc(p,t.startPx)>i&&(m=!1)}if(m){const y=g.coordinates,p=y.length,v=g.startIndex,S=f;if(v<S){const w=nc(y,v,S);nc(y,v,S-p)<w&&(f-=p)}else{const w=nc(y,v,S);nc(y,v,S+p)<w&&(f+=p)}}return Hd.index=h,Hd.endIndex=f,Hd}function ic(r,t,e,i){const a=r[0],o=r[1];for(let u=0,h=t.length-1;u<h;++u){const f=t[u],g=t[u+1],m=h1(a,o,f,g);if(m.squaredDistance===0){const y=u+m.along;i.push({coordinates:t,ring:e,startIndex:y,endIndex:y});return}}}const Vd={along:0,squaredDistance:0};function h1(r,t,e,i){const a=e[0],o=e[1],u=i[0],h=i[1],f=u-a,g=h-o;let m=0,y=a,p=o;return(f!==0||g!==0)&&(m=Qt(((r-a)*f+(t-o)*g)/(f*f+g*g),0,1),y+=f*m,p+=g*m),Vd.along=m,Vd.squaredDistance=yo(ji(r,t,y,p),10),Vd}function _a(r,t){const e=r.length;let i=Math.floor(t);const a=t-i;i>=e?i-=e:i<0&&(i+=e);let o=i+1;o>=e&&(o-=e);const u=r[i],h=u[0],f=u[1],g=r[o],m=g[0]-h,y=g[1]-f;return[h+m*a,f+y*a]}class vx extends gr{constructor(t){const e=t;e.stopDown||(e.stopDown=Na),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=IA(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Ra,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const a=this.mode_;if(a==="Circle")i=(o,u,h)=>{const f=u||new To([NaN,NaN]),g=Jt(o[0]),m=Ca(g,Jt(o[o.length-1]));return f.setCenterAndRadius(g,Math.sqrt(m),this.geometryLayout_),f};else{let o;a==="Point"?o=ai:a==="LineString"?o=Gi:a==="Polygon"&&(o=Xi),i=(u,h,f)=>(h?a==="Polygon"?u[0].length?h.setCoordinates([u[0].concat([u[0][0]])],this.geometryLayout_):h.setCoordinates([],this.geometryLayout_):h.setCoordinates(u,this.geometryLayout_):h=new o(u,this.geometryLayout_),h)}}this.geometryFunction_=i,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new _m({source:new ym({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:NA(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:em,this.freehandCondition_,t.freehand?this.freehandCondition_=xc:this.freehandCondition_=t.freehandCondition?t.freehandCondition:wv,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(ug.ACTIVE,this.updateState_)}setTrace(t){let e;t?t===!0?e=xc:e=t:e=Aw,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===pt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Dt.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Dt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Dt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Dt.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Dt.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Dt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Dt.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Di(Dt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active){this.deactivateTrace_();return}const e=this.getMap(),i=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),a=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),o=We([i,a]),u=this.traceSource_.getFeaturesInExtent(o);if(u.length===0)return;const h=LA(t.coordinate,u);h.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:h,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex,a=t.startIndex<=e;i===a?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const a=Math.ceil(t);let o=Math.floor(e);o===e&&(o-=1),i=o-a+1}else{const a=Math.floor(t);let o=Math.ceil(e);o===e&&(o+=1),i=a-o+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const a=[];if(e<i){const o=Math.ceil(e);let u=Math.floor(i);u===i&&(u-=1);for(let h=o;h<=u;++h)a.push(ma(t.coordinates,h))}else{const o=Math.floor(e);let u=Math.ceil(i);u===i&&(u+=1);for(let h=o;h>=u;--h)a.push(ma(t.coordinates,h))}a.length&&this.appendCoordinates(a)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&cc(e.startPx,t.pixel)<this.snapTolerance_)return;const i=OA(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(e.targetIndex!==-1){const f=e.targets[e.targetIndex];this.removeTracedCoordinates_(f.startIndex,f.endIndex)}const h=e.targets[i.index];this.addTracedCoordinates_(h,h.startIndex,i.endIndex)}else{const h=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(h,i.endIndex)}e.targetIndex=i.index;const a=e.targets[e.targetIndex];a.endIndex=i.endIndex;const o=_a(a.coordinates,a.endIndex),u=this.getMap().getPixelFromCoordinate(o);t.coordinate=o,t.pixel=[Math.round(u[0]),Math.round(u[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const a=!this.finishCoordinate_;a&&this.startDrawing_(t.coordinate),!a&&this.freehand_?this.finishDrawing():!this.freehand_&&(!a||this.mode_==="Point")&&(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,a=e[0]-i[0],o=e[1]-i[1],u=a*a+o*o;if(this.shouldHandle_=this.freehand_?u>this.squaredClickTolerance_:u<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(t.coordinate.slice());return}this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let a=!1,o=[this.finishCoordinate_];const u=this.mode_;if(u==="Point")i=!0;else if(u==="Circle")i=this.sketchCoords_.length===2;else if(u==="LineString")a=!e&&this.sketchCoords_.length>this.minPoints_;else if(u==="Polygon"){const h=this.sketchCoords_;a=h[0].length>this.minPoints_,o=[h[0][0],h[0][h[0].length-2]],e?o=[h[0][0]]:o=[h[0][0],h[0][h[0].length-2]]}if(a){const h=this.getMap();for(let f=0,g=o.length;f<g;f++){const m=o[f],y=h.getPixelFromCoordinate(m),p=t[0]-y[0],v=t[1]-y[1],S=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+v*v)<=S,i){this.finishCoordinate_=m;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new ii(new ai(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new ii);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new Gi(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=yc(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ii(new Gi(this.sketchLineCoords_)));const a=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new ii,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(a),this.updateSketchFeatures_(),this.dispatchEvent(new tc(Ju.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),a=e.getView().getProjection(),o=yc(this.geometryLayout_);let u,h;for(;t.length<o;)t.push(0);this.mode_==="Point"?h=this.sketchCoords_:this.mode_==="Polygon"?(u=this.sketchCoords_[0],h=u[u.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(u=this.sketchCoords_,h=u[u.length-1]),h[0]=t[0],h[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let a,o;const u=this.mode_;return u==="LineString"||u==="Circle"?(this.finishCoordinate_=t.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),this.geometryFunction_(o,e,i)):u==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),a&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),a?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),a=this.mode_;for(let o=0;o<t;++o){let u;if(a==="LineString"||a==="Circle"){if(u=this.sketchCoords_,u.splice(-2,1),u.length>=2){this.finishCoordinate_=u[u.length-2].slice();const h=this.finishCoordinate_.slice();u[u.length-1]=h,this.createOrUpdateSketchPoint_(h)}this.geometryFunction_(u,e,i),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(a==="Polygon"){u=this.sketchCoords_[0],u.splice(-2,1);const h=this.sketchLine_.getGeometry();if(u.length>=2){const f=u[u.length-2].slice();u[u.length-1]=f,this.createOrUpdateSketchPoint_(f)}h.setCoordinates(u),this.geometryFunction_(this.sketchCoords_,e,i)}if(u.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const i=t.getGeometry(),a=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,i,a)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,i,a),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new Qc([e])):this.type_==="MultiLineString"?t.setGeometry(new ho([e])):this.type_==="MultiPolygon"&&t.setGeometry(new fo([e])),this.dispatchEvent(new tc(Ju.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new tc(Ju.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);let a;if(e==="LineString"||e==="Circle")a=this.sketchCoords_;else if(e==="Polygon")a=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&a.shift(),a.pop();for(let u=0;u<t.length;u++)this.addToDrawing_(t[u]);const o=t[t.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(t){const i=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();const a=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=a.slice(),this.sketchCoords_.push(a.slice()),this.sketchPoint_=new ii(new ai(a)),this.updateSketchFeatures_(),this.dispatchEvent(new tc(Ju.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function NA(){const r=Uv();return function(t,e){return r[t.getGeometry().getType()]}}function IA(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const Ex=0,$l=1,Sx=[0,0,0,0],Ea=[],Zd={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class qd extends Hn{constructor(t,e,i){super(t),this.features=e,this.mapBrowserEvent=i}}class jA extends gr{constructor(t){super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:Av,this.defaultDeleteCondition_=function(i){return Tw(i)&&Mw(i)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:xc,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new _g,this.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new _m({source:new ym({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:FA(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let e;if(t.features?e=t.features:t.source&&(this.source_=t.source,e=new wn(this.source_.getFeatures()),this.source_.addEventListener(Ke.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Ke.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Ie.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Ie.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=t.snapToPointer===void 0?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const a=this.SEGMENT_WRITERS_[e.getType()];a&&a(t,e)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(i.getCoordinateFromPixel(this.lastPixel_)),t.addEventListener(pt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new wn;const i=this.featuresBeingModified_.getArray();for(let a=0,o=e.length;a<o;++a){const u=e[a].feature;u&&!i.includes(u)&&this.featuresBeingModified_.push(u)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new qd(Zd.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(pt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,i=[];e.forEach(function(a){t===a.feature&&i.push(a)});for(let a=i.length-1;a>=0;--a){const o=i[a];for(let u=this.dragSegments_.length-1;u>=0;--u)this.dragSegments_[u][0]===o&&this.dragSegments_.splice(u,1);e.remove(o)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const i=e.getCoordinates(),a={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),a)}writeMultiPointGeometry_(t,e){const i=e.getCoordinates();for(let a=0,o=i.length;a<o;++a){const u=i[a],h={feature:t,geometry:e,depth:[a],index:a,segment:[u,u]};this.rBush_.insert(e.getExtent(),h)}}writeLineStringGeometry_(t,e){const i=e.getCoordinates();for(let a=0,o=i.length-1;a<o;++a){const u=i.slice(a,a+2),h={feature:t,geometry:e,index:a,segment:u};this.rBush_.insert(We(u),h)}}writeMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let a=0,o=i.length;a<o;++a){const u=i[a];for(let h=0,f=u.length-1;h<f;++h){const g=u.slice(h,h+2),m={feature:t,geometry:e,depth:[a],index:h,segment:g};this.rBush_.insert(We(g),m)}}}writePolygonGeometry_(t,e){const i=e.getCoordinates();for(let a=0,o=i.length;a<o;++a){const u=i[a];for(let h=0,f=u.length-1;h<f;++h){const g=u.slice(h,h+2),m={feature:t,geometry:e,depth:[a],index:h,segment:g};this.rBush_.insert(We(g),m)}}}writeMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let a=0,o=i.length;a<o;++a){const u=i[a];for(let h=0,f=u.length;h<f;++h){const g=u[h];for(let m=0,y=g.length-1;m<y;++m){const p=g.slice(m,m+2),v={feature:t,geometry:e,depth:[h,a],index:m,segment:p};this.rBush_.insert(We(p),v)}}}}writeCircleGeometry_(t,e){const i=e.getCenter(),a={feature:t,geometry:e,index:Ex,segment:[i,i]},o={feature:t,geometry:e,index:$l,segment:[i,i]},u=[a,o];a.featureSegments=u,o.featureSegments=u,this.rBush_.insert(Kl(i),a);let h=e;this.rBush_.insert(h.getExtent(),o)}writeGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let a=0;a<i.length;++a){const o=i[a],u=this.SEGMENT_WRITERS_[o.getType()];u(t,o)}}createOrUpdateVertexFeature_(t,e,i,a){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(t):(o=new ii(new ai(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",e),o.set("geometries",i),o.set("existing",a),o}handleEvent(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;let e;return!t.map.getView().getInteracting()&&t.type==Dt.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=Dt.SINGLECLICK||!this.ignoreNextSingleClick_?e=this.removePoint():e=!0),t.type==Dt.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}findInsertVerticesAndUpdateDragSegments_(t){this.handlePointerAtPixel_(t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const e=this.vertexFeature_;if(!e)return;this.getMap().getView().getProjection();const i=[],a=e.getGeometry().getCoordinates(),o=We([a]),u=this.rBush_.getInExtent(o),h={};u.sort(kA);for(let f=0,g=u.length;f<g;++f){const m=u[f],y=m.segment;let p=Ct(m.geometry);const v=m.depth;if(v&&(p+="-"+v.join("-")),h[p]||(h[p]=new Array(2)),m.geometry.getType()==="Circle"&&m.index===$l){const S=bx(t,m);ze(S,a)&&!h[p][0]&&(this.dragSegments_.push([m,0]),h[p][0]=m);continue}if(ze(y[0],a)&&!h[p][0]){this.dragSegments_.push([m,0]),h[p][0]=m;continue}if(ze(y[1],a)&&!h[p][1]){if(h[p][0]&&h[p][0].index===0){let S=m.geometry.getCoordinates();switch(m.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":S=S[v[1]];case"Polygon":if(m.index!==S[v[0]].length-2)continue;break}}this.dragSegments_.push([m,1]),h[p][1]=m;continue}Ct(y)in this.vertexSegments_&&!h[p][0]&&!h[p][1]&&i.push(m)}return i}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_.map(([o])=>o));const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],a=[];for(let o=0,u=this.dragSegments_.length;o<u;++o){const h=this.dragSegments_[o],f=h[0],g=f.feature;i.includes(g)||i.push(g);const m=f.geometry;a.includes(m)||a.push(m);const y=f.depth;let p;const v=f.segment,S=h[1];for(;e.length<m.getStride();)e.push(v[S][e.length]);switch(m.getType()){case"Point":p=e,v[0]=e,v[1]=e;break;case"MultiPoint":p=m.getCoordinates(),p[f.index]=e,v[0]=e,v[1]=e;break;case"LineString":p=m.getCoordinates(),p[f.index+S]=e,v[S]=e;break;case"MultiLineString":p=m.getCoordinates(),p[y[0]][f.index+S]=e,v[S]=e;break;case"Polygon":p=m.getCoordinates(),p[y[0]][f.index+S]=e,v[S]=e;break;case"MultiPolygon":p=m.getCoordinates(),p[y[1]][y[0]][f.index+S]=e,v[S]=e;break;case"Circle":const w=m;if(v[0]=e,v[1]=e,f.index===Ex)this.changingFeature_=!0,w.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let T=cc(Jt(w.getCenter()),Jt(e));w.setRadius(T),this.changingFeature_=!1}break}p&&this.setGeometryCoordinates_(m,p)}this.createOrUpdateVertexFeature_(e,i,a,!0)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(e);if(i?.length&&this.insertVertexCondition_(t)&&(this.willModifyFeatures_(t,i),this.vertexFeature_)){const a=this.vertexFeature_.getGeometry().getCoordinates();for(let o=i.length-1;o>=0;--o)this.insertVertex_(i[o],a);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const i=this.dragSegments_[e][0],a=i.geometry;if(a.getType()==="Circle"){const o=a,u=o.getCenter(),h=i.featureSegments[0],f=i.featureSegments[1];h.segment[0]=u,h.segment[1]=u,f.segment[0]=u,f.segment[1]=u,this.rBush_.update(Kl(u),h);let g=o;this.rBush_.update(g.getExtent(),f)}else this.rBush_.update(We(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new qd(Zd.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.coordinate)}handlePointerAtPixel_(t){const e=this.getMap(),i=e.getPixelFromCoordinate(t);e.getView().getProjection();const a=function(h,f){return Cx(t,h)-Cx(t,f)};let o,u;if(this.hitDetection_){const h=typeof this.hitDetection_=="object"?f=>f===this.hitDetection_:void 0;e.forEachFeatureAtPixel(i,(f,g,m)=>{m&&m.getType()==="Point"&&(m=new ai(lr(m.getCoordinates())));const y=m||f.getGeometry();if(y&&y.getType()==="Point"&&f instanceof ii&&this.features_.getArray().includes(f)){u=y;const p=f.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:f,geometry:u,segment:[p,p]}]}return!0},{layerFilter:h})}if(!o){const h=Ni(Kl(t,Sx)),f=e.getView().getResolution()*this.pixelTolerance_,g=jg(Lc(h,f,Sx));o=this.rBush_.getInExtent(g)}if(o&&o.length>0){const h=o.sort(a)[0],f=h.segment;let g=bx(t,h);const m=e.getPixelFromCoordinate(g);let y=cc(i,m);if(u||y<=this.pixelTolerance_){const p={};if(p[Ct(f)]=!0,this.snapToPointer_||(this.delta_[0]=g[0]-t[0],this.delta_[1]=g[1]-t[1]),h.geometry.getType()==="Circle"&&h.index===$l)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(g,[h.feature],[h.geometry],this.snappedToVertex_);else{const v=e.getPixelFromCoordinate(f[0]),S=e.getPixelFromCoordinate(f[1]),w=Ca(m,v),T=Ca(m,S);if(y=Math.sqrt(Math.min(w,T)),this.snappedToVertex_=y<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(g=w>T?f[1]:f[0]),this.createOrUpdateVertexFeature_(g,[h.feature],[h.geometry],this.snappedToVertex_);const b={};b[Ct(h.geometry)]=!0;for(let R=1,O=o.length;R<O;++R){const A=o[R].segment;if(ze(f[0],A[0])&&ze(f[1],A[1])||ze(f[0],A[1])&&ze(f[1],A[0])){const L=Ct(o[R].geometry);L in b||(b[L]=!0,p[Ct(A)]=!0)}else break}}this.vertexSegments_=p;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const i=t.segment,a=t.feature,o=t.geometry,u=t.depth,h=t.index;let f;for(;e.length<o.getStride();)e.push(0);switch(o.getType()){case"MultiLineString":f=o.getCoordinates(),f[u[0]].splice(h+1,0,e);break;case"Polygon":f=o.getCoordinates(),f[u[0]].splice(h+1,0,e);break;case"MultiPolygon":f=o.getCoordinates(),f[u[1]][u[0]].splice(h+1,0,e);break;case"LineString":f=o.getCoordinates(),f.splice(h+1,0,e);break;default:return!1}this.setGeometryCoordinates_(o,f);const g=this.rBush_;g.remove(t),this.updateSegmentIndices_(o,h,u,1);const m={segment:[i[0],e],feature:a,geometry:o,depth:u,index:h};g.insert(We(m.segment),m),this.dragSegments_.push([m,1]);const y={segment:[e,i[1]],feature:a,geometry:o,depth:u,index:h+1};return g.insert(We(y.segment),y),this.dragSegments_.push([y,0]),!0}updatePointer_(t){return t&&this.findInsertVerticesAndUpdateDragSegments_(t),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const t=this.vertexFeature_?.getGeometry().getCoordinates();return t?lr(t,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(We([t])).some(({segment:i})=>ze(i[0],t)||ze(i[1],t))}removePoint(t){if(t&&(t=Jt(t,this.getMap().getView().getProjection()),this.updatePointer_(t)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Dt.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_.map(([a])=>a));const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new qd(Zd.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const t=this.dragSegments_,e={};let i=!1,a,o,u,h,f,g,m,y,p,v,S;for(f=t.length-1;f>=0;--f)u=t[f],v=u[0],S=Ct(v.feature),v.depth&&(S+="-"+v.depth.join("-")),S in e||(e[S]={}),u[1]===0?(e[S].right=v,e[S].index=v.index):u[1]==1&&(e[S].left=v,e[S].index=v.index+1);for(S in e){switch(p=e[S].right,m=e[S].left,g=e[S].index,y=g-1,m!==void 0?v=m:v=p,y<0&&(y=0),h=v.geometry,o=h.getCoordinates(),a=o,i=!1,h.getType()){case"MultiLineString":o[v.depth[0]].length>2&&(o[v.depth[0]].splice(g,1),i=!0);break;case"LineString":o.length>2&&(o.splice(g,1),i=!0);break;case"MultiPolygon":a=a[v.depth[1]];case"Polygon":a=a[v.depth[0]],a.length>4&&(g==a.length-1&&(g=0),a.splice(g,1),i=!0,g===0&&(a.pop(),a.push(a[0]),y=a.length-1));break}if(i){this.setGeometryCoordinates_(h,o);const w=[];if(m!==void 0&&(this.rBush_.remove(m),w.push(m.segment[0])),p!==void 0&&(this.rBush_.remove(p),w.push(p.segment[1])),m!==void 0&&p!==void 0){const T={depth:v.depth,feature:v.feature,geometry:v.geometry,index:y,segment:w};this.rBush_.insert(We(T.segment),T)}this.updateSegmentIndices_(h,g,v.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return i}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(We([t])).some(({segment:i})=>!(ze(i[0],t)||ze(i[1],t)))}insertPoint(t){const e=t?Jt(t,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return e?this.findInsertVerticesAndUpdateDragSegments_(e).reduce((a,o)=>a||this.insertVertex_(o,e),!1):!1}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,i,a){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(i===void 0||o.depth===void 0||Hi(o.depth,i))&&o.index>e&&(o.index+=a)})}}function kA(r,t){return r.index-t.index}function Cx(r,t,e){const i=t.geometry;if(i.getType()==="Circle"){let o=i;if(t.index===$l){const u=Ca(o.getCenter(),Jt(r)),h=Math.sqrt(u)-o.getRadius();return h*h}}const a=Jt(r);return Ea[0]=Jt(t.segment[0]),Ea[1]=Jt(t.segment[1]),Ub(a,Ea)}function bx(r,t,e){const i=t.geometry;if(i.getType()==="Circle"&&t.index===$l)return lr(i.getClosestPoint(Jt(r)));const a=Jt(r);return Ea[0]=Jt(t.segment[0]),Ea[1]=Jt(t.segment[1]),lr(ev(a,Ea))}function FA(){const r=Uv();return function(t,e){return r.Point}}function zA({fieldType:r,onGeometryChange:t,radius:e}){const i=j.useRef(null),a=j.useRef(null),o=j.useRef(null),u=j.useRef(null),h=j.useRef(new ym),[f,g]=j.useState(null),[m,y]=j.useState(!1),[p,v]=j.useState(!1);j.useRef(!1);const S=A=>{const X=A.getGeometry().getType();if(X==="Point")return new je({image:new cr({radius:6,fill:new bn({color:"#009e4f"}),stroke:new Tn({color:"#fff",width:2})})});if(X==="Polygon")return new je({fill:new bn({color:"rgba(0, 158, 79, 0.2)"}),stroke:new Tn({color:"#009e4f",width:2})});if(X==="Circle")return new je({fill:new bn({color:"rgba(0, 158, 79, 0.1)"}),stroke:new Tn({color:"#009e4f",width:2,lineDash:[5,5]})})},w=A=>A.getType()==="Polygon"?A.getCoordinates()[0].length-1:0,T=()=>{h.current.clear(),y(!1),g(null),t&&t(null),a.current&&(o.current&&(a.current.removeInteraction(o.current),o.current=null),O())},b=(A,L=!1)=>{const X=A.getGeometry();if(X.getType()==="Polygon"){const H=(Cg(X)/1e4).toFixed(2);g(`${H} га`),t&&t(X)}else if(X.getType()==="Circle"){const B=X.getRadius(),V=(Math.PI*B*B/1e4).toFixed(2);g(`${V} га`),t&&L?t(X,B):t&&t(X)}},R=A=>{A.key==="Enter"&&o.current&&o.current.finishDrawing()},O=()=>{if(!a.current||m)return;o.current&&(a.current.removeInteraction(o.current),o.current=null);const A=a.current.getTargetElement();A&&(r==="polygon"?(o.current=new vx({source:h.current,type:"Polygon",maxPoints:5,style:new je({fill:new bn({color:"rgba(0, 158, 79, 0.2)"}),stroke:new Tn({color:"#009e4f",width:2})})}),o.current.on("drawend",L=>{const X=L.feature;y(!0),b(X,!0),o.current&&(a.current.removeInteraction(o.current),o.current=null),A.removeEventListener("keydown",R)}),A.addEventListener("keydown",R),a.current.addInteraction(o.current)):r==="point"&&(o.current=new vx({source:h.current,type:"Point",style:new je({image:new cr({radius:6,fill:new bn({color:"#009e4f"}),stroke:new Tn({color:"#fff",width:2})})})}),o.current.on("drawend",L=>{const B=L.feature.getGeometry(),H=new To(B.getCoordinates(),e||100),V=new ii({geometry:H,name:"radius_circle"});h.current.clear(),h.current.addFeature(V),y(!0),b(V,!0),o.current&&(a.current.removeInteraction(o.current),o.current=null)}),a.current.addInteraction(o.current)))};return j.useEffect(()=>{if(!i.current)return;const A=new o2({target:i.current,layers:[new D2({source:new W2}),new _m({source:h.current,style:S})],view:new ei({center:[4188099476e-3,7505781418e-3],zoom:4})}),L=new jA({source:h.current,insertVertexCondition:X=>{const B=X.features;if(B.getLength()>0){const V=B.item(0).getGeometry();if(V.getType()==="Polygon")return w(V)<5}return!0}});return L.on("modifyend",X=>{X.features.forEach(B=>{b(B,!0)})}),A.addInteraction(L),u.current=L,a.current=A,v(!0),()=>{if(a.current){const X=a.current.getTargetElement();X&&X.removeEventListener("keydown",R),a.current.setTarget(null),a.current=null}v(!1)}},[]),j.useEffect(()=>{p&&O()},[r,m,p]),j.useEffect(()=>{if(r==="point"&&e&&m&&p){const L=h.current.getFeatures().find(X=>X.getGeometry().getType()==="Circle");L&&(L.getGeometry().setRadius(e),b(L,!1))}},[e,r,m,p]),E.jsxs("div",{className:"w-full h-full rounded-xl overflow-hidden relative",style:{minHeight:"400px"},children:[E.jsx("div",{ref:i,className:"w-full h-full cursor-pointer",tabIndex:0}),m&&E.jsx("button",{onClick:T,className:"absolute bottom-4 left-4 bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] text-white px-6 py-3 rounded-full text-xl shadow-2xs cursor-pointer transition-colors",children:"Очистить выделение"})]})}function GA({isVisible:r,onClose:t,onSubmit:e}){const[i,a]=j.useState("polygon"),[o,u]=j.useState(""),[h,f]=j.useState(100),[g,m]=j.useState(null),[y,p]=j.useState(null),v=(b,R=null)=>{if(m(b),R!==null&&f(Math.round(R)),i==="polygon"&&b&&b.getType()==="Polygon"){const A=(Cg(b)/1e4).toFixed(2);p(`${A} га`)}else if(i==="point"&&b&&b.getType()==="Circle"){const A=(Math.PI*b.getRadius()*b.getRadius()/1e4).toFixed(2);p(`${A} га`)}else b||p(null)},S=async b=>{if(b.preventDefault(),!o.trim()){alert("Пожалуйста, введите название поля");return}if(!g){alert("Пожалуйста, выберите область на карте");return}if(i==="polygon"){const A=g.getCoordinates()[0].length-1;if(A<3||A>5){alert("Полигон должен содержать от 3 до 5 вершин");return}}let R;try{if(i==="polygon")R={type:"polygon",coordinates:g.getCoordinates()[0].map(L=>gc(L,"EPSG:3857","EPSG:4326"))};else if(i==="point"){const O=g.getCenter(),A=gc(O,"EPSG:3857","EPSG:4326");R={type:"point_radius",lon:A[0],lat:A[1],radius_km:h/1e3}}e({type:i,name:o,radius:i==="point"?h:void 0,geometry:g,area:y,areaOfInterest:R})}catch(O){console.error("Ошибка при преобразовании координат:",O),alert("Ошибка при обработке координат")}},w=b=>{b.target===b.currentTarget&&T()},T=()=>{u(""),f(100),m(null),p(null),t()};return r?E.jsx("div",{className:"fixed inset-0 bg-[var(--overlay-bg)] flex items-center justify-center z-50 p-4",onClick:w,children:E.jsxs("div",{className:"bg-white rounded-3xl w-[80vw] h-[80vh] flex flex-col lg:flex-row overflow-hidden",children:[E.jsx("div",{className:"flex-1 p-6 min-h-[300px] lg:min-h-auto",children:E.jsx(zA,{fieldType:i,onGeometryChange:v,radius:h})}),E.jsxs("div",{className:"w-full lg:w-1/3 p-6 lg:p-8 flex flex-col",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[E.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-[var(--neutral-dark-color)]",children:"Добавить поле"}),E.jsx("button",{onClick:T,className:"text-3xl text-gray-500 hover:text-gray-700 transition-colors cursor-pointer",children:"×"})]}),E.jsxs("form",{onSubmit:S,className:"flex-1 flex flex-col",children:[E.jsx(pT,{fieldType:i,setFieldType:a}),E.jsx(xT,{fieldType:i,fieldName:o,setFieldName:u,radius:h,setRadius:f,area:y}),E.jsxs("div",{className:"mt-auto pt-6 lg:pt-8 flex gap-4",children:[E.jsx("button",{type:"button",onClick:T,className:"flex-1 bg-[var(--neutral-color)] hover:bg-gray-200 transition-colors rounded-full py-4 text-xl font-semibold text-gray-700 cursor-pointer shadow-2xs",children:"Отмена"}),E.jsx("button",{type:"submit",className:"flex-1 bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] transition-colors rounded-full py-4 text-xl font-semibold text-white cursor-pointer shadow-2xs",children:"Сохранить поле"})]})]})]})]})}):null}function PA({setActiveTab:r}){const[t,e]=j.useState(!1),[i,a]=j.useState([]),[o,u]=j.useState(!0),[h,f]=j.useState(""),[g,m]=j.useState(null),[y,p]=j.useState(!1),[v,S]=j.useState(null),[w,T]=j.useState(!1),[b,R]=j.useState(null),[O,A]=j.useState(""),[L,X]=j.useState("");console.log("FieldsTab: Рендер компонента"),j.useEffect(()=>{const J=new Date,nt=new Date;nt.setDate(J.getDate()-2),X(J.toISOString().split("T")[0]),A(nt.toISOString().split("T")[0])},[]);const B=async()=>{console.log("FieldsTab: Начало загрузки полей");try{const J=dn("token"),nt=await nb(J);if(nt.ok){const I=await nt.json();I.status==="success"?(a(I.fields||[]),console.log("FieldsTab: Поля успешно загружены",{count:I.fields?.length})):(f("Ошибка при загрузке полей"),console.error("FieldsTab: Ошибка в статусе ответа полей",I))}else f("Ошибка соединения с сервером"),console.error("FieldsTab: Ошибка HTTP при загрузке полей",nt.status)}catch(J){console.error("FieldsTab: Исключение при загрузке полей:",J),f("Ошибка при загрузке полей")}finally{u(!1)}};j.useEffect(()=>{B()},[]);const H=async J=>{console.log("FieldsTab: Сохранение нового поля",{fieldName:J.name,type:J.type});try{const nt=dn("token");let I;if(J.type==="polygon"){const $=J.geometry.getCoordinates()[0];I=JSON.stringify({type:"polygon",coordinates:$})}else if(J.type==="point"){const $=J.geometry.getCenter();I=JSON.stringify({type:"point_radius",lon:$[0],lat:$[1],radius_km:J.radius/1e3})}const Z=await eb(nt,J.name,I);if(Z.ok){const $=await Z.json();$.status==="success"?(await B(),e(!1),console.log("FieldsTab: Поле успешно сохранено")):alert(`Ошибка при сохранении поля: ${$.detail}`)}else alert("Ошибка соединения с сервером")}catch(nt){console.error("Ошибка при сохранении поля:",nt),alert("Ошибка при сохранении поля")}},V=async J=>{if(window.confirm("Вы уверены, что хотите удалить это поле?")){console.log("FieldsTab: Удаление поля",{fieldId:J});try{const nt=dn("token"),I=await ib(J,nt);if(I.ok){const Z=await I.json();Z.status==="success"?(await B(),console.log("FieldsTab: Поле успешно удалено")):alert(`Ошибка при удалении поля: ${Z.detail}`)}else alert("Ошибка соединения с сервером")}catch(nt){console.error("Ошибка при удалении поля:",nt),alert("Ошибка при удалении поля")}}},et=J=>{console.log("FieldsTab: Открытие модального окна выбора дат для поля",{fieldId:J.id,fieldName:J.name}),R(J),T(!0)},lt=()=>{console.log("FieldsTab: Закрытие модального окна выбора дат"),T(!1),R(null)},it=async()=>{if(!b){console.error("FieldsTab: Нет выбранного поля для анализа");return}if(!O||!L){alert("Пожалуйста, выберите начальную и конечную даты");return}if(new Date(O)>new Date(L)){alert("Начальная дата не может быть позже конечной даты");return}console.log("FieldsTab: Запуск анализа поля",{fieldId:b.id,fieldName:b.name,startDate:O,endDate:L});try{m(b.id);const J=dn("token");console.log("FieldsTab: Параметры анализа",{startDate:O,endDate:L,fieldType:b.area_of_interest.type});let nt;if(b.area_of_interest.type==="point_radius"?(console.log("FieldsTab: Анализ по точке с радиусом",b.area_of_interest),nt=await yp(J,O,L,{lon:b.area_of_interest.lon,lat:b.area_of_interest.lat,radius_km:b.area_of_interest.radius_km})):b.area_of_interest.type==="polygon"&&(console.log("FieldsTab: Анализ по полигону",{coordinatesCount:b.area_of_interest.coordinates?.length}),nt=await yp(J,O,L,{polygonCoords:b.area_of_interest.coordinates})),console.log("FieldsTab: Ответ от сервера на анализ",{status:nt?.status}),nt.ok){const I=await nt.json();console.log("FieldsTab: Результат анализа",{status:I.status,analysisId:I.analysis_id}),I.status==="success"?(S(I.analysis_id),p(!0),T(!1),console.log("FieldsTab: Анализ успешно завершен",{analysisId:I.analysis_id})):alert(`Ошибка при выполнении анализа: ${I.detail}`)}else alert("Ошибка соединения с сервером при выполнении анализа")}catch(J){console.error("FieldsTab: Исключение при выполнении анализа:",J),alert("Ошибка при выполнении анализа")}finally{m(null),R(null)}},st=()=>{console.log("FieldsTab: Переход к анализам"),p(!1),r("analyses")};return o?E.jsx("div",{className:"container",children:E.jsx("div",{className:"text-3xl font-semibold mb-4",children:"Загрузка полей..."})}):h?E.jsxs("div",{className:"container",children:[E.jsx("div",{className:"text-3xl font-semibold mb-4 text-red-500",children:h}),E.jsx("button",{onClick:B,className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] mt-6
          transition-[background-color] duration-100 cursor-pointer rounded-full text-3xl px-5 py-4 text-[var(--neutral-color)]`,children:"Попробовать снова"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"container",children:[E.jsx("div",{className:"text-3xl font-semibold mb-4",children:i.length===0?"У вас ещё нет полей":"Ваши поля:"}),E.jsx("ul",{className:"space-y-4 max-h-[40vh] overflow-y-auto",children:i.map(J=>E.jsxs("li",{className:"bg-[#f6f6f6] rounded-xl px-6 py-4 flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-2xl font-medium text-gray-900",children:J.name}),J.area_of_interest&&E.jsx("div",{className:"text-xl text-gray-600 mt-1",children:J.area_of_interest.type==="polygon"?"Полигон":"Окружность"})]}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:()=>et(J),disabled:g===J.id,className:"text-[var(--accent-color)] font-bold hover:underline text-2xl cursor-pointer disabled:text-gray-400 disabled:no-underline",children:g===J.id?"Анализ...":"Анализировать"}),E.jsx("button",{onClick:()=>V(J.id),className:"text-red-500 font-bold hover:underline text-2xl cursor-pointer",children:"Удалить"})]})]},J.id))}),E.jsx("div",{children:E.jsx("button",{onClick:()=>e(!0),className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] mt-6
            transition-[background-color] duration-100 cursor-pointer rounded-full text-3xl px-5 py-4 text-[var(--neutral-color)]`,children:"Добавить поле"})})]}),w&&E.jsx("div",{className:"fixed inset-0 bg-[var(--overlay-bg)] flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-3xl p-8 w-[30vw]",children:[E.jsx("h3",{className:"text-3xl font-bold mb-4 text-[var(--neutral-dark-color)]",children:"Выберите период анализа"}),E.jsxs("p",{className:"text-xl text-gray-600 mb-2",children:['для поля "',b?.name,'"']}),E.jsxs("div",{className:"space-y-4 mb-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xl font-semibold mb-2 text-[var(--neutral-dark-color)]",htmlFor:"startDate",children:"Начальная дата"}),E.jsx("input",{id:"startDate",type:"date",value:O,onChange:J=>A(J.target.value),className:"w-full rounded-2xl px-4 py-3 text-xl bg-[var(--neutral-light-color)] border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] cursor-text"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xl font-semibold mb-2 text-[var(--neutral-dark-color)]",htmlFor:"endDate",children:"Конечная дата"}),E.jsx("input",{id:"endDate",type:"date",value:L,onChange:J=>X(J.target.value),className:"w-full rounded-2xl px-4 py-3 text-xl bg-[var(--neutral-light-color)] border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] cursor-text"})]})]}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:lt,className:"flex-1 bg-gray-200 hover:bg-gray-300 transition-colors rounded-full py-3 text-2xl font-semibold text-gray-700 cursor-pointer",children:"Отмена"}),E.jsx("button",{onClick:it,disabled:g===b?.id,className:"flex-1 bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] disabled:bg-gray-400 transition-colors rounded-full py-3 text-2xl font-semibold text-white cursor-pointer",children:g===b?.id?"Анализ...":"Запустить анализ"})]})]})}),y&&E.jsx("div",{className:"fixed inset-0 bg-[var(--overlay-bg)] flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",children:[E.jsx("h3",{className:"text-3xl font-bold mb-4 text-[var(--neutral-dark-color)]",children:"Анализ завершен!"}),E.jsx("p",{className:"text-2xl text-gray-700 mb-6",children:'Анализ поля успешно выполнен. Вы можете просмотреть результаты во вкладке "Анализы".'}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:()=>p(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 transition-colors rounded-full py-3 text-2xl font-semibold text-gray-700 cursor-pointer",children:"Остаться"}),E.jsx("button",{onClick:st,className:"flex-1 bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] transition-colors rounded-full py-3 text-2xl font-semibold text-white cursor-pointer",children:"Перейти к анализам"})]})]})}),E.jsx(GA,{isVisible:t,onClose:()=>e(!1),onSubmit:H})]})}function UA(){const[r,t]=j.useState([]),[e,i]=j.useState(null),[a,o]=j.useState(null),[u,h]=j.useState(!0),[f,g]=j.useState(!1),[m,y]=j.useState("");console.log("AnalysesTab: Рендер компонента");const p=async()=>{console.log("AnalysesTab: Начало загрузки списка анализов");try{h(!0);const b=dn("token");console.log("AnalysesTab: Токен получен",{token:b?"есть":"нет"});const R=await sb(b);if(console.log("AnalysesTab: Ответ от сервера на список анализов",{status:R.status}),R.ok){const O=await R.json();if(console.log("AnalysesTab: Данные списка анализов получены",{status:O.status,count:O.analyses?.length}),O.status==="success"){const A=(O.analyses||[]).sort((L,X)=>X.timestamp-L.timestamp);t(A),console.log("AnalysesTab: Список анализов обновлен",{count:A.length})}else y("Ошибка при загрузке списка анализов"),console.error("AnalysesTab: Ошибка в статусе ответа списка анализов",O)}else y("Ошибка соединения с сервером"),console.error("AnalysesTab: Ошибка HTTP при загрузке списка анализов",R.status)}catch(b){y("Ошибка при загрузке анализов"),console.error("AnalysesTab: Исключение при загрузке списка анализов:",b)}finally{h(!1)}};j.useEffect(()=>{p()},[]);const v=async b=>{console.log("AnalysesTab: Выбор анализа",{analysisId:b.analysis_id});try{g(!0);const R=dn("token"),O=await rb(b.analysis_id,R);if(console.log("AnalysesTab: Ответ от сервера на загрузку анализа",{status:O.status}),O.ok){const A=await O.json();console.log("AnalysesTab: Данные анализа получены",{status:A.status,hasData:!!A.data}),A.status==="success"?(i(A.data),o(null),console.log("AnalysesTab: Анализ установлен как выбранный",{analysisId:b.analysis_id}),S(b.analysis_id)):console.error("AnalysesTab: Ошибка в статусе ответа анализа",A)}else console.error("AnalysesTab: Ошибка HTTP при загрузке анализа",O.status)}catch(R){console.error("AnalysesTab: Исключение при загрузке анализа:",R)}finally{g(!1)}},S=async b=>{console.log("AnalysesTab: Загрузка рекомендаций для анализа",{analysisId:b});try{const R=dn("token"),O=await ab(b,R);if(console.log("AnalysesTab: Ответ от сервера на рекомендации",{status:O.status}),O.ok){const A=await O.json();console.log("AnalysesTab: Данные рекомендаций получены",{status:A.status,hasRecommendation:!!A.recommendation}),A.status==="success"?(o(A),console.log("AnalysesTab: Рекомендации установлены",{recommendation:A.recommendation})):console.error("AnalysesTab: Ошибка в статусе ответа рекомендаций",A)}else console.error("AnalysesTab: Ошибка HTTP при загрузке рекомендаций",O.status)}catch(R){console.error("AnalysesTab: Исключение при загрузке рекомендаций:",R)}},w=b=>new Date(b*1e3).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=b=>b.type==="point_radius"?`Точка (${b.lon.toFixed(4)}, ${b.lat.toFixed(4)}) с радиусом ${b.radius_km} км`:b.type==="polygon"?`Полигон с ${b.coordinates.length} точками`:"Неизвестный тип области";return u?E.jsx("div",{className:"container",children:E.jsx("div",{className:"text-3xl font-semibold mb-4",children:"Загрузка анализов..."})}):m?E.jsxs("div",{className:"container",children:[E.jsx("div",{className:"text-3xl font-semibold mb-4 text-red-500",children:m}),E.jsx("button",{onClick:p,className:`bg-[var(--accent-color)] hover:bg-[var(--accent-light-color)] mt-6
          transition-[background-color] duration-100 cursor-pointer rounded-full text-3xl px-5 py-4 text-white`,children:"Попробовать снова"})]}):E.jsxs("div",{className:"container",children:[E.jsx("div",{className:"text-3xl font-semibold mb-4",children:r.length===0?"У вас ещё нет анализов":"История анализов:"}),E.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[E.jsx("div",{className:"lg:w-1/3",children:E.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:r.map(b=>E.jsxs("div",{className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${e?.analysis_id===b.analysis_id?"border-[var(--accent-color)] bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>v(b),children:[E.jsxs("div",{className:"flex justify-between items-start mb-3",children:[E.jsx("span",{className:"font-semibold text-xl",children:w(b.timestamp)}),E.jsxs("span",{className:"text-lg text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[b.image_count," снимков"]})]}),E.jsxs("div",{className:"text-lg text-gray-600",children:[E.jsx("div",{className:"mb-2",children:T(b.area_of_interest)}),E.jsxs("div",{children:["Период: ",b.date_range.start," - ",b.date_range.end]}),b.statistics_summary&&E.jsxs("div",{className:"mt-2",children:["NDVI: ",b.statistics_summary.ndvi_mean?.toFixed(3)||"N/A"]})]})]},b.analysis_id))})}),E.jsx("div",{className:"lg:w-2/3",children:f?E.jsx("div",{className:"flex items-center justify-center h-64",children:E.jsx("div",{className:"text-3xl",children:"Загрузка деталей анализа..."})}):e?E.jsx(YA,{analysis:e,recommendations:a}):E.jsx("div",{className:"flex items-center justify-center h-64 text-3xl text-gray-500 border-2 border-dashed border-gray-300 rounded-xl",children:"Выберите анализ для просмотра деталей"})})]})]})}function YA({analysis:r,recommendations:t}){return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"bg-gray-50 p-5 rounded-xl",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"font-semibold text-2xl mb-3 text-[var(--neutral-dark-color)]",children:"Информация об анализе"}),E.jsxs("div",{className:"space-y-2 text-xl",children:[E.jsxs("div",{children:["ID: ",r.analysis_id]}),E.jsxs("div",{children:["Период: ",r.date_range.start," - ",r.date_range.end]}),E.jsxs("div",{children:["Снимков: ",r.image_count]})]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-semibold text-2xl mb-3 text-[var(--neutral-dark-color)]",children:"Метаданные"}),E.jsxs("div",{className:"space-y-2 text-xl",children:[E.jsxs("div",{children:["Источник: ",r.metadata?.source||"N/A"]}),E.jsxs("div",{children:["Разрешение: ",r.metadata?.resolution||"N/A"]})]})]})]})}),t&&E.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200",children:[E.jsx("h4",{className:"font-semibold text-2xl mb-3 text-[var(--neutral-dark-color)]",children:"AI Рекомендации"}),E.jsx("p",{className:"text-xl text-gray-700 mb-4 whitespace-pre-wrap",children:t.recommendation}),t.average_indices&&E.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[E.jsx("h5",{className:"font-medium text-xl text-[var(--neutral-dark-color)] mb-3",children:"Средние показатели:"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-lg",children:Object.entries(t.average_indices).map(([e,i])=>E.jsxs("div",{className:"text-gray-700",children:[E.jsxs("span",{className:"font-medium capitalize",children:[e,":"]})," ",typeof i=="number"?i.toFixed(4):i]},e))})]})]}),r.results_per_image&&r.results_per_image.map((e,i)=>E.jsx(XA,{result:e,index:i},i))]})}function XA({result:r,index:t}){const[e,i]=j.useState("images");return E.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[E.jsxs("div",{className:"bg-gray-100 px-5 py-4 border-b border-gray-200",children:[E.jsxs("h4",{className:"font-semibold text-2xl",children:["Снимок от ",r.date]}),E.jsxs("p",{className:"text-xl text-gray-600",children:["Облачность: ",r.cloud_coverage,"%"]})]}),E.jsx("div",{className:"border-b border-gray-200",children:E.jsxs("div",{className:"flex",children:[E.jsx("button",{className:`px-5 py-3 font-medium text-xl ${e==="images"?"text-[var(--accent-color)] border-b-2 border-[var(--accent-color)]":"text-gray-500"}`,onClick:()=>i("images"),children:"Изображения"}),E.jsx("button",{className:`px-5 py-3 font-medium text-xl ${e==="statistics"?"text-[var(--accent-color)] border-b-2 border-[var(--accent-color)]":"text-gray-500"}`,onClick:()=>i("statistics"),children:"Статистика"}),E.jsx("button",{className:`px-5 py-3 font-medium text-xl ${e==="zoning"?"text-[var(--accent-color)] border-b-2 border-[var(--accent-color)]":"text-gray-500"}`,onClick:()=>i("zoning"),children:"Зонирование"})]})}),E.jsxs("div",{className:"p-5",children:[e==="images"&&E.jsx(BA,{images:r.images}),e==="statistics"&&E.jsx(HA,{statistics:r.statistics}),e==="zoning"&&E.jsx(VA,{zoning:r.zoning})]})]})}function BA({images:r}){return r?E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:Object.entries(r).map(([t,e])=>E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"font-medium text-xl mb-3 capitalize",children:t}),E.jsx("img",{src:`data:image/png;base64,${e}`,alt:t,className:"w-full h-52 object-cover rounded-lg border border-gray-200"})]},t))}):E.jsx("div",{className:"text-xl",children:"Нет изображений"})}function HA({statistics:r}){return r?E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full bg-white text-xl",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-gray-50",children:[E.jsx("th",{className:"px-5 py-3 text-left",children:"Индекс"}),E.jsx("th",{className:"px-5 py-3 text-left",children:"Мин."}),E.jsx("th",{className:"px-5 py-3 text-left",children:"Макс."}),E.jsx("th",{className:"px-5 py-3 text-left",children:"Среднее"}),E.jsx("th",{className:"px-5 py-3 text-left",children:"Ст. откл."})]})}),E.jsx("tbody",{children:Object.entries(r).map(([t,e])=>E.jsxs("tr",{className:"border-b border-gray-200",children:[E.jsx("td",{className:"px-5 py-3 font-medium capitalize",children:t}),E.jsx("td",{className:"px-5 py-3",children:e.min?.toFixed(4)}),E.jsx("td",{className:"px-5 py-3",children:e.max?.toFixed(4)}),E.jsx("td",{className:"px-5 py-3",children:e.mean?.toFixed(4)}),E.jsx("td",{className:"px-5 py-3",children:e.std?.toFixed(4)})]},t))})]})}):E.jsx("div",{className:"text-xl",children:"Нет статистики"})}function VA({zoning:r}){return r?E.jsx("div",{className:"space-y-5",children:Object.entries(r).map(([t,e])=>E.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[E.jsxs("h5",{className:"font-semibold text-xl mb-4 capitalize",children:[t," Зонирование"]}),E.jsx("div",{className:"space-y-3",children:Object.entries(e).map(([i,a])=>E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("span",{className:"capitalize text-xl",children:[i," зона"]}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:E.jsx("div",{className:"bg-[var(--accent-color)] h-3 rounded-full",style:{width:`${a}%`}})}),E.jsxs("span",{className:"text-xl font-medium w-16",children:[a,"%"]})]})]},i))})]},t))}):E.jsx("div",{className:"text-xl",children:"Нет данных зонирования"})}function ZA(){const[r,t]=j.useState("profile"),[e,i]=j.useState(null),[a,o]=j.useState(!0),[u,h]=j.useState(""),f=Ac(),g=async()=>{try{Oi("token"),f("/login")}catch(y){console.log(`Error logging out: ${y}`),f("/login")}};if(j.useEffect(()=>{(async()=>{const p=dn("token");if(console.log(`Token: ${p}`),!p||!lc(p)){Oi("token"),f("/login");return}try{const v=await Xx(p),S=v.headers.get("content-type");if(S&&S.includes("application/json")){const w=await v.json();w.status==="success"?(i({name:`${w.user.first_name} ${w.user.last_name}`,email:w.user.login}),h("")):(console.error("Ошибка от сервера:",w),h("Ошибка загрузки профиля"),Oi("token"),f("/login"))}else{const w=await v.text();console.error("Сервер вернул HTML вместо JSON:",w.substring(0,200)),h("Неверный формат ответа от сервера"),Oi("token"),f("/login")}}catch(v){console.error("Ошибка при получении профиля:",v),h("Ошибка соединения с сервером"),Oi("token"),f("/login")}finally{o(!1)}})()},[f]),j.useEffect(()=>{console.log("API_BASE должен быть настроен в fetch.js")},[]),a)return E.jsx(Mb,{});if(u&&!e)return E.jsxs("div",{className:"flex flex-col min-h-screen justify-center items-center",children:[E.jsx("div",{className:"text-red-500 text-xl mb-4",children:u}),E.jsx("button",{onClick:()=>f("/login"),className:"bg-[var(--accent-color)] text-white px-4 py-2 rounded",children:"Вернуться к входу"})]});if(!e)return null;const m=()=>{switch(r){case"profile":return E.jsx(xp,{user:e});case"fields":return E.jsx(PA,{setActiveTab:t});case"analyses":return E.jsx(UA,{});default:return E.jsx(xp,{user:e})}};return E.jsxs("div",{className:"flex flex-col min-h-screen",children:[E.jsx(Db,{}),E.jsx("div",{className:"flex-1 flex justify-center bg-[var(--neutral-light-color)] py-24",children:E.jsx("div",{className:"pt-24 pb-12 w-[80vw] bg-white rounded-[4vw]",children:E.jsxs("div",{className:"flex w-full space-x-16 px-8 h-full",children:[E.jsx(Lb,{user:e,activeTab:r,setActiveTab:t}),E.jsxs("main",{className:"flex-1 rounded-2xl p-12 mt-2",children:[E.jsx(Ob,{activeTab:r}),m()]})]})})}),E.jsx(Bx,{showNavigation:!1,logoutFunction:g})]})}function qA(){return E.jsx(E.Fragment,{children:E.jsx(XC,{children:E.jsxs(vC,{children:[E.jsx(ua,{path:"/",element:E.jsx(pp,{})}),E.jsx(ua,{path:"/login",element:E.jsx(Rb,{})}),E.jsx(ua,{path:"/registration",element:E.jsx(Ab,{})}),E.jsx(ua,{path:"/profile",element:E.jsx(ZA,{})}),E.jsx(ua,{path:"*",element:E.jsx(pp,{})})]})})})}DS.createRoot(document.getElementById("root")).render(E.jsx(j.StrictMode,{children:E.jsx(qA,{})}));
